<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geva Kipper - Portfolio</title>
    <style>
        :root {
            --bg-color: #111;
            --text-color: #f5f5f5;
            --accent-color: #0099ff;
            --card-bg: #1a1a1a;
            --card-hover-bg: #222;
            --card-border: rgba(0, 153, 255, 0.3);
            --card-hover-border: rgba(0, 153, 255, 0.8);
            --transition-speed: 0.3s;
        }

        .light-mode {
            --bg-color: #f5f5f5;
            --text-color: #111;
            --accent-color: #0066cc;
            --card-bg: #fff;
            --card-hover-bg: #f0f0f0;
            --card-border: rgba(0, 102, 204, 0.3);
            --card-hover-border: rgba(0, 102, 204, 0.8);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.5s, color 0.5s, border-color 0.5s, box-shadow 0.5s;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
            cursor: none;
        }

        #custom-cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: var(--accent-color);
            pointer-events: none;
            mix-blend-mode: difference;
            z-index: 9999;
            transform: translate(-50%, -50%);
        }

        #cursor-trail {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9998;
        }

        .trail-dot {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background-color: var(--accent-color);
            opacity: 0.5;
            transform: translate(-50%, -50%);
            transition: opacity 1s;
        }

        #canvas-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
        }

        header {
            margin-bottom: 4rem;
            position: relative;
        }

        .ml-indicator {
            position: relative;
            height: 3px;
            width: 100%;
            background-color: rgba(128, 128, 128, 0.2);
            margin: 1.5rem 0;
            border-radius: 2px;
        }

        .ml-indicator-fill {
            position: absolute;
            height: 100%;
            width: 0%;
            background-color: var(--accent-color);
            border-radius: 2px;
            transition: width 1s ease;
        }

        .ml-notification {
            background-color: rgba(0, 0, 0, 0.5);
            color: var(--text-color);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            position: absolute;
            top: 1rem;
            right: 1rem;
            opacity: 0.7;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fade-in 1s ease-in-out;
        }

        h1 {
            font-size: 4rem;
            margin-bottom: 0.5rem;
            font-weight: 800;
            letter-spacing: -1px;
        }

        .subtitle {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            font-weight: 300;
            opacity: 0.9;
            min-height: 40px;
        }

        .ai-explanation {
            font-size: 1rem;
            opacity: 0.7;
            max-width: 800px;
            margin-bottom: 2rem;
            position: relative;
            padding-left: 10px;
        }

        .ai-explanation::before {
            content: "";
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 2px;
            background-color: var(--accent-color);
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-auto-rows: minmax(250px, auto);
            gap: 2rem;
            margin-bottom: 4rem;
            transition: all 1s cubic-bezier(0.19, 1, 0.22, 1);
        }

        .project-box {
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            border: 1px solid var(--card-border);
            transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1),
                        border-color var(--transition-speed),
                        box-shadow var(--transition-speed),
                        background-color var(--transition-speed);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transform-style: preserve-3d;
            perspective: 1000px;
        }

        .project-box:nth-child(1) {
            grid-column: 1 / 3;
            grid-row: 1 / 2;
        }

        .project-box:nth-child(2) {
            grid-column: 3 / 4;
            grid-row: 1 / 3;
        }

        .project-box:nth-child(5) {
            grid-column: 2 / 4;
        }

        .project-box:hover {
            transform: translateY(-10px);
            border-color: var(--card-hover-border);
            box-shadow: 0 15px 30px rgba(0, 153, 255, 0.2);
            background-color: var(--card-hover-bg);
        }

        .project-interest-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .interest-level {
            height: 100%;
            width: 0%;
            background-color: var(--accent-color);
            transition: width 1s ease;
        }

        .project-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1rem;
            position: relative;
            z-index: 2;
        }

        .project-shape {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            opacity: 0.2;
            transform: rotate(0deg);
            transition: transform 1s ease, opacity 0.5s ease;
        }

        .project-box:hover .project-shape {
            transform: rotate(45deg) scale(1.2);
            opacity: 0.3;
        }

        .project-content {
            opacity: 0.8;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
            position: relative;
            z-index: 2;
        }

        .project-box:hover .project-content {
            opacity: 1;
            transform: translateY(0);
        }

        .project-links {
            margin-top: 1.5rem;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .project-links a {
            color: var(--accent-color);
            text-decoration: none;
            font-size: 0.9rem;
            background-color: rgba(0, 153, 255, 0.1);
            padding: 5px 15px;
            border-radius: 20px;
            transition: background-color 0.3s, transform 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .project-links a:hover {
            background-color: rgba(0, 153, 255, 0.2);
            transform: translateY(-3px);
        }

        .media-links {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .media-links a {
            font-size: 0.8rem;
            opacity: 0.7;
            transition: opacity 0.3s;
        }

        .media-links a:hover {
            opacity: 1;
        }

        /* GlglStats specific */
        .audio-waveform {
            height: 40px;
            display: flex;
            align-items: flex-end;
            gap: 2px;
            margin: 1rem 0;
        }

        .waveform-line {
            flex: 1;
            background-color: var(--accent-color);
            height: 5px;
            transition: height 0.2s ease;
        }

        /* Ahuzat Dibuk specific */
        .heatmap {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(5, 1fr);
            gap: 2px;
            height: 100px;
            margin: 1rem 0;
        }

        .heatmap-cell {
            background-color: rgba(0, 153, 255, 0.1);
            border-radius: 2px;
            transition: background-color 0.5s ease;
        }

        /* 2D Part Orienting specific */
        .polygon-demo {
            height: 120px;
            width: 100%;
            position: relative;
            margin: 1rem 0;
        }

        .polygon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: transform 2s ease;
        }

        /* Portfolio Website specific */
        .recursive-frame {
            border: 2px solid var(--accent-color);
            border-radius: 5px;
            padding: 10px;
            margin: 1rem 0;
            height: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .recursive-frame::before {
            content: "";
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border: 1px solid var(--accent-color);
            border-radius: 3px;
            opacity: 0.7;
        }

        .recursive-frame::after {
            content: "";
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            border: 1px solid var(--accent-color);
            border-radius: 2px;
            opacity: 0.4;
        }

        /* Social links specific */
        .social-icons {
            display: flex;
            justify-content: space-around;
            height: 120px;
            align-items: center;
            margin: 1rem 0;
        }

        .social-icon {
            width: 60px;
            height: 60px;
            position: relative;
            transition: transform 0.5s ease;
        }

        .social-icon:hover {
            transform: scale(1.2);
        }

        .social-icon svg {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            fill: var(--accent-color);
            transition: opacity 0.3s;
        }

        .social-icon .platform-icon {
            opacity: 0;
        }

        .social-icon:hover .shape-icon {
            opacity: 0;
        }

        .social-icon:hover .platform-icon {
            opacity: 1;
        }

        .reset-btn {
            background-color: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--text-color);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-bottom: 2rem;
            transition: background-color 0.3s;
        }

        .reset-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        footer {
            padding: 2rem;
            text-align: center;
            margin-top: 2rem;
            opacity: 0.7;
            position: relative;
        }

        .stopwatch {
            font-size: 1rem;
            font-family: monospace;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 1rem;
        }

        .hourglass {
            width: 20px;
            height: 20px;
            position: relative;
        }

        .credit-line {
            font-size: 0.8rem;
            opacity: 0;
            animation: fade-in 2s ease forwards 1s;
        }

        .mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.3);
            border: none;
            color: var(--text-color);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
            backdrop-filter: blur(5px);
            transition: background-color 0.3s;
        }

        .mode-toggle:hover {
            background-color: rgba(0, 0, 0, 0.5);
        }

        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 0.7; }
        }

        @media (max-width: 1200px) {
            .projects-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .project-box:nth-child(1) {
                grid-column: 1 / 3;
            }

            .project-box:nth-child(2) {
                grid-column: 1 / 2;
                grid-row: auto;
            }

            .project-box:nth-child(5) {
                grid-column: 1 / 3;
            }
        }

        @media (max-width: 768px) {
            body {
                cursor: auto;
            }

            #custom-cursor, #cursor-trail {
                display: none;
            }

            h1 {
                font-size: 2.5rem;
            }

            .container {
                padding: 1rem;
            }

            .projects-grid {
                display: flex;
                flex-direction: column;
                gap: 1.5rem;
            }

            .project-box {
                min-height: 300px;
            }
            
            .project-box:nth-child(n) {
                grid-column: auto;
                grid-row: auto;
            }
        }

        /* Carousel for mobile */
        .carousel {
            display: none;
            width: 100%;
            position: relative;
        }

        .carousel-inner {
            width: 100%;
            overflow-x: scroll;
            display: flex;
            scroll-behavior: smooth;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            padding-bottom: 20px;
        }

        .carousel-item {
            min-width: 90%;
            margin-right: 20px;
            scroll-snap-align: start;
        }

        .carousel-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .carousel-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .carousel-dot.active {
            background-color: var(--accent-color);
        }

        @media (max-width: 768px) {
            .projects-grid {
                display: none;
            }

            .carousel {
                display: block;
                margin-bottom: 2rem;
            }
        }
    </style>
</head>
<body>
    <div id="custom-cursor"></div>
    <div id="cursor-trail"></div>
    <canvas id="canvas-background"></canvas>
    
    <div class="container">
        <header>
            <div class="ml-notification">I'm learning your interests as you browse...</div>
            <h1>Geva Kipper</h1>
            <div class="subtitle" id="typewriter"></div>
            <div class="ai-explanation">This website redesigns itself daily via AI, ensuring a unique experience every 24 hours.</div>
            
            <div class="ml-indicator">
                <div class="ml-indicator-fill" id="ml-confidence"></div>
            </div>
        </header>

        <button class="reset-btn" id="reset-ml">Reset ML Predictions</button>

        <div class="projects-grid" id="projects-grid">
            <div class="project-box" data-interest="0" id="glglstats">
                <div class="project-interest-indicator"><div class="interest-level"></div></div>
                <div class="project-shape">
                    <svg viewBox="0 0 100 100">
                        <circle cx="50" cy="50" r="40" stroke="currentColor" fill="none" stroke-width="5"/>
                        <path d="M50 10 L50 90 M10 50 L90 50" stroke="currentColor" stroke-width="5"/>
                    </svg>
                </div>
                <h3 class="project-title">GlglStats</h3>
                <div class="project-content">
                    <div class="audio-waveform">
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                        <div class="waveform-line"></div>
                    </div>
                    <p>Analyzing and visualizing real-time network statistical data with advanced compression patterns.</p>
                    <div class="project-links">
                        <a href="https://glglstats.onrender.com/" target="_blank">Visit Website</a>
                        <a href="https://www.youtube.com/watch?v=jrKAtOsj1Lo" target="_blank">Watch Conference Presentation</a>
                    </div>
                </div>
            </div>

            <div class="project-box" data-interest="0" id="ahuzat-dibuk">
                <div class="project-interest-indicator"><div class="interest-level"></div></div>
                <div class="project-shape">
                    <svg viewBox="0 0 100 100">
                        <rect x="10" y="10" width="80" height="80" stroke="currentColor" fill="none" stroke-width="5"/>
                        <path d="M10 50 L90 50 M50 10 L50 90" stroke="currentColor" stroke-width="3" stroke-dasharray="5,5"/>
                    </svg>
                </div>
                <h3 class="project-title">Ahuzat Dibuk</h3>
                <div class="project-content">
                    <div class="heatmap" id="heatmap">
                        <!-- Generated dynamically -->
                    </div>
                    <p>Urban parking analysis system that created a stir in local media with its effective solution.</p>
                    <div class="project-links">
                        <a href="https://www.facebook.com/groups/secrettelaviv/posts/10159636301195943" target="_blank">Publication Post</a>
                    </div>
                    <div class="media-links">
                        <a href="https://13tv.co.il/item/news/domestic/internal/parking-902956407/" target="_blank">13TV Coverage</a>
                        <a href="https://www.mako.co.il/nexter-news/Article-ae43964b891bf71027.htm" target="_blank">Mako Feature</a>
                    </div>
                </div>
            </div>

            <div class="project-box" data-interest="0" id="2d-orienting">
                <div class="project-interest-indicator"><div class="interest-level"></div></div>
                <div class="project-shape">
                    <svg viewBox="0 0 100 100">
                        <polygon points="50,10 90,30 90,70 50,90 10,70 10,30" stroke="currentColor" fill="none" stroke-width="5"/>
                    </svg>
                </div>
                <h3 class="project-title">2D Part Orienting</h3>
                <div class="project-content">
                    <div class="polygon-demo">
                        <svg class="polygon" width="100" height="100" viewBox="0 0 100 100">
                            <polygon points="50,10 90,30 90,70 50,90 10,70 10,30" fill="none" stroke="var(--accent-color)" stroke-width="2"/>
                        </svg>
                    </div>
                    <p>Algorithm research for automatic orientation of polygonal parts, implemented with real-time simulation.</p>
                    <div class="project-links">
                        <a href="https://www.cgl.cs.tau.ac.il/projects/2d-part-orienting/" target="_blank">Research Page</a>
                    </div>
                </div>
            </div>

            <div class="project-box" data-interest="0" id="portfolio">
                <div class="project-interest-indicator"><div class="interest-level"></div></div>
                <div class="project-shape">
                    <svg viewBox="0 0 100 100">
                        <rect x="20" y="20" width="60" height="60" stroke="currentColor" fill="none" stroke-width="5"/>
                        <rect x="30" y="30" width="40" height="40" stroke="currentColor" fill="none" stroke-width="3"/>
                        <rect x="40" y="40" width="20" height="20" stroke="currentColor" fill="none" stroke-width="2"/>
                    </svg>
                </div>
                <h3 class="project-title">Portfolio Website</h3>
                <div class="project-content">
                    <div class="recursive-frame"></div>
                    <p>The very website you're browsing now, featuring ML-driven interest prediction and dynamic content reorganization.</p>
                    <div class="project-links">
                        <a href="https://portfolio-dor1.onrender.com/" target="_blank">You Are Here</a>
                    </div>
                </div>
            </div>

            <div class="project-box" data-interest="0" id="social-links">
                <div class="project-interest-indicator"><div class="interest-level"></div></div>
                <div class="project-shape">
                    <svg viewBox="0 0 100 100">
                        <circle cx="50" cy="50" r="40" stroke="currentColor" fill="none" stroke-width="5"/>
                        <polygon points="50,20 80,50 50,80 20,50" stroke="currentColor" fill="none" stroke-width="3"/>
                    </svg>
                </div>
                <h3 class="project-title">Connect With Me</h3>
                <div class="project-content">
                    <div class="social-icons">
                        <a href="https://github.com/gevak" target="_blank" class="social-icon">
                            <svg class="shape-icon" viewBox="0 0 100 100">
                                <rect x="20" y="20" width="60" height="60" stroke="currentColor" fill="none" stroke-width="5"/>
                            </svg>
                            <svg class="platform-icon" viewBox="0 0 24 24">
                                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                            </svg>
                        </a>
                        <a href="https://linkedin.com/in/gevakip" target="_blank" class="social-icon">
                            <svg class="shape-icon" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="40" stroke="currentColor" fill="none" stroke-width="5"/>
                            </svg>
                            <svg class="platform-icon" viewBox="0 0 24 24">
                                <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                            </svg>
                        </a>
                        <a href="https://facebook.com/geva.kipper" target="_blank" class="social-icon">
                            <svg class="shape-icon" viewBox="0 0 100 100">
                                <polygon points="50,10 90,50 50,90 10,50" stroke="currentColor" fill="none" stroke-width="5"/>
                            </svg>
                            <svg class="platform-icon" viewBox="0 0 24 24">
                                <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-3 7h-1.924c-.615 0-1.076.252-1.076.889v1.111h3l-.238 3h-2.762v8h-3v-8h-2v-3h2v-1.923c0-2.022 1.064-3.077 3.461-3.077h2.539v3z"/>
                            </svg>
                        </a>
                    </div>
                    <p>Reach out on social platforms to discuss collaborations or just to say hello.</p>
                </div>
            </div>
        </div>

        <div class="carousel">
            <div class="carousel-inner" id="carousel">
                <!-- Projects will be cloned here for mobile -->
            </div>
            <div class="carousel-controls" id="carousel-controls"></div>
        </div>

        <footer>
            <div class="stopwatch" id="stopwatch">
                <div class="hourglass">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M12 2v20M6 4h12M6 20h12M7 4c0 3 2 5 5 8s5 5 5 8M7 20c0-3 2-5 5-8s5-5 5-8"/>
                    </svg>
                </div>
                <span id="time-counter">0 days, 00:00:00</span>
            </div>
            <div class="credit-line">Design generated by GPT-4 on May 10, 2024</div>
        </footer>
    </div>

    <button class="mode-toggle" id="mode-toggle">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"></circle>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path>
        </svg>
    </button>

    <script>
        // ML Interest Prediction Model
        class MLModel {
            constructor() {
                this.interests = {
                    glglstats: 0,
                    'ahuzat-dibuk': 0,
                    '2d-orienting': 0,
                    portfolio: 0,
                    'social-links': 0
                };
                this.interactions = {
                    hovers: {},
                    clicks: {},
                    scrolls: 0
                };
                this.confidence = 0;
                this.maxInterest = 100;
                this.updateInterval = null;
                this.lastPrediction = Date.now();
            }

            recordHover(projectId, duration) {
                if (!this.interactions.hovers[projectId]) {
                    this.interactions.hovers[projectId] = 0;
                }
                this.interactions.hovers[projectId] += duration;
                this.predict();
            }

            recordClick(projectId) {
                if (!this.interactions.clicks[projectId]) {
                    this.interactions.clicks[projectId] = 0;
                }
                this.interactions.clicks[projectId]++;
                this.predict();
            }

            recordScroll() {
                this.interactions.scrolls++;
                // Only predict occasionally on scroll to avoid constant recalculation
                if (this.interactions.scrolls % 5 === 0) {
                    this.predict();
                }
            }

            predict() {
                // Simple prediction algorithm
                // 1. Calculate total hover time
                let totalHoverTime = 0;
                for (const project in this.interactions.hovers) {
                    totalHoverTime += this.interactions.hovers[project];
                }

                // 2. Calculate total clicks
                let totalClicks = 0;
                for (const project in this.interactions.clicks) {
                    totalClicks += this.interactions.clicks[project];
                }

                // 3. Normalize and update interests
                for (const project in this.interests) {
                    const hoverTime = this.interactions.hovers[project] || 0;
                    const clicks = this.interactions.clicks[project] || 0;
                    
                    // Weight: hover time 40%, clicks 60%
                    const hoverWeight = totalHoverTime > 0 ? (hoverTime / totalHoverTime) * 0.4 : 0;
                    const clickWeight = totalClicks > 0 ? (clicks / totalClicks) * 0.6 : 0;
                    
                    // Update interest value with some decay from previous value
                    this.interests[project] = this.interests[project] * 0.7 + (hoverWeight + clickWeight) * this.maxInterest * 0.3;
                }

                // Update confidence based on total interaction amount
                const totalInteraction = totalHoverTime + totalClicks * 10 + this.interactions.scrolls;
                this.confidence = Math.min(100, totalInteraction / 30 * 100);

                // Only reorganize content occasionally
                if (Date.now() - this.lastPrediction > 2000) { // Every 2 seconds max
                    this.reorganizeContent();
                    this.lastPrediction = Date.now();
                }

                this.updateInterestIndicators();
            }

            updateInterestIndicators() {
                // Update ML confidence indicator
                document.getElementById('ml-confidence').style.width = `${this.confidence}%`;
                
                // Update interest indicators for each project
                for (const projectId in this.interests) {
                    const projectBox = document.getElementById(projectId);
                    if (projectBox) {
                        const indicator = projectBox.querySelector('.interest-level');
                        if (indicator) {
                            indicator.style.width = `${(this.interests[projectId] / this.maxInterest) * 100}%`;
                        }
                    }
                }
            }

            reorganizeContent() {
                const projectsGrid = document.getElementById('projects-grid');
                const projectBoxes = Array.from(document.querySelectorAll('.project-box'));
                
                // Sort projects by interest level
                projectBoxes.sort((a, b) => {
                    const aId = a.id;
                    const bId = b.id;
                    return this.interests[bId] - this.interests[aId];
                });
                
                // Add gentle animation for reorganization
                projectsGrid.style.transition = 'opacity 0.5s ease';
                projectsGrid.style.opacity = '0.8';

                // Reappend in new order after a short delay
                setTimeout(() => {
                    projectBoxes.forEach(box => {
                        projectsGrid.appendChild(box);
                    });
                    projectsGrid.style.opacity = '1';
                }, 500);

                // Update carousel order for mobile
                this.updateCarousel(projectBoxes);
            }

            updateCarousel(sortedProjects) {
                const carousel = document.getElementById('carousel');
                carousel.innerHTML = '';
                
                // Clear carousel controls
                const carouselControls = document.getElementById('carousel-controls');
                carouselControls.innerHTML = '';
                
                // Clone sorted projects into carousel
                sortedProjects.forEach((project, index) => {
                    const clone = project.cloneNode(true);
                    clone.classList.add('carousel-item');
                    carousel.appendChild(clone);
                    
                    // Add dot control
                    const dot = document.createElement('div');
                    dot.classList.add('carousel-dot');
                    if (index === 0) dot.classList.add('active');
                    dot.addEventListener('click', () => this.scrollToItem(index));
                    carouselControls.appendChild(dot);
                });
            }

            scrollToItem(index) {
                const carousel = document.getElementById('carousel');
                const items = carousel.querySelectorAll('.carousel-item');
                if (items[index]) {
                    items[index].scrollIntoView({ behavior: 'smooth', inline: 'start' });
                    
                    // Update active dot
                    document.querySelectorAll('.carousel-dot').forEach((dot, i) => {
                        dot.classList.toggle('active', i === index);
                    });
                }
            }

            reset() {
                for (const project in this.interests) {
                    this.interests[project] = 0;
                }
                this.interactions = {
                    hovers: {},
                    clicks: {},
                    scrolls: 0
                };
                this.confidence = 0;
                this.updateInterestIndicators();
                
                // Reset project order to original
                const projectsGrid = document.getElementById('projects-grid');
                const originalOrder = [
                    'glglstats',
                    'ahuzat-dibuk',
                    '2d-orienting',
                    'portfolio',
                    'social-links'
                ];
                
                originalOrder.forEach(id => {
                    const project = document.getElementById(id);
                    if (project) {
                        projectsGrid.appendChild(project);
                    }
                });
                
                // Update carousel
                const projectBoxes = originalOrder.map(id => document.getElementById(id));
                this.updateCarousel(projectBoxes);
            }
        }

        // Initialize ML model
        const model = new MLModel();

        // Typewriter effect for subtitle
        function typewriterEffect(element, text, speed = 50) {
            let i = 0;
            function type() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                }
            }
            type();
        }

        // Audio waveform animation
        function animateWaveform() {
            const lines = document.querySelectorAll('.waveform-line');
            lines.forEach(line => {
                const height = Math.floor(Math.random() * 30) + 5;
                line.style.height = `${height}px`;
            });
        }

        // Heatmap animation
        function setupHeatmap() {
            const heatmap = document.getElementById('heatmap');
            if (!heatmap) return;
            
            heatmap.innerHTML = '';
            
            // Create cells
            for (let i = 0; i < 50; i++) {
                const cell = document.createElement('div');
                cell.classList.add('heatmap-cell');
                heatmap.appendChild(cell);
            }
            
            // Animate heatmap
            function animateHeatmap() {
                const cells = heatmap.querySelectorAll('.heatmap-cell');
                cells.forEach(cell => {
                    const intensity = Math.random();
                    cell.style.backgroundColor = `rgba(0, 153, 255, ${intensity * 0.5})`;
                });
            }
            
            // Run animation every 2 seconds
            setInterval(animateHeatmap, 2000);
        }

        // Polygon rotation animation
        function animatePolygon() {
            const polygon = document.querySelector('.polygon');
            if (!polygon) return;
            
            let rotation = 0;
            
            setInterval(() => {
                rotation = (rotation + 5) % 360;
                polygon.style.transform = `translate(-50%, -50%) rotate(${rotation}deg)`;
            }, 100);
        }

        // Custom cursor
        function setupCustomCursor() {
            const cursor = document.getElementById('custom-cursor');
            const trail = document.getElementById('cursor-trail');
            const dots = [];
            const maxDots = 10;
            
            document.addEventListener('mousemove', (e) => {
                // Move the main cursor
                cursor.style.left = `${e.clientX}px`;
                cursor.style.top = `${e.clientY}px`;
                
                // Create trail
                const dot = document.createElement('div');
                dot.classList.add('trail-dot');
                dot.style.left = `${e.clientX}px`;
                dot.style.top = `${e.clientY}px`;
                trail.appendChild(dot);
                
                dots.push(dot);
                
                // Remove old dots
                if (dots.length > maxDots) {
                    const oldDot = dots.shift();
                    oldDot.style.opacity = '0';
                    setTimeout(() => {
                        oldDot.remove();
                    }, 500);
                }
            });

            // Hide cursor when leaving window
            document.addEventListener('mouseout', () => {
                cursor.style.opacity = '0';
            });
            
            document.addEventListener('mouseover', () => {
                cursor.style.opacity = '1';
            });
        }

        // Particle background
        function setupBackground() {
            const canvas = document.getElementById('canvas-background');
            const ctx = canvas.getContext('2d');
            const particles = [];
            const maxParticles = 50;
            
            // Resize canvas to window size
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            
            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();
            
            // Create particles
            function createParticles() {
                for (let i = 0; i < maxParticles; i++) {
                    particles.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        size: Math.random() * 2 + 1,
                        speedX: (Math.random() - 0.5) * 0.5,
                        speedY: (Math.random() - 0.5) * 0.5,
                        opacity: Math.random() * 0.2
                    });
                }
            }
            
            // Draw particles
            function drawParticles() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                particles.forEach(p => {
                    ctx.beginPath();
                    const color = getComputedStyle(document.documentElement).getPropertyValue('--accent-color');
                    ctx.fillStyle = `rgba(0, 153, 255, ${p.opacity})`;
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Update position
                    p.x += p.speedX;
                    p.y += p.speedY;
                    
                    // Wrap around canvas
                    if (p.x < 0) p.x = canvas.width;
                    if (p.x > canvas.width) p.x = 0;
                    if (p.y < 0) p.y = canvas.height;
                    if (p.y > canvas.height) p.y = 0;
                });
                
                // Connect nearby particles
                for (let i = 0; i < particles.length; i++) {
                    for (let j = i + 1; j < particles.length; j++) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 100) {
                            ctx.beginPath();
                            ctx.strokeStyle = `rgba(0, 153, 255, ${0.1 - (distance / 1000)})`;
                            ctx.lineWidth = 0.5;
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(particles[j].x, particles[j].y);
                            ctx.stroke();
                        }
                    }
                }
                
                requestAnimationFrame(drawParticles);
            }
            
            createParticles();
            drawParticles();
            
            // React to mouse for special effects
            document.addEventListener('mousemove', (e) => {
                // Adjust some particles towards cursor
                for (let i = 0; i < 5; i++) {
                    const p = particles[Math.floor(Math.random() * particles.length)];
                    const dx = e.clientX - p.x;
                    const dy = e.clientY - p.y;
                    const angle = Math.atan2(dy, dx);
                    
                    p.speedX = Math.cos(angle) * 0.3;
                    p.speedY = Math.sin(angle) * 0.3;
                }
            });
        }

        // Setup hover tracking for ML model
        function setupHoverTracking() {
            const projectBoxes = document.querySelectorAll('.project-box');
            
            projectBoxes.forEach(box => {
                let hoverStart = null;
                
                box.addEventListener('mouseenter', () => {
                    hoverStart = Date.now();
                });
                
                box.addEventListener('mouseleave', () => {
                    if (hoverStart) {
                        const duration = (Date.now() - hoverStart) / 1000; // in seconds
                        model.recordHover(box.id, duration);
                        hoverStart = null;
                    }
                });
                
                box.addEventListener('click', () => {
                    model.recordClick(box.id);
                });
            });
            
            // Track scrolling
            window.addEventListener('scroll', () => {
                model.recordScroll();
            });
        }

        // Setup stopwatch
        function setupStopwatch() {
            const targetDate = new Date('May 14, 2025 01:06:14').getTime();
            
            function updateStopwatch() {
                const now = new Date().getTime();
                const elapsed = now - targetDate;
                
                const days = Math.floor(elapsed / (1000 * 60 * 60 * 24));
                const hours = Math.floor((elapsed % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((elapsed % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((elapsed % (1000 * 60)) / 1000);
                
                document.getElementById('time-counter').textContent = 
                    `${days} days, ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
            
            // Update every second
            setInterval(updateStopwatch, 1000);
            updateStopwatch(); // Initial update
        }

        // Initialize carousel
        function setupCarousel() {
            const projectBoxes = Array.from(document.querySelectorAll('.project-box'));
            model.updateCarousel(projectBoxes);
            
            // Handle scroll events to update active dot
            const carousel = document.getElementById('carousel');
            carousel.addEventListener('scroll', () => {
                const scrollLeft = carousel.scrollLeft;
                const itemWidth = carousel.querySelector('.carousel-item').offsetWidth;
                const index = Math.round(scrollLeft / itemWidth);
                
                document.querySelectorAll('.carousel-dot').forEach((dot, i) => {
                    dot.classList.toggle('active', i === index);
                });
            });
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', () => {
            // Start typewriter effect
            typewriterEffect(
                document.getElementById('typewriter'),
                'Software Engineer at Google, working on large-scale infrastructure and machine learning systems.'
            );
            
            // Setup animations
            setInterval(animateWaveform, 300);
            setupHeatmap();
            animatePolygon();
            
            // Setup ML tracking
            setupHoverTracking();
            setupStopwatch();
            setupCustomCursor();
            setupBackground();
            setupCarousel();
            
            // Reset ML button
            document.getElementById('reset-ml').addEventListener('click', () => {
                model.reset();
            });
            
            // Dark/light mode toggle
            document.getElementById('mode-toggle').addEventListener('click', () => {
                document.body.classList.toggle('light-mode');
            });
        });
    </script>
<!-- Add this block to embed the like button -->
    <script src="/static/js/like_button.js"></script>
    <script>
        LikeButton.init({
          pageId: "20250514",
          position: "bottom-right", // Options: bottom-right, bottom-left, top-right, top-left
        });
    </script>

</body>
</html>