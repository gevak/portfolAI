<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geva Kipper | Portfolio</title>
    <style>
        :root {
            --bg-color: #12141d;
            --text-color: #c9d1d9;
            --text-secondary-color: #8b949e;
            --panel-bg: #1a1e2b;
            --border-color: #30363d;
            --font-main: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            --font-mono: 'SF Mono', 'Consolas', 'Menlo', 'Courier', monospace;

            --color-branch-1: #39c5bb;
            --color-branch-2: #f779b7;
            --color-branch-3: #ff9b42;
            --color-branch-4: #8d76ff;
            --color-branch-5: #61dafb;
            --color-branch-6: #ffcd29;
            --color-branch-7: #e0e0e0;
        }

        /* --- Basic Setup & Typography --- */
        * {
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-main);
            margin: 0;
            overflow-x: hidden;
        }

        /* --- Layout --- */
        .page-container {
            display: flex;
            min-height: 100vh;
        }

        .left-column {
            width: 25vw;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            border-right: 1px solid var(--border-color);
        }

        .right-column {
            width: 75vw;
            margin-left: 25vw;
            display: flex;
            flex-direction: column;
        }

        /* --- Left Column: Git Tree --- */
        .git-timeline-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        #git-svg {
            position: absolute;
            top: 0;
            left: 0;
        }
        
        #git-svg .git-branch {
            fill: none;
            stroke-width: 2px;
            stroke-linecap: round;
        }

        #git-svg .commit-node-group .commit-node {
            stroke-width: 2.5px;
            fill: var(--bg-color);
            fill-opacity: 0.6;
            transition: all 0.3s ease;
        }
        
        #git-svg .commit-node-group .commit-hash {
            font-family: var(--font-mono);
            font-size: 11px;
            fill: var(--text-secondary-color);
            transition: fill 0.3s ease;
        }

        #git-svg .commit-node-group .commit-node-hitbox {
             fill: transparent;
             cursor: pointer;
        }
        
        #git-svg .commit-node-group:hover .commit-node {
            transform-origin: center;
            transform: scale(1.3);
            fill-opacity: 1;
        }

        #git-svg .commit-node-group:hover .commit-hash {
            fill: var(--text-color);
        }

        #git-svg .commit-node-group.active .commit-node {
            fill-opacity: 1;
            transform: scale(1.3);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.5); }
            70% { box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
        }

        /* Custom glow for each branch color */
        #git-svg .commit-node-group.active[data-color="--color-branch-1"] .commit-node { animation: pulse-1 1.5s infinite; }
        @keyframes pulse-1 { 0% { filter: drop-shadow(0 0 0 var(--color-branch-1));} 70% { filter: drop-shadow(0 0 8px var(--color-branch-1));} 100% { filter: drop-shadow(0 0 0 var(--color-branch-1));} }
        #git-svg .commit-node-group.active[data-color="--color-branch-2"] .commit-node { animation: pulse-2 1.5s infinite; }
        @keyframes pulse-2 { 0% { filter: drop-shadow(0 0 0 var(--color-branch-2));} 70% { filter: drop-shadow(0 0 8px var(--color-branch-2));} 100% { filter: drop-shadow(0 0 0 var(--color-branch-2));} }
        #git-svg .commit-node-group.active[data-color="--color-branch-3"] .commit-node { animation: pulse-3 1.5s infinite; }
        @keyframes pulse-3 { 0% { filter: drop-shadow(0 0 0 var(--color-branch-3));} 70% { filter: drop-shadow(0 0 8px var(--color-branch-3));} 100% { filter: drop-shadow(0 0 0 var(--color-branch-3));} }
        #git-svg .commit-node-group.active[data-color="--color-branch-4"] .commit-node { animation: pulse-4 1.5s infinite; }
        @keyframes pulse-4 { 0% { filter: drop-shadow(0 0 0 var(--color-branch-4));} 70% { filter: drop-shadow(0 0 8px var(--color-branch-4));} 100% { filter: drop-shadow(0 0 0 var(--color-branch-4));} }
        #git-svg .commit-node-group.active[data-color="--color-branch-5"] .commit-node { animation: pulse-5 1.5s infinite; }
        @keyframes pulse-5 { 0% { filter: drop-shadow(0 0 0 var(--color-branch-5));} 70% { filter: drop-shadow(0 0 8px var(--color-branch-5));} 100% { filter: drop-shadow(0 0 0 var(--color-branch-5));} }
        #git-svg .commit-node-group.active[data-color="--color-branch-6"] .commit-node { animation: pulse-6 1.5s infinite; }
        @keyframes pulse-6 { 0% { filter: drop-shadow(0 0 0 var(--color-branch-6));} 70% { filter: drop-shadow(0 0 8px var(--color-branch-6));} 100% { filter: drop-shadow(0 0 0 var(--color-branch-6));} }
        #git-svg .commit-node-group.active[data-color="--color-branch-7"] .commit-node { animation: pulse-7 1.5s infinite; }
        @keyframes pulse-7 { 0% { filter: drop-shadow(0 0 0 var(--color-branch-7));} 70% { filter: drop-shadow(0 0 8px var(--color-branch-7));} 100% { filter: drop-shadow(0 0 0 var(--color-branch-7));} }


        .head-tag {
            position: absolute;
            background-color: var(--color-branch-1);
            color: var(--bg-color);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: var(--font-mono);
            font-size: 11px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .tooltip {
            position: absolute;
            background-color: #0d1117;
            color: var(--text-color);
            padding: 5px 10px;
            border-radius: 6px;
            font-size: 12px;
            font-family: var(--font-main);
            border: 1px solid var(--border-color);
            pointer-events: none;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.2s ease, transform 0.2s ease;
            z-index: 100;
        }

        /* --- Right Column: Content Panels --- */
        .content-panel {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 5vh 8vw;
            border-bottom: 1px solid var(--border-color);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .content-panel.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Header Panel */
        .header-panel h1 {
            font-size: clamp(2.5rem, 5vw, 4.5rem);
            margin: 0;
            font-weight: 700;
            color: #fff;
        }

        .header-panel .subtitle {
            font-family: var(--font-mono);
            font-size: clamp(1rem, 1.5vw, 1.2rem);
            color: var(--text-secondary-color);
            margin-top: 1rem;
        }
        
        .header-panel .subtitle-comment {
            color: #6a737d; /* Comment color */
            font-style: italic;
        }

        /* Project Panels */
        .project-panel {
            gap: 1.5rem;
        }

        .project-panel .panel-header {
            font-family: var(--font-mono);
            font-size: 1.5rem;
            color: var(--text-color);
        }

        .project-panel .panel-content {
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--text-secondary-color);
            max-width: 70ch;
        }
        
        .project-panel .panel-content video, .project-panel .panel-content img, .project-panel .panel-content .animated-svg {
            max-width: 300px;
            border-radius: 8px;
            margin-top: 1rem;
            border: 1px solid var(--border-color);
        }

        .project-panel .panel-links {
            margin-top: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            font-family: var(--font-mono);
            font-size: 1rem;
        }

        .project-panel .panel-links a {
            color: var(--text-secondary-color);
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .project-panel .panel-links a .link-text {
            color: var(--color-branch-1);
            text-decoration: underline;
        }

        .project-panel .panel-links a:hover {
            color: var(--text-color);
        }
        
        .project-panel .panel-links a:hover .link-text {
            color: #58a6ff;
        }
        

        /* Contact Panel */
        .contact-panel .socials {
            display: flex;
            gap: 3rem;
        }

        .contact-panel .social-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.8rem;
            text-decoration: none;
            color: var(--text-secondary-color);
            transition: color 0.3s ease, transform 0.3s ease;
        }
        
        .contact-panel .social-link:hover {
            color: var(--text-color);
            transform: translateY(-5px);
        }

        .contact-panel .social-link svg {
            width: 48px;
            height: 48px;
            fill: currentColor;
        }
        
        .contact-panel .social-link span {
            font-family: var(--font-mono);
        }
        
        /* Special Animations */

        /* 2D Part Orienting SVG Animation */
        .part-orienting-svg {
            background-color: #2a3040;
        }
        .orienting-part {
            fill: var(--color-branch-3);
            stroke: #fff;
            stroke-width: 2;
            animation: orient-part 8s infinite ease-in-out;
            transform-origin: center;
        }
        @keyframes orient-part {
            0% { transform: translate(150px, 150px) rotate(120deg) scale(0.8); }
            20% { transform: translate(80px, 70px) rotate(-30deg) scale(0.8); }
            40% { transform: translate(75px, 85px) rotate(10deg) scale(0.8); }
            60% { transform: translate(100px, 100px) rotate(0deg) scale(1); }
            100% { transform: translate(100px, 100px) rotate(0deg) scale(1); }
        }

        /* Turing Jest Text Animation */
        #turing-jest-output { white-space: pre-wrap; }
        .cursor {
            display: inline-block;
            width: 10px;
            height: 1.2em;
            background-color: var(--text-color);
            animation: blink 1s step-end infinite;
            vertical-align: bottom;
        }
        @keyframes blink { 50% { opacity: 0; } }

        /* Rhymes of Israel Animation */
        .rhymes-animation {
            position: relative;
            height: 3em; 
            overflow: hidden;
        }
        .rhyme-line {
            position: absolute;
            width: 100%;
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }
        .rhyme-line.before {
            opacity: 1;
            transform: translateY(0%);
        }
        .rhyme-line.after {
            opacity: 0;
            transform: translateY(100%);
            color: var(--color-branch-5);
            font-weight: 500;
        }


        /* --- Footer --- */
        footer {
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: var(--text-secondary-color);
            opacity: 0;
            transition: opacity 0.5s;
        }
        
        footer.show {
            opacity: 1;
        }

        footer .uptime-counter {
            font-family: var(--font-mono);
        }

        /* Mobile adjustments */
        @media (max-width: 800px) {
            .page-container {
                flex-direction: column;
            }
            .left-column {
                display: none; /* Hide complex git timeline on mobile */
            }
            .right-column {
                width: 100%;
                margin-left: 0;
            }
            .content-panel {
                min-height: 90vh;
                 padding: 5vh 5vw;
            }
            footer {
                flex-direction: column;
                gap: 0.5rem;
                text-align: center;
            }
        }
    </style>
</head>
<body>

    <div class="page-container">
        <aside class="left-column">
            <div class="git-timeline-container">
                <svg id="git-svg"></svg>
                <div id="head-tag" class="head-tag">HEAD -&gt; main</div>
                <div id="tooltip" class="tooltip"></div>
            </div>
        </aside>

        <main class="right-column">
            <section id="header" class="content-panel header-panel">
                <h1>Geva Kipper</h1>
                <p class="subtitle">Working on core search features at Google.</p>
                <p class="subtitle subtitle-comment">// This site's design is regenerated daily by an AI. Its appearance is ever-changing.</p>
            </section>

            <section id="glglstats" class="content-panel project-panel">
                <h2 class="panel-header">feat(analysis): GlglStats</h2>
                <div class="panel-content">
                    From the makers of the legendary "Galgalatz playlist in Excel", GlglStats is an interactive exploration of Israel's most popular radio station's playlist archive since 2009. The tool uncovers trends, repetition patterns, and artist statistics.
                    <video class="animated-media" src="https://geekip.dev/assets/glgl-trim.mp4" autoplay muted loop playsinline></video>
                </div>
                <div class="panel-links">
                    <a href="https://glglstats.geekip.dev" target="_blank">&gt; view_live_site: <span class="link-text">https://glglstats.geekip.dev</span></a>
                    <a href="https://www.youtube.com/watch?v=jrKAtOsj1Lo" target="_blank">&gt; watch_talk: <span class="link-text">PyData TLV Presentation [YouTube]</span></a>
                </div>
            </section>

            <section id="ahuzat-dibuk" class="content-panel project-panel">
                <h2 class="panel-header">feat(data-viz): Ahuzat Dibuk</h2>
                <div class="panel-content">
                    A data visualization project mapping the most complained-about parking spots in Tel Aviv, based on crowdsourced data from the "Secret Tel Aviv" Facebook group. The resulting heatmap went viral and was covered by national news outlets.
                    <img class="animated-media" src="https://geekip.dev/assets/ahuzat-dibuk.gif" alt="Heatmap of Tel Aviv parking complaints">
                </div>
                <div class="panel-links">
                    <a href="https://13tv.co.il/item/news/domestic/internal/parking-902956407/" target="_blank">&gt; coverage: <span class="link-text">Channel 13 News</span></a>
                    <a href="https://www.mako.co.il/nexter-news/Article-ae43964b891bf71027.htm" target="_blank">&gt; coverage: <span class="link-text">Mako</span></a>
                    <a href="https://www.facebook.com/groups/secrettelaviv/posts/10159636301195943" target="_blank">&gt; source_post: <span class="link-text">Secret Tel Aviv [Facebook]</span></a>
                </div>
            </section>

            <section id="part-orienting" class="content-panel project-panel">
                <h2 class="panel-header">feat(geometry): 2D Part Orienting</h2>
                <div class="panel-content">
                    An academic project implementing a CGAL-based algorithm to find the stable resting positions of a 2D polygon under gravity. The visualization shows the polygon being pushed and settling into its final, most stable orientation.
                    <svg class="animated-media part-orienting-svg" viewBox="0 0 200 200">
                      <polygon class="orienting-part" points="50,150 100,20 150,150 120,150 100,100 80,150" />
                    </svg>
                </div>
                <div class="panel-links">
                    <a href="https://www.cgl.cs.tau.ac.il/projects/2d-part-orienting/" target="_blank">&gt; academic_info --code: <span class="link-text">TAU CGAL Project</span></a>
                </div>
            </section>

            <section id="turing-jest" class="content-panel project-panel">
                <h2 class="panel-header">feat(llm): The Turing Jest</h2>
                <div class="panel-content">
                    An LLM-powered arena where you can't tell human wit from machine-generated puns. The backend generates puns using a fine-tuned model and a custom algorithm, then pits them against human entries for users to rate.
                    <div class="animated-media" style="background-color: #2a3040; padding: 1em; font-family:var(--font-mono); font-size: 0.9em; line-height: 1.5;">
                        <span id="turing-jest-output"></span><span class="cursor"></span>
                    </div>
                </div>
                <div class="panel-links">
                    <a href="https://jest.geekip.dev" target="_blank">&gt; open_arena: <span class="link-text">https://jest.geekip.dev</span></a>
                </div>
            </section>

            <section id="rhymes-of-israel" class="content-panel project-panel">
                <h2 class="panel-header">fix(news): Rhymes of Israel</h2>
                <div class="panel-content">
                    A comedic browser extension that finds the main headline on Israeli news sites and replaces it with a rhyming, often absurd, alternative. It's a small fix to make the news cycle a little more bearable.
                    <div class="animated-media rhymes-animation" style="padding: 1em; font-size: 1.1em; line-height: 1.5;">
                        <div id="rhyme-before" class="rhyme-line before">Police Chief vows to crack down on crime</div>
                        <div id="rhyme-after" class="rhyme-line after">Police Chief says, "It's lemon-thyme!"</div>
                    </div>
                </div>
                <div class="panel-links">
                    <a href="https://chromewebstore.google.com/detail/eainginjgdkpgolpjniijdihfbeeeklb" target="_blank">&gt; install_extension <span class="link-text">--chrome</span></a>
                </div>
            </section>

            <section id="portfolio" class="content-panel project-panel">
                <h2 class="panel-header">chore(meta): Portfolio Site v3.AI</h2>
                <div class="panel-content">
                    The Git-inspired timeline you are currently viewing.
                </div>
                <div class="panel-links">
                    <a href="https://geekip.dev" target="_blank" onclick="alert('This is the source code of reality!'); return false;">&gt; view_source_code_of_reality: <span class="link-text">https://geekip.dev</span></a>
                </div>
            </section>

            <section id="contact" class="content-panel contact-panel">
                <h2 class="panel-header">ref: find-me</h2>
                <div class="socials">
                    <a href="https://github.com/gevak" target="_blank" class="social-link">
                         <svg viewBox="0 0 16 16" version="1.1" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
                        <span>GitHub</span>
                    </a>
                    <a href="https://linkedin.com/in/gevakip" target="_blank" class="social-link">
                         <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M20.5 2h-17A1.5 1.5 0 002 3.5v17A1.5 1.5 0 003.5 22h17a1.5 1.5 0 001.5-1.5v-17A1.5 1.5 0 0020.5 2zM8 19H5v-9h3zM6.5 8.25A1.75 1.75 0 118.25 6.5 1.75 1.75 0 016.5 8.25zM19 19h-3v-4.74c0-1.42-.6-1.93-1.38-1.93A1.62 1.62 0 0013 14.19a.63.63 0 00-.1.44V19h-3v-9h2.9v1.3a3.11 3.11 0 012.7-1.4c1.55 0 3.36.86 3.36 4.42z"></path></svg>
                        <span>LinkedIn</span>
                    </a>
                    <a href="https://facebook.com/geva.kipper" target="_blank" class="social-link">
                        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2.04c-5.5 0-10 4.49-10 10.02 0 5 3.66 9.15 8.44 9.9v-7.02h-2.53v-2.89h2.53V9.8c0-2.51 1.49-3.89 3.78-3.89 1.09 0 2.23.19 2.23.19v2.47h-1.26c-1.24 0-1.63.77-1.63 1.56v1.88h2.78l-.45 2.89h-2.33v7.02c4.78-.75 8.44-4.9 8.44-9.9C22 6.53 17.5 2.04 12 2.04z"></path></svg>
                        <span>Facebook</span>
                    </a>
                </div>
            </section>
        </main>
    </div>

    <footer id="page-footer">
        <div class="ai-credit">UI/UX by Claude 3 Opus, an AI assistant.</div>
        <div id="uptime-counter" class="uptime-counter">UPTIME: 0000d 00h 00m 00s</div>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

    /* --- DATA & CONFIG --- */
    const projects = [
        { id: 'header', title: 'Geva Kipper', parent: null, branch: 0, color: 'var(--color-branch-1)' },
        { id: 'glglstats', title: 'GlglStats', parent: 'header', branch: 0, color: 'var(--color-branch-1)' },
        { id: 'ahuzat-dibuk', title: 'Ahuzat Dibuk', parent: 'glglstats', branch: 1, color: 'var(--color-branch-2)' },
        { id: 'part-orienting', title: '2D Part Orienting', parent: 'glglstats', branch: 2, color: 'var(--color-branch-3)' },
        { id: 'turing-jest', title: 'The Turing Jest', parent: 'part-orienting', branch: 2, color: 'var(--color-branch-3)'},
        { id: 'rhymes-of-israel', title: 'Rhymes of Israel', parent: 'ahuzat-dibuk', branch: 1, color: 'var(--color-branch-2)' },
        { id: 'portfolio', title: 'Portfolio v3.AI', parent: 'turing-jest', branch: 3, color: 'var(--color-branch-6)' },
        { id: 'contact', title: 'Contact & Socials', parent: ['rhymes-of-israel', 'portfolio'], branch: 0, color: 'var(--color-branch-7)', isMerge: true }
    ];

    /* --- UPCOMING & ANIMATIONS --- */
    const uptimeStartDate = new Date('2025-09-07T01:07:05');
    const uptimeCounter = document.getElementById('uptime-counter');

    function updateUptime() {
        const now = new Date();
        const diff = now - uptimeStartDate;

        const d = Math.floor(diff / (1000 * 60 * 60 * 24));
        const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const s = Math.floor((diff % (1000 * 60)) / 1000);

        uptimeCounter.textContent = `UPTIME: ${String(d).padStart(4, '0')}d ${String(h).padStart(2, '0')}h ${String(m).padStart(2, '0')}m ${String(s).padStart(2, '0')}s`;
    }
    setInterval(updateUptime, 1000);
    updateUptime();
    
    // Turing Jest typing animation
    const jestTarget = document.getElementById('turing-jest-output');
    const jestLines = [
        "Human pun: Why don't scientists trust atoms? Because they make up everything! (Rating: 8.2/10)",
        "AI pun: I told my computer I needed a break, and it sent me a Kit-Kat. (Rating: 7.9/10)"
    ];
    let jestLineIndex = 0;
    let jestCharIndex = 0;
    function typeJest() {
        if (jestLineIndex < jestLines.length) {
            if (jestCharIndex < jestLines[jestLineIndex].length) {
                jestTarget.innerHTML += jestLines[jestLineIndex].charAt(jestCharIndex);
                jestCharIndex++;
                setTimeout(typeJest, 30);
            } else {
                jestTarget.innerHTML += '\n'; // New line
                jestLineIndex++;
                jestCharIndex = 0;
                setTimeout(typeJest, 1000); // Pause between lines
            }
        } else {
            // Reset and loop
            jestLineIndex = 0;
            jestCharIndex = 0;
            jestTarget.innerHTML = '';
            setTimeout(typeJest, 1500);
        }
    }
    typeJest();
    
    // Rhymes animation
    const rhymeBefore = document.getElementById('rhyme-before');
    const rhymeAfter = document.getElementById('rhyme-after');
    setInterval(() => {
        rhymeBefore.style.opacity = '0';
        rhymeBefore.style.transform = 'translateY(-100%)';
        rhymeAfter.style.opacity = '1';
        rhymeAfter.style.transform = 'translateY(0%)';

        setTimeout(() => {
            rhymeBefore.style.opacity = '1';
            rhymeBefore.style.transform = 'translateY(0%)';
            rhymeAfter.style.opacity = '0';
            rhymeAfter.style.transform = 'translateY(100%)';
        }, 3000);
    }, 6000);

    /* --- GIT TIMELINE LOGIC --- */
    const svg = document.getElementById('git-svg');
    const tooltip = document.getElementById('tooltip');
    const headTag = document.getElementById('head-tag');
    const SVG_NS = "http://www.w3.org/2000/svg";

    const commitNodeData = new Map();
    let leftColumnWidth = 0;
    const branchOffsets = [-30, -55, 30, 55]; // X-offsets for branches
    const commitRadius = 5;

    function generateCommitHash() {
        return Math.random().toString(16).substring(2, 9);
    }

    function createSVGElement(tag, attributes) {
        const el = document.createElementNS(SVG_NS, tag);
        for (const key in attributes) {
            el.setAttribute(key, attributes[key]);
        }
        return el;
    }

    function drawTimeline() {
        svg.innerHTML = ''; // Clear previous render
        commitNodeData.clear();
        
        const mainContent = document.querySelector('.right-column');
        svg.setAttribute('width', '100%');
        svg.setAttribute('height', mainContent.offsetHeight);
        leftColumnWidth = svg.getBoundingClientRect().width;
        
        const centerX = leftColumnWidth / 2;

        // 1. Calculate node positions
        projects.forEach(p => {
            const section = document.getElementById(p.id);
            if (section) {
                const y = section.offsetTop + section.offsetHeight / 2;
                const branchIndex = p.branch - 1;
                const x = p.branch === 0 ? centerX : centerX + branchOffsets[branchIndex];
                
                commitNodeData.set(p.id, {
                    ...p,
                    x,
                    y,
                    hash: generateCommitHash(),
                });
            }
        });

        // 2. Draw branches
        commitNodeData.forEach(node => {
            if (node.isMerge) {
                 node.parent.forEach(pId => {
                    const parentNode = commitNodeData.get(pId);
                    if (parentNode) drawBranch(parentNode, node, parentNode.color);
                 });
            } else if (node.parent) {
                const parentNode = commitNodeData.get(node.parent);
                if (parentNode) drawBranch(parentNode, node, node.color);
            }
        });
        
        // 3. Draw nodes & text
        commitNodeData.forEach(node => {
            drawCommitNode(node);
        });
        
        // Position HEAD tag
        const firstNode = commitNodeData.get(projects[0].id);
        if (firstNode) {
            headTag.style.top = `${firstNode.y - (commitRadius * 2)}px`;
            headTag.style.left = `${firstNode.x + commitRadius + 25}px`;
            headTag.style.opacity = '1';
        }
    }

    function drawBranch(startNode, endNode, color) {
        const pathData = `M ${startNode.x} ${startNode.y} C ${startNode.x} ${startNode.y + 70}, ${endNode.x} ${endNode.y - 70}, ${endNode.x} ${endNode.y}`;
        const path = createSVGElement('path', {
            'd': pathData,
            'stroke': color,
            'class': 'git-branch',
        });
        svg.prepend(path); // Prepend to draw under nodes
    }
    
    function drawCommitNode(node) {
        const group = createSVGElement('g', {
            'class': 'commit-node-group',
            'data-id': node.id,
            'data-color': node.color.replace('var(', '').replace(')', '')
        });
        
        const nodeCircle = createSVGElement('circle', {
            'cx': node.x, 'cy': node.y, 'r': commitRadius,
            'stroke': node.color,
            'class': 'commit-node'
        });

        const hashText = createSVGElement('text', {
            'x': node.x + commitRadius + 8, 'y': node.y + (commitRadius/2),
            'class': 'commit-hash'
        });
        hashText.textContent = node.hash;
        
        const hitBox = createSVGElement('circle', {
            'cx': node.x, 'cy': node.y, 'r': commitRadius * 3,
            'class': 'commit-node-hitbox'
        });

        group.appendChild(nodeCircle);
        group.appendChild(hashText);
        group.appendChild(hitBox);
        svg.appendChild(group);

        // Event listeners for tooltips
        group.addEventListener('mouseenter', () => {
            tooltip.textContent = node.title;
            tooltip.style.opacity = '1';
        });
        group.addEventListener('mousemove', (e) => {
            tooltip.style.left = `${e.clientX + 15}px`;
            tooltip.style.top = `${e.clientY + 15}px`;
        });
        group.addEventListener('mouseleave', () => {
            tooltip.style.opacity = '0';
        });
        group.addEventListener('click', () => {
             document.getElementById(node.id).scrollIntoView({ behavior: 'smooth' });
        });
    }

    /* --- SCROLL INTERSECTION OBSERVER --- */
    const panels = document.querySelectorAll('.content-panel');
    const footer = document.getElementById('page-footer');

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            const id = entry.target.getAttribute('id');
            const nodeGroup = svg.querySelector(`.commit-node-group[data-id="${id}"]`);
            
            if (entry.isIntersecting) {
                entry.target.classList.add('is-visible');
                
                // Deactivate all others, activate current
                svg.querySelectorAll('.commit-node-group.active').forEach(n => n.classList.remove('active'));
                if (nodeGroup) {
                    nodeGroup.classList.add('active');
                }
            } else {
                 entry.target.classList.remove('is-visible');
            }
        });
    }, { rootMargin: '-50% 0px -50% 0px' }); // Activates when panel is in the middle of the viewport

    panels.forEach(panel => observer.observe(panel));

    // Footer observer
    const footerObserver = new IntersectionObserver((entries) => {
        if(entries[0].isIntersecting) {
            footer.classList.add('show');
        } else {
            footer.classList.remove('show');
        }
    }, { threshold: 0.1 });
    
    // Observe the last content panel for footer visibility
    const lastPanel = document.getElementById('contact');
    if (lastPanel) {
        footerObserver.observe(lastPanel);
    }
    
    /* --- INITIALIZATION & RESIZE --- */
    // Initial draw and redraw on resize
    drawTimeline();
    window.addEventListener('resize', drawTimeline);

});
</script>
<!-- Add this block to embed the like button -->
    <script src="/static/js/like_button.js"></script>
    <script>
        LikeButton.init({
          pageId: "20250907",
          position: "bottom-right", // Options: bottom-right, bottom-left, top-right, top-left
        });
    </script>

</body>
</html>