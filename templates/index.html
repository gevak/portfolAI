<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geva Kipper ‚Äî Escape Room Portfolio</title>
<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&family=Playfair+Display:wght@700;900&family=Caveat:wght@400;700&family=Special+Elite&family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --charcoal: #1a1a1a;
  --gold: #d4a843;
  --teal: #2a9d8f;
  --warm-white: #f5e6c8;
  --drawer-bg: #2a2a2a;
  --steel-light: #8a8a8a;
  --steel-dark: #3a3a3a;
}

html { scroll-behavior: smooth; }

body {
  background: var(--charcoal);
  color: #ccc;
  font-family: 'Inter', sans-serif;
  overflow-x: hidden;
  cursor: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'><text y='24' font-size='24'>üîë</text></svg>") 4 4, auto;
  min-height: 100vh;
  position: relative;
}

/* Concrete texture overlay */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: 
    repeating-conic-gradient(#1a1a1a33 0% 25%, transparent 0% 50%) 0 0 / 4px 4px,
    radial-gradient(ellipse at 30% 50%, #1e1e1e, #141414);
  pointer-events: none;
  z-index: 0;
}

/* Fog animation */
.fog {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  opacity: 0.15;
}

.fog::before, .fog::after {
  content: '';
  position: absolute;
  width: 200%;
  height: 200%;
  background: radial-gradient(ellipse at center, rgba(255,255,255,0.08) 0%, transparent 60%);
}

.fog::before {
  animation: fogDrift1 20s ease-in-out infinite;
  top: -50%;
  left: -50%;
}

.fog::after {
  animation: fogDrift2 25s ease-in-out infinite reverse;
  top: -30%;
  left: -30%;
}

@keyframes fogDrift1 {
  0%, 100% { transform: translate(0, 0); }
  50% { transform: translate(10%, 5%); }
}

@keyframes fogDrift2 {
  0%, 100% { transform: translate(0, 0); }
  50% { transform: translate(-8%, 8%); }
}

/* Flashlight effect */
.flashlight-overlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
  pointer-events: none;
  background: radial-gradient(circle 120px at var(--mx, 50%) var(--my, 50%), transparent 0%, rgba(0,0,0,0.97) 100%);
  transition: opacity 0.5s;
}

.flashlight-overlay.lights-on {
  opacity: 0;
}

/* Flicker animation */
.page-content {
  opacity: 0;
  position: relative;
  z-index: 2;
}

.page-content.flickering {
  animation: flicker 0.6s steps(2) 3;
}

.page-content.revealed {
  opacity: 1;
}

@keyframes flicker {
  0% { opacity: 0; }
  10% { opacity: 0.8; }
  20% { opacity: 0.1; }
  30% { opacity: 0.9; }
  40% { opacity: 0; }
  50% { opacity: 0.7; }
  60% { opacity: 0.2; }
  70% { opacity: 1; }
  80% { opacity: 0.1; }
  90% { opacity: 0.8; }
  100% { opacity: 1; }
}

/* Dust particles */
.dust-container {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 3;
  overflow: hidden;
}

.dust {
  position: absolute;
  width: 2px;
  height: 2px;
  background: rgba(212, 168, 67, 0.3);
  border-radius: 50%;
  animation: dustFloat linear infinite;
}

@keyframes dustFloat {
  0% { transform: translateY(100vh) translateX(0); opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { transform: translateY(-10vh) translateX(30px); opacity: 0; }
}

/* Container */
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 40px 20px;
}

/* Header */
.header {
  text-align: center;
  margin-bottom: 60px;
}

.header h1 {
  font-family: 'Playfair Display', serif;
  font-size: clamp(2.5rem, 6vw, 4.5rem);
  font-weight: 900;
  color: var(--gold);
  text-shadow: 
    0 0 20px rgba(212, 168, 67, 0.4),
    0 0 40px rgba(212, 168, 67, 0.2),
    0 2px 4px rgba(0,0,0,0.8);
  letter-spacing: 3px;
  margin-bottom: 30px;
}

/* Manila folder label */
.manila-label {
  display: inline-block;
  background: #f0e6d0;
  color: #333;
  font-family: 'Special Elite', monospace;
  font-size: clamp(0.85rem, 2vw, 1.05rem);
  padding: 12px 30px;
  position: relative;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  margin-bottom: 30px;
}

.manila-label::before, .manila-label::after {
  content: '';
  position: absolute;
  width: 40px;
  height: 18px;
  background: rgba(200, 180, 140, 0.4);
  border: 1px solid rgba(180, 160, 120, 0.3);
  top: -6px;
}

.manila-label::before { left: -8px; transform: rotate(-5deg); }
.manila-label::after { right: -8px; transform: rotate(3deg); }

/* Pinned note */
.pinned-note {
  display: inline-block;
  background: #faf3e0;
  color: #555;
  font-family: 'Caveat', cursive;
  font-size: clamp(1rem, 2.5vw, 1.3rem);
  padding: 20px 25px;
  position: relative;
  transform: rotate(-1.5deg);
  box-shadow: 3px 4px 12px rgba(0,0,0,0.4);
  animation: sway 4s ease-in-out infinite;
  max-width: 400px;
  line-height: 1.4;
}

.pinned-note::before {
  content: '';
  position: absolute;
  top: -8px;
  left: 50%;
  transform: translateX(-50%);
  width: 14px;
  height: 14px;
  background: radial-gradient(circle at 40% 35%, #e74c3c, #991f1f);
  border-radius: 50%;
  box-shadow: 0 2px 4px rgba(0,0,0,0.5);
  z-index: 1;
}

.pinned-note::after {
  content: '';
  position: absolute;
  top: 5px;
  left: 50%;
  transform: translateX(-50%);
  width: 2px;
  height: 0;
  background: #666;
}

@keyframes sway {
  0%, 100% { transform: rotate(-1.5deg); }
  50% { transform: rotate(1.5deg); }
}

/* Clue Board */
.clue-board {
  background: linear-gradient(135deg, #8B6914, #A0783C, #8B6914);
  border: 3px solid #6B4F12;
  border-radius: 4px;
  padding: 20px;
  margin-bottom: 40px;
  display: flex;
  gap: 15px;
  overflow-x: auto;
  position: relative;
  box-shadow: inset 0 0 30px rgba(0,0,0,0.3), 0 4px 15px rgba(0,0,0,0.5);
}

.clue-board::before {
  content: 'üîç CLUE BOARD';
  position: absolute;
  top: -12px;
  left: 20px;
  background: var(--charcoal);
  color: var(--gold);
  font-family: 'Fira Code', monospace;
  font-size: 0.75rem;
  padding: 2px 10px;
  border: 1px solid var(--gold);
  letter-spacing: 2px;
}

.clue-card {
  min-width: 180px;
  max-width: 200px;
  background: #faf3e0;
  color: #333;
  font-family: 'Caveat', cursive;
  font-size: 0.95rem;
  padding: 15px 12px;
  position: relative;
  transform: rotate(var(--rot, 0deg));
  box-shadow: 2px 3px 8px rgba(0,0,0,0.3);
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  flex-shrink: 0;
  line-height: 1.3;
}

.clue-card:hover {
  transform: rotate(0deg) scale(1.05);
  box-shadow: 2px 3px 15px rgba(0,0,0,0.5);
  z-index: 5;
}

.clue-card::before {
  content: '';
  position: absolute;
  top: -6px;
  left: 50%;
  transform: translateX(-50%);
  width: 10px;
  height: 10px;
  background: radial-gradient(circle at 40% 35%, #e74c3c, #991f1f);
  border-radius: 50%;
  box-shadow: 0 1px 3px rgba(0,0,0,0.4);
}

.clue-card .lock-icon {
  display: block;
  text-align: right;
  font-size: 1.2rem;
  margin-top: 8px;
}

.clue-card .roman {
  font-family: 'Playfair Display', serif;
  font-weight: 700;
  color: var(--gold);
  background: rgba(0,0,0,0.05);
  display: inline-block;
  padding: 0 4px;
  margin-bottom: 4px;
  font-size: 0.85rem;
}

/* Unlock All Lever */
.lever-container {
  text-align: center;
  margin-bottom: 40px;
}

.unlock-lever {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  background: none;
  border: none;
  color: var(--gold);
  font-family: 'Fira Code', monospace;
  font-size: 0.8rem;
  letter-spacing: 2px;
  position: relative;
  padding: 0;
}

.lever-track {
  width: 12px;
  height: 80px;
  background: linear-gradient(90deg, #555, #888, #555);
  border-radius: 6px;
  position: relative;
  margin: 10px 0;
  box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
}

.lever-handle {
  width: 30px;
  height: 30px;
  background: radial-gradient(circle at 40% 35%, #c9a23c, #8B6914);
  border-radius: 50%;
  position: absolute;
  left: 50%;
  top: 5px;
  transform: translateX(-50%);
  box-shadow: 0 2px 8px rgba(0,0,0,0.5), inset 0 1px 2px rgba(255,255,255,0.3);
  transition: top 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.lever-handle.pulled {
  top: 45px;
}

.unlock-lever:hover .lever-handle {
  background: radial-gradient(circle at 40% 35%, #e0b84a, #a07820);
}

/* Puzzle Grid */
.puzzle-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 25px;
  margin-bottom: 40px;
  perspective: 1200px;
}

@keyframes gridShake {
  0%, 100% { transform: translateX(0); }
  10% { transform: translateX(-3px) rotate(-0.5deg); }
  20% { transform: translateX(3px) rotate(0.5deg); }
  30% { transform: translateX(-2px); }
  40% { transform: translateX(2px); }
  50% { transform: translateX(-1px); }
}

.puzzle-grid.shaking {
  animation: gridShake 0.5s ease;
}

/* Compartment */
.compartment {
  position: relative;
  min-height: 320px;
  perspective: 800px;
}

.vault-door {
  position: absolute;
  inset: 0;
  background: linear-gradient(145deg, #3a3a3a, #2a2a2a, #333);
  border: 2px solid;
  border-image: linear-gradient(145deg, #888, #444, #666, #444) 1;
  z-index: 4;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  transform-origin: left center;
  transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
  backface-visibility: hidden;
}

.compartment.open .vault-door {
  transform: rotateY(-120deg);
  pointer-events: none;
}

/* Rivets */
.vault-door::before {
  content: '';
  position: absolute;
  inset: 8px;
  background:
    radial-gradient(circle 4px at 12px 12px, #777 30%, #555 50%, transparent 51%),
    radial-gradient(circle 4px at calc(100% - 12px) 12px, #777 30%, #555 50%, transparent 51%),
    radial-gradient(circle 4px at 12px calc(100% - 12px), #777 30%, #555 50%, transparent 51%),
    radial-gradient(circle 4px at calc(100% - 12px) calc(100% - 12px), #777 30%, #555 50%, transparent 51%);
  background-size: 100% 100%;
  pointer-events: none;
}

.vault-roman {
  font-family: 'Playfair Display', serif;
  font-size: 1.8rem;
  color: var(--gold);
  text-shadow: 0 1px 3px rgba(0,0,0,0.8);
  margin-bottom: 15px;
  letter-spacing: 3px;
}

.lock-display {
  font-size: 2.5rem;
  filter: drop-shadow(0 0 5px rgba(212,168,67,0.3));
  transition: transform 0.3s;
}

.vault-door:hover .lock-display {
  transform: scale(1.1) rotate(-10deg);
}

.vault-door:hover {
  border-image: linear-gradient(145deg, #aaa, #666, #888, #666) 1;
}

/* Compartment interior */
.compartment-interior {
  position: absolute;
  inset: 0;
  background: var(--drawer-bg);
  border: 1px solid #3a3a3a;
  padding: 20px;
  overflow-y: auto;
  z-index: 1;
  opacity: 0;
  transition: opacity 0.5s 0.3s;
}

.compartment-interior::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 60%;
  background: radial-gradient(ellipse at top center, rgba(212,168,67,0.08) 0%, transparent 70%);
  pointer-events: none;
}

.compartment.open .compartment-interior {
  opacity: 1;
}

/* Light burst on open */
@keyframes lightBurst {
  0% { opacity: 0.8; transform: scale(0.5); }
  100% { opacity: 0; transform: scale(2); }
}

.compartment.open .compartment-interior::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100px;
  height: 100px;
  background: radial-gradient(circle, rgba(212,168,67,0.4), transparent 70%);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  animation: lightBurst 0.6s ease-out forwards;
  pointer-events: none;
}

.project-title {
  font-family: 'Playfair Display', serif;
  color: var(--gold);
  font-size: 1.3rem;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 8px;
  position: relative;
  z-index: 1;
}

.project-title .icon {
  font-size: 1.1rem;
}

.project-desc {
  font-family: 'Fira Code', monospace;
  font-size: 0.78rem;
  line-height: 1.6;
  color: #bbb;
  margin-bottom: 15px;
  position: relative;
  z-index: 1;
}

/* Typewriter animation */
.typewriter {
  overflow: hidden;
  white-space: normal;
}

.typewriter.animate span {
  opacity: 0;
  animation: typeIn 0.03s forwards;
}

@keyframes typeIn {
  to { opacity: 1; }
}

/* Link styles */
.wax-envelope {
  display: inline-block;
  background: linear-gradient(145deg, #8B4513, #A0522D);
  color: var(--warm-white);
  font-family: 'Playfair Display', serif;
  padding: 8px 20px;
  border-radius: 2px;
  text-decoration: none;
  position: relative;
  box-shadow: 0 2px 8px rgba(0,0,0,0.4);
  font-size: 0.85rem;
  transition: transform 0.2s, box-shadow 0.2s;
  z-index: 1;
}

.wax-envelope::after {
  content: '‚¨§';
  position: absolute;
  top: -8px;
  left: 50%;
  transform: translateX(-50%);
  color: #8B0000;
  font-size: 16px;
  text-shadow: 0 0 3px rgba(139,0,0,0.5);
}

.wax-envelope:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.6);
}

/* YouTube thumbnail */
.yt-thumb {
  position: relative;
  width: 100%;
  max-width: 200px;
  aspect-ratio: 16/9;
  background: #111;
  border: 1px solid #444;
  cursor: pointer;
  overflow: hidden;
  z-index: 1;
  margin-top: 10px;
}

.yt-thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.yt-thumb .play-btn {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.4);
  transition: background 0.2s;
}

.yt-thumb .play-btn::after {
  content: '‚ñ∂';
  font-size: 2rem;
  color: white;
  text-shadow: 0 0 10px rgba(0,0,0,0.8);
}

.yt-thumb:hover .play-btn {
  background: rgba(0,0,0,0.2);
}

/* VHS lines */
.yt-thumb::before {
  content: '';
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(255,255,255,0.03) 2px,
    rgba(255,255,255,0.03) 4px
  );
  z-index: 2;
  pointer-events: none;
  animation: vhsScroll 3s linear infinite;
}

@keyframes vhsScroll {
  0% { transform: translateY(0); }
  100% { transform: translateY(4px); }
}

.yt-expanded {
  width: 100%;
  aspect-ratio: 16/9;
  border: 1px solid #444;
  z-index: 1;
  position: relative;
  margin-top: 10px;
}

.yt-expanded iframe {
  width: 100%;
  height: 100%;
  border: none;
}

/* Newspaper clippings */
.news-clips {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  z-index: 1;
  position: relative;
}

.news-clip {
  background: #f5f0e0;
  color: #333;
  font-family: 'Playfair Display', serif;
  font-size: 0.75rem;
  padding: 12px 10px 10px;
  text-decoration: none;
  border: 1px solid #ccc;
  flex: 1;
  min-width: 100px;
  transform: rotate(var(--rot, 0deg));
  transition: transform 0.2s;
  position: relative;
}

.news-clip:hover {
  transform: rotate(0deg) scale(1.05);
  z-index: 2;
}

.news-clip .masthead {
  font-size: 0.6rem;
  font-weight: 700;
  color: #888;
  text-transform: uppercase;
  letter-spacing: 1px;
  border-bottom: 1px solid #ddd;
  padding-bottom: 4px;
  margin-bottom: 6px;
}

/* Heatmap decoration */
.heatmap-deco {
  display: inline-grid;
  grid-template-columns: repeat(5, 8px);
  gap: 2px;
  vertical-align: middle;
  margin-left: 8px;
}

.heatmap-deco span {
  width: 8px;
  height: 8px;
  border-radius: 1px;
}

/* Blueprint button */
.blueprint-btn {
  display: inline-block;
  background: #0a1628;
  color: #8ec8e8;
  font-family: 'Fira Code', monospace;
  font-size: 0.78rem;
  padding: 8px 18px;
  border: 1px solid #3a6fa0;
  text-decoration: none;
  position: relative;
  z-index: 1;
  transition: all 0.2s;
}

.blueprint-btn::before {
  content: '';
  position: absolute;
  inset: -4px;
  border: 1px dashed #3a6fa066;
  pointer-events: none;
}

.blueprint-btn:hover {
  background: #12233f;
  box-shadow: 0 0 10px rgba(62,143,200,0.2);
}

/* Comedy ticket */
.comedy-ticket {
  display: inline-block;
  background: linear-gradient(135deg, var(--gold), #b8922e);
  color: var(--charcoal);
  font-family: 'Playfair Display', serif;
  font-weight: 700;
  font-size: 0.85rem;
  padding: 12px 25px;
  text-decoration: none;
  position: relative;
  border-top: 2px dashed var(--charcoal);
  border-bottom: 2px dashed var(--charcoal);
  z-index: 1;
  transition: transform 0.2s;
}

.comedy-ticket::before {
  content: 'ADMIT ONE';
  position: absolute;
  top: -8px;
  right: 5px;
  font-size: 0.5rem;
  letter-spacing: 2px;
  color: var(--charcoal);
  opacity: 0.6;
}

.comedy-ticket:hover {
  transform: scale(1.05);
}

/* Chrome extension badge */
.chrome-badge {
  display: inline-block;
  background: linear-gradient(135deg, #4285f4, #34a853);
  color: white;
  font-family: 'Inter', sans-serif;
  font-weight: 600;
  font-size: 0.8rem;
  padding: 10px 20px;
  border-radius: 20px;
  text-decoration: none;
  z-index: 1;
  position: relative;
  transition: transform 0.2s, box-shadow 0.2s;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

.chrome-badge:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(66,133,244,0.4);
}

/* Mirror frame for portfolio */
.mirror-link {
  display: inline-block;
  padding: 12px 25px;
  border: 3px solid;
  border-image: linear-gradient(135deg, var(--gold), #8B6914, var(--gold), #8B6914) 1;
  color: var(--gold);
  text-decoration: none;
  font-family: 'Playfair Display', serif;
  font-size: 0.9rem;
  position: relative;
  z-index: 1;
  transition: all 0.2s;
}

.mirror-link:hover {
  background: rgba(212,168,67,0.1);
  text-shadow: 0 0 10px rgba(212,168,67,0.5);
}

/* Mini page recursion */
.mini-page {
  width: 80px;
  height: 60px;
  background: #1a1a1a;
  border: 1px solid #555;
  position: relative;
  display: inline-block;
  margin-bottom: 10px;
  z-index: 1;
}

.mini-page .mini-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 2px;
  padding: 12px 4px 4px;
}

.mini-page .mini-box {
  width: 100%;
  aspect-ratio: 1;
  background: #333;
  border: 1px solid #555;
}

.mini-page .mini-header {
  width: 60%;
  height: 3px;
  background: var(--gold);
  margin: 3px auto 0;
  border-radius: 1px;
}

.magnifier {
  position: absolute;
  right: -10px;
  top: -10px;
  font-size: 1.3rem;
  z-index: 1;
}

/* SVG animation for compartment III */
.polygon-demo {
  width: 120px;
  height: 40px;
  position: relative;
  z-index: 1;
  margin-bottom: 10px;
}

.polygon-demo svg {
  width: 100%;
  height: 100%;
}

/* Emoji duel for compartment IV */
.emoji-duel {
  font-size: 1.5rem;
  display: inline-flex;
  gap: 5px;
  align-items: center;
  z-index: 1;
}

.emoji-duel .vs {
  font-size: 0.7rem;
  color: var(--gold);
  font-family: 'Fira Code', monospace;
}

/* Rhyme animation */
.rhyme-word {
  display: inline-block;
  color: var(--teal);
  transition: all 0.3s;
}

.rhyme-word.bounce {
  animation: rhymeBounce 0.4s ease;
}

@keyframes rhymeBounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

/* Exit door section */
.exit-section {
  margin-bottom: 40px;
}

.exit-door-container {
  position: relative;
  max-width: 600px;
  margin: 0 auto;
}

.exit-sign {
  text-align: center;
  margin-bottom: 15px;
}

.exit-sign span {
  display: inline-block;
  background: #1a4a1a;
  color: #4ade4a;
  font-family: 'Fira Code', monospace;
  font-weight: 700;
  font-size: 1.2rem;
  padding: 8px 30px;
  letter-spacing: 5px;
  box-shadow: 0 0 15px rgba(74,222,74,0.3), 0 0 30px rgba(74,222,74,0.1);
  animation: exitPulse 2s ease-in-out infinite;
}

@keyframes exitPulse {
  0%, 100% { box-shadow: 0 0 15px rgba(74,222,74,0.3), 0 0 30px rgba(74,222,74,0.1); }
  50% { box-shadow: 0 0 25px rgba(74,222,74,0.5), 0 0 50px rgba(74,222,74,0.2); }
}

.exit-door {
  background: linear-gradient(145deg, #3a3a3a, #2a2a2a);
  border: 2px solid;
  border-image: linear-gradient(145deg, #888, #444, #666) 1;
  padding: 30px;
  display: flex;
  justify-content: center;
  gap: 40px;
  flex-wrap: wrap;
  position: relative;
}

.exit-door::before, .exit-door::after {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  width: 2px;
  background: #555;
}

.exit-door::before { left: 50%; }

/* Key links */
.key-link {
  text-decoration: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  color: #aaa;
  transition: all 0.3s;
  animation: keySwing 3s ease-in-out infinite;
  transform-origin: top center;
}

.key-link:nth-child(2) { animation-delay: -1s; }
.key-link:nth-child(3) { animation-delay: -2s; }

@keyframes keySwing {
  0%, 100% { transform: rotate(-3deg); }
  50% { transform: rotate(3deg); }
}

.key-link:hover {
  color: var(--gold);
  filter: drop-shadow(0 0 8px rgba(212,168,67,0.4));
}

.key-link:hover .key-bow {
  animation: keyTurn 0.5s ease;
}

@keyframes keyTurn {
  0% { transform: rotate(0); }
  50% { transform: rotate(45deg); }
  100% { transform: rotate(0); }
}

.key-hook {
  width: 6px;
  height: 15px;
  border: 2px solid #666;
  border-bottom: none;
  border-radius: 3px 3px 0 0;
  margin-bottom: -2px;
}

.key-bow {
  width: 50px;
  height: 50px;
  border: 3px solid currentColor;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.4rem;
  background: rgba(30,30,30,0.8);
  transition: transform 0.3s;
}

.key-shaft {
  width: 4px;
  height: 25px;
  background: currentColor;
  position: relative;
}

.key-shaft::after {
  content: '';
  position: absolute;
  bottom: 0;
  right: 0;
  width: 10px;
  height: 4px;
  background: currentColor;
}

.key-label {
  margin-top: 8px;
  font-family: 'Fira Code', monospace;
  font-size: 0.7rem;
  letter-spacing: 1px;
}

/* Footer */
.footer-plaque {
  background: linear-gradient(145deg, #2a2a2a, #222, #2a2a2a);
  border: 2px solid #555;
  padding: 30px;
  text-align: center;
  position: relative;
  margin-top: 40px;
}

/* Bolt corners */
.footer-plaque .bolt {
  position: absolute;
  width: 12px;
  height: 12px;
  background: radial-gradient(circle at 40% 35%, #888, #444);
  border-radius: 50%;
  box-shadow: inset 0 1px 2px rgba(255,255,255,0.2), 0 1px 3px rgba(0,0,0,0.5);
}

.footer-plaque .bolt::after {
  content: '+';
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 8px;
  color: #666;
  font-weight: bold;
}

.footer-plaque .bolt:nth-child(1) { top: 8px; left: 8px; }
.footer-plaque .bolt:nth-child(2) { top: 8px; right: 8px; }
.footer-plaque .bolt:nth-child(3) { bottom: 8px; left: 8px; }
.footer-plaque .bolt:nth-child(4) { bottom: 8px; right: 8px; }

.footer-text {
  font-family: 'Playfair Display', serif;
  font-size: 0.9rem;
  color: #777;
  text-shadow: 0 1px 0 rgba(0,0,0,0.8), 0 -1px 0 rgba(255,255,255,0.05);
  margin-bottom: 20px;
}

.stopwatch-label {
  font-family: 'Caveat', cursive;
  color: #888;
  font-size: 1rem;
  margin-bottom: 10px;
}

/* Flip clock */
.flip-clock {
  display: flex;
  justify-content: center;
  gap: 4px;
  align-items: center;
  flex-wrap: wrap;
}

.flip-clock .separator {
  font-family: 'Fira Code', monospace;
  font-size: 1.5rem;
  color: var(--gold);
  padding: 0 2px;
}

.flip-group {
  display: flex;
  gap: 2px;
  align-items: center;
}

.flip-group .label {
  font-family: 'Fira Code', monospace;
  font-size: 0.55rem;
  color: #666;
  margin-left: 4px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.flip-digit {
  width: 30px;
  height: 48px;
  position: relative;
  background: #111;
  border-radius: 3px;
  overflow: hidden;
  box-shadow: 0 2px 5px rgba(0,0,0,0.5);
}

.flip-digit .top, .flip-digit .bottom {
  position: absolute;
  width: 100%;
  height: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Fira Code', monospace;
  font-size: 1.4rem;
  font-weight: 700;
  color: var(--gold);
  overflow: hidden;
}

.flip-digit .top {
  top: 0;
  background: #1a1a1a;
  border-bottom: 1px solid #333;
}

.flip-digit .bottom {
  bottom: 0;
  background: #151515;
}

.flip-digit .top span {
  transform: translateY(25%);
}

.flip-digit .bottom span {
  transform: translateY(-25%);
}

/* Responsive */
@media (max-width: 768px) {
  .puzzle-grid {
    grid-template-columns: 1fr;
  }

  .compartment.open .vault-door {
    transform: translateY(-100%);
  }

  .vault-door {
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .exit-door {
    flex-direction: column;
    align-items: center;
  }

  .clue-board {
    padding-top: 25px;
  }

  .flip-digit {
    width: 24px;
    height: 38px;
  }

  .flip-digit .top, .flip-digit .bottom {
    font-size: 1.1rem;
  }
}

/* Mobile pulsing light instead of flashlight */
@media (hover: none) {
  .flashlight-overlay {
    background: rgba(0,0,0,0.95) !important;
    animation: mobileBrighten 3s ease-out forwards !important;
  }

  @keyframes mobileBrighten {
    0% { opacity: 1; }
    100% { opacity: 0; }
  }
}

/* Links content layout */
.links-row {
  display: flex;
  gap: 10px;
  align-items: flex-start;
  flex-wrap: wrap;
  position: relative;
  z-index: 1;
}

/* Yearbook quote style */
.yearbook-quote {
  position: relative;
  z-index: 1;
  padding: 10px 20px;
  font-style: italic;
}

.yearbook-quote::before {
  content: '"';
  font-family: 'Playfair Display', serif;
  font-size: 3rem;
  color: var(--gold);
  opacity: 0.3;
  position: absolute;
  left: 0;
  top: -10px;
}

.yearbook-quote::after {
  content: '"';
  font-family: 'Playfair Display', serif;
  font-size: 3rem;
  color: var(--gold);
  opacity: 0.3;
}
</style>
</head>
<body>

<div class="flashlight-overlay" id="flashlightOverlay"></div>
<div class="fog"></div>
<div class="dust-container" id="dustContainer"></div>

<div class="page-content" id="pageContent">
  <div class="container">

    <!-- Header -->
    <header class="header">
      <h1>Geva Kipper</h1>
      <div class="manila-label">Software Engineer at Google</div>
      <br><br>
      <div class="pinned-note">
        ‚ú® This portfolio is redesigned daily by AI ‚Äî every visit is a unique experience.
      </div>
    </header>

    <!-- Clue Board -->
    <div class="clue-board">
      <div class="clue-card" style="--rot: -2deg" data-target="0">
        <span class="roman">I</span>
        Compression reveals what the ear already knows ‚Äî how many times did they sing that chorus?
        <span class="lock-icon">üîí</span>
      </div>
      <div class="clue-card" style="--rot: 1.5deg" data-target="1">
        <span class="roman">II</span>
        In a city that never sleeps, where do the cars rest? Scrape the surface to find warmth in the data.
        <span class="lock-icon">üîí</span>
      </div>
      <div class="clue-card" style="--rot: -1deg" data-target="2">
        <span class="roman">III</span>
        Push the shape until it falls into place ‚Äî geometry knows the way.
        <span class="lock-icon">üîí</span>
      </div>
      <div class="clue-card" style="--rot: 2deg" data-target="3">
        <span class="roman">IV</span>
        When machines tell jokes, who decides what's funny?
        <span class="lock-icon">üîí</span>
      </div>
      <div class="clue-card" style="--rot: -1.5deg" data-target="4">
        <span class="roman">V</span>
        Headlines rewritten by a digital poet ‚Äî install the muse.
        <span class="lock-icon">üîí</span>
      </div>
      <div class="clue-card" style="--rot: 1deg" data-target="5">
        <span class="roman">VI</span>
        The room you're standing in is also an exhibit.
        <span class="lock-icon">üîí</span>
      </div>
    </div>

    <!-- Unlock All Lever -->
    <div class="lever-container">
      <button class="unlock-lever" id="unlockAll" title="Unlock All Compartments">
        <span style="font-size:0.7rem">‚¨Ü PULL ‚¨á</span>
        <div class="lever-track">
          <div class="lever-handle" id="leverHandle"></div>
        </div>
        <span>UNLOCK ALL</span>
      </button>
    </div>

    <!-- Puzzle Grid -->
    <div class="puzzle-grid" id="puzzleGrid">

      <!-- Compartment I: GlglStats -->
      <div class="compartment" id="comp0">
        <div class="compartment-interior">
          <div class="project-title"><span class="icon">üêç</span> GlglStats</div>
          <div class="project-desc typewriter" data-text="An analytics tool for Israeli radio that uses audio compression to detect and count song repetitions. Presented at PyData 2024. Built with Python, it answers the question: how often does the radio really play your favorite song?">
          </div>
          <div class="links-row">
            <a href="https://glglstats.geekip.dev" target="_blank" class="wax-envelope">Visit GlglStats</a>
          </div>
          <div class="yt-thumb" id="ytThumb">
            <img src="https://img.youtube.com/vi/jrKAtOsj1Lo/mqdefault.jpg" alt="PyData Talk" loading="lazy">
            <div class="play-btn"></div>
          </div>
        </div>
        <div class="vault-door" onclick="openCompartment(0)">
          <div class="vault-roman">I</div>
          <div class="lock-display">üîê</div>
        </div>
      </div>

      <!-- Compartment II: Ahuzat Dibuk -->
      <div class="compartment" id="comp1">
        <div class="compartment-interior">
          <div class="project-title">
            <span class="icon">üÖøÔ∏è</span> Ahuzat Dibuk
            <span class="heatmap-deco" id="heatmapDeco"></span>
          </div>
          <div class="project-desc typewriter" data-text="A data-driven investigation into Tel Aviv's parking violations using web scraping and heatmap visualization. The findings were picked up by Israeli media, revealing patterns in the city's parking enforcement.">
          </div>
          <div class="news-clips">
            <a href="https://13tv.co.il/item/news/domestic/internal/parking-902956407/" target="_blank" class="news-clip" style="--rot: -1.5deg">
              <div class="masthead">Channel 13</div>
              Parking violations exposed through data analysis
            </a>
            <a href="https://www.mako.co.il/nexter-news/Article-ae43964b891bf71027.htm" target="_blank" class="news-clip" style="--rot: 1deg">
              <div class="masthead">Mako</div>
              Tel Aviv parking: the data tells the story
            </a>
            <a href="https://www.facebook.com/groups/secrettelaviv/posts/10159636301195943" target="_blank" class="news-clip" style="--rot: -0.5deg">
              <div class="masthead">Facebook</div>
              Original publication post
            </a>
          </div>
        </div>
        <div class="vault-door" onclick="openCompartment(1)">
          <div class="vault-roman">II</div>
          <div class="lock-display">üîê</div>
        </div>
      </div>

      <!-- Compartment III: 2D Part Orienting -->
      <div class="compartment" id="comp2">
        <div class="compartment-interior">
          <div class="project-title"><span class="icon">üìê</span> 2D Part Orienting</div>
          <div class="polygon-demo">
            <svg viewBox="0 0 120 40">
              <line x1="0" y1="35" x2="120" y2="35" stroke="#3a6fa0" stroke-width="1" stroke-dasharray="3,3"/>
              <polygon id="animPoly" points="20,10 35,5 40,20 30,25 15,20" fill="none" stroke="#8ec8e8" stroke-width="1.5">
                <animateTransform attributeName="transform" type="translate" values="0,0;40,10;80,0;40,10;0,0" dur="6s" repeatCount="indefinite"/>
                <animateTransform attributeName="transform" type="rotate" values="0 27 15;30 27 15;-15 27 15;0 27 15" dur="6s" repeatCount="indefinite" additive="sum"/>
              </polygon>
            </svg>
          </div>
          <div class="project-desc typewriter" data-text="A computational geometry project in C++ that solves the problem of orienting 2D parts on a conveyor belt using push operations. Developed at Tel-Aviv University as part of advanced algorithm research.">
          </div>
          <a href="https://www.cgl.cs.tau.ac.il/projects/2d-part-orienting/" target="_blank" class="blueprint-btn">üìã View Project at TAU</a>
        </div>
        <div class="vault-door" onclick="openCompartment(2)">
          <div class="vault-roman">III</div>
          <div class="lock-display">üîê</div>
        </div>
      </div>

      <!-- Compartment IV: The Turing Jest -->
      <div class="compartment" id="comp3">
        <div class="compartment-interior">
          <div class="project-title">
            <span class="icon">üé≠</span> The Turing Jest
            <span class="emoji-duel">
              <span style="animation: rhymeBounce 1s infinite">üòÇ</span>
              <span class="vs">VS</span>
              <span style="animation: rhymeBounce 1s infinite 0.5s">ü§ñ</span>
            </span>
          </div>
          <div class="project-desc typewriter" data-text="An arena where human comedians face off against AI joke generators. Can you tell which jokes were written by a machine? The Turing Jest puts your humor detection skills to the test in an interactive judging experience.">
          </div>
          <a href="https://jest.geekip.dev" target="_blank" class="comedy-ticket">üé™ Enter the Arena</a>
        </div>
        <div class="vault-door" onclick="openCompartment(3)">
          <div class="vault-roman">IV</div>
          <div class="lock-display">üîê</div>
        </div>
      </div>

      <!-- Compartment V: Rhymes of Israel -->
      <div class="compartment" id="comp4">
        <div class="compartment-interior">
          <div class="project-title">
            <span class="icon">üì∞</span> Rhymes of 
            <span class="rhyme-word" id="rhymeWord">Israel</span>
          </div>
          <div class="yearbook-quote">
            <div class="project-desc typewriter" data-text="A Chrome extension that transforms Israeli news headlines into rhyming poetry. Install the digital muse in your browser and watch the day's news become verse. Because even headlines deserve a little rhythm.">
            </div>
          </div>
          <a href="https://chromewebstore.google.com/detail/eainginjgdkpgolpjniijdihfbeeeklb" target="_blank" class="chrome-badge">üß© Add to Chrome</a>
        </div>
        <div class="vault-door" onclick="openCompartment(4)">
          <div class="vault-roman">V</div>
          <div class="lock-display">üîê</div>
        </div>
      </div>

      <!-- Compartment VI: This Portfolio -->
      <div class="compartment" id="comp5">
        <div class="compartment-interior">
          <div class="project-title"><span class="icon">ü™û</span> This Portfolio (Meta)</div>
          <div style="position:relative; display:inline-block; z-index:1; margin-bottom:10px;">
            <div class="mini-page">
              <div class="mini-header"></div>
              <div class="mini-grid">
                <div class="mini-box"></div>
                <div class="mini-box"></div>
                <div class="mini-box"></div>
                <div class="mini-box"></div>
                <div class="mini-box"></div>
                <div class="mini-box"></div>
              </div>
            </div>
            <span class="magnifier">üîç</span>
          </div>
          <div class="project-desc typewriter" data-text="You're looking at it. This escape-room-themed portfolio is itself a project ‚Äî a self-referential puzzle box that contains a tiny version of itself. It's turtles all the way down.">
          </div>
          <a href="https://geekip.dev" target="_blank" class="mirror-link">ü™û You are here</a>
        </div>
        <div class="vault-door" onclick="openCompartment(5)">
          <div class="vault-roman">VI</div>
          <div class="lock-display">üîê</div>
        </div>
      </div>

    </div>

    <!-- Exit Door (Compartment VII) -->
    <div class="exit-section">
      <div class="exit-door-container">
        <div class="exit-sign"><span>EXIT</span></div>
        <div class="exit-door">
          <a href="https://github.com/gevak" target="_blank" class="key-link">
            <div class="key-hook"></div>
            <div class="key-bow">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
            </div>
            <div class="key-shaft"></div>
            <span class="key-label">GitHub</span>
          </a>
          <a href="https://linkedin.com/in/gevakip" target="_blank" class="key-link">
            <div class="key-hook"></div>
            <div class="key-bow">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
            </div>
            <div class="key-shaft"></div>
            <span class="key-label">LinkedIn</span>
          </a>
          <a href="https://facebook.com/geva.kipper" target="_blank" class="key-link">
            <div class="key-hook"></div>
            <div class="key-bow">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
            </div>
            <div class="key-shaft"></div>
            <span class="key-label">Facebook</span>
          </a>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer-plaque">
      <div class="bolt"></div>
      <div class="bolt"></div>
      <div class="bolt"></div>
      <div class="bolt"></div>
      <div class="footer-text">This room was designed by Claude, an AI.</div>
      <div class="stopwatch-label">Time since last escape</div>
      <div class="flip-clock" id="flipClock"></div>
    </footer>

  </div>
</div>

<script>
// ===== Flashlight Effect =====
const flashlight = document.getElementById('flashlightOverlay');
const pageContent = document.getElementById('pageContent');
let lightsOn = false;

document.addEventListener('mousemove', (e) => {
  if (!lightsOn) {
    flashlight.style.setProperty('--mx', e.clientX + 'px');
    flashlight.style.setProperty('--my', e.clientY + 'px');
  }
});

// Lights on after 3 seconds
setTimeout(() => {
  lightsOn = true;
  pageContent.classList.add('flickering');
  setTimeout(() => {
    pageContent.classList.remove('flickering');
    pageContent.classList.add('revealed');
    flashlight.classList.add('lights-on');
  }, 1800);
}, 3000);

// ===== Dust Particles =====
const dustContainer = document.getElementById('dustContainer');
for (let i = 0; i < 30; i++) {
  const dust = document.createElement('div');
  dust.className = 'dust';
  dust.style.left = Math.random() * 100 + '%';
  dust.style.animationDuration = (8 + Math.random() * 15) + 's';
  dust.style.animationDelay = (Math.random() * 10) + 's';
  dust.style.width = (1 + Math.random() * 2) + 'px';
  dust.style.height = dust.style.width;
  dust.style.opacity = 0.1 + Math.random() * 0.3;
  dustContainer.appendChild(dust);
}

// ===== Heatmap Decoration =====
const heatmapDeco = document.getElementById('heatmapDeco');
const colors = ['#2ecc71', '#27ae60', '#f39c12', '#e67e22', '#e74c3c',
                '#27ae60', '#f39c12', '#e74c3c', '#2ecc71', '#f39c12',
                '#e67e22', '#e74c3c', '#27ae60', '#f39c12', '#e74c3c',
                '#2ecc71', '#27ae60', '#e67e22', '#e74c3c', '#f39c12',
                '#e74c3c', '#f39c12', '#2ecc71', '#27ae60', '#e67e22'];
colors.forEach(c => {
  const s = document.createElement('span');
  s.style.background = c;
  heatmapDeco.appendChild(s);
});

// ===== Compartment Opening =====
const compartments = document.querySelectorAll('.compartment');
const clueCards = document.querySelectorAll('.clue-card');
const openedSet = new Set();

function openCompartment(index) {
  if (openedSet.has(index)) return;
  openedSet.add(index);
  
  const comp = document.getElementById('comp' + index);
  comp.classList.add('open');
  
  // Update clue card lock icon
  if (clueCards[index]) {
    clueCards[index].querySelector('.lock-icon').textContent = 'üîì';
  }
  
  // Trigger typewriter animation
  setTimeout(() => {
    const tw = comp.querySelector('.typewriter');
    if (tw) {
      const text = tw.getAttribute('data-text');
      tw.innerHTML = '';
      tw.classList.add('animate');
      [...text].forEach((char, i) => {
        const span = document.createElement('span');
        span.textContent = char;
        span.style.animationDelay = (i * 30) + 'ms';
        tw.appendChild(span);
      });
    }
  }, 500);
}

// Clue card click
clueCards.forEach(card => {
  card.addEventListener('click', () => {
    const target = parseInt(card.getAttribute('data-target'));
    openCompartment(target);
  });
});

// ===== Unlock All =====
const unlockAllBtn = document.getElementById('unlockAll');
const leverHandle = document.getElementById('leverHandle');
const puzzleGrid = document.getElementById('puzzleGrid');
let allUnlocked = false;

unlockAllBtn.addEventListener('click', () => {
  if (allUnlocked) return;
  allUnlocked = true;
  
  leverHandle.classList.add('pulled');
  puzzleGrid.classList.add('shaking');
  
  setTimeout(() => puzzleGrid.classList.remove('shaking'), 600);
  
  for (let i = 0; i < 6; i++) {
    setTimeout(() => openCompartment(i), i * 300);
  }
});

// ===== YouTube Thumbnail Expand =====
const ytThumb = document.getElementById('ytThumb');
let ytExpanded = false;

ytThumb.addEventListener('click', () => {
  if (ytExpanded) return;
  ytExpanded = true;
  
  const container = ytThumb.parentElement;
  const expanded = document.createElement('div');
  expanded.className = 'yt-expanded';
  expanded.innerHTML = '<iframe src="https://www.youtube.com/embed/jrKAtOsj1Lo?autoplay=1" allowfullscreen allow="autoplay"></iframe>';
  
  ytThumb.style.display = 'none';
  container.appendChild(expanded);
});

// ===== Rhyme Word Animation =====
const rhymeWord = document.getElementById('rhymeWord');
const rhymes = ['Israel', 'Appeal', 'Reveal', 'Ideal', 'Surreal', 'Israel'];
let rhymeIndex = 0;

setInterval(() => {
  rhymeIndex = (rhymeIndex + 1) % rhymes.length;
  rhymeWord.classList.add('bounce');
  setTimeout(() => {
    rhymeWord.textContent = rhymes[rhymeIndex];
    setTimeout(() => rhymeWord.classList.remove('bounce'), 400);
  }, 200);
}, 3000);

// ===== Flip Clock Stopwatch =====
const flipClockEl = document.getElementById('flipClock');
const startDate = new Date('2025-02-17T01:29:00Z');

// Build flip clock structure
function buildFlipClock() {
  const groups = [
    { id: 'days', digits: 4, label: 'DAYS' },
    { id: 'hours', digits: 2, label: 'HRS' },
    { id: 'mins', digits: 2, label: 'MIN' },
    { id: 'secs', digits: 2, label: 'SEC' }
  ];
  
  groups.forEach((group, gi) => {
    if (gi > 0) {
      const sep = document.createElement('span');
      sep.className = 'separator';
      sep.textContent = ':';
      flipClockEl.appendChild(sep);
    }
    
    const fg = document.createElement('div');
    fg.className = 'flip-group';
    
    for (let d = 0; d < group.digits; d++) {
      const digit = document.createElement('div');
      digit.className = 'flip-digit';
      digit.id = `${group.id}-${d}`;
      digit.innerHTML = '<div class="top"><span>0</span></div><div class="bottom"><span>0</span></div>';
      fg.appendChild(digit);
    }
    
    const label = document.createElement('span');
    label.className = 'label';
    label.textContent = group.label;
    fg.appendChild(label);
    
    flipClockEl.appendChild(fg);
  });
}

function updateFlipClock() {
  const now = new Date();
  const diff = Math.max(0, Math.floor((now - startDate) / 1000));
  
  const days = Math.floor(diff / 86400);
  const hours = Math.floor((diff % 86400) / 3600);
  const mins = Math.floor((diff % 3600) / 60);
  const secs = diff % 60;
  
  const daysStr = String(days).padStart(4, '0');
  const hoursStr = String(hours).padStart(2, '0');
  const minsStr = String(mins).padStart(2, '0');
  const secsStr = String(secs).padStart(2, '0');
  
  setDigits('days', daysStr);
  setDigits('hours', hoursStr);
  setDigits('mins', minsStr);
  setDigits('secs', secsStr);
}

function setDigits(groupId, str) {
  for (let i = 0; i < str.length; i++) {
    const el = document.getElementById(`${groupId}-${i}`);
    if (el) {
      const topSpan = el.querySelector('.top span');
      const bottomSpan = el.querySelector('.bottom span');
      topSpan.textContent = str[i];
      bottomSpan.textContent = str[i];
    }
  }
}

buildFlipClock();
updateFlipClock();
setInterval(updateFlipClock, 1000);

// ===== Exit sign pulse on scroll =====
const exitSign = document.querySelector('.exit-sign span');
window.addEventListener('scroll', () => {
  const rect = exitSign.getBoundingClientRect();
  const viewportHeight = window.innerHeight;
  if (rect.top < viewportHeight && rect.bottom > 0) {
    exitSign.style.animationDuration = '0.8s';
  } else {
    exitSign.style.animationDuration = '2s';
  }
});
</script>
<!-- Add this block to embed the like button -->
    <script src="/static/js/like_button.js"></script>
    <script>
        LikeButton.init({
          pageId: "20260217",
          position: "bottom-right", // Options: bottom-right, bottom-left, top-right, top-left
        });
    </script>

</body>
</html>