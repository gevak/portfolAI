<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geva Kipper - Escape Room Portfolio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400;700&family=Roboto+Mono&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(to bottom, #0a0e27 0%, #000000 100%);
            color: #ffffff;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }

        #particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            background: rgba(255, 200, 100, 0.3);
            border-radius: 50%;
            animation: float linear infinite;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(var(--drift));
                opacity: 0;
            }
        }

        .container {
            position: relative;
            z-index: 2;
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 60px;
            padding: 40px 20px;
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 4rem;
            color: #ffb347;
            text-shadow: 0 0 30px rgba(255, 179, 71, 0.8),
                         0 0 60px rgba(255, 179, 71, 0.4);
            margin-bottom: 20px;
            animation: glow 3s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from {
                text-shadow: 0 0 30px rgba(255, 179, 71, 0.8),
                             0 0 60px rgba(255, 179, 71, 0.4);
            }
            to {
                text-shadow: 0 0 40px rgba(255, 179, 71, 1),
                             0 0 80px rgba(255, 179, 71, 0.6);
            }
        }

        .subtitle {
            font-size: 1.2rem;
            color: #d4d4d4;
            margin-bottom: 10px;
        }

        .meta-text {
            font-size: 0.9rem;
            font-style: italic;
            color: #999;
            animation: shimmer 4s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        .progress-bar {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 50px;
        }

        .progress-circle {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #ffb347;
            background: transparent;
            transition: background 0.5s ease, box-shadow 0.5s ease;
        }

        .progress-circle.unlocked {
            background: radial-gradient(circle, #ffb347 0%, #ff8c00 100%);
            box-shadow: 0 0 15px rgba(255, 179, 71, 0.8);
        }

        .boxes-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 40px;
            margin-bottom: 80px;
            perspective: 1000px;
        }

        .box {
            position: relative;
            aspect-ratio: 1;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .box:hover {
            transform: translateY(-10px) scale(1.05);
        }

        .box-front {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #3a2f1f 0%, #1a1410 100%);
            border: 3px solid #8b6f47;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .box.unlocked .box-front {
            opacity: 0;
            transform: rotateY(-90deg);
            pointer-events: none;
        }

        .box-symbol {
            font-size: 3rem;
            margin-bottom: 20px;
            opacity: 0.7;
        }

        .keyhole {
            width: 30px;
            height: 30px;
            background: #1a1410;
            border-radius: 50%;
            position: relative;
            border: 2px solid #8b6f47;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.8);
        }

        .keyhole::after {
            content: '';
            position: absolute;
            top: 60%;
            left: 50%;
            transform: translateX(-50%);
            width: 8px;
            height: 15px;
            background: #1a1410;
            clip-path: polygon(0 0, 100% 0, 80% 100%, 20% 100%);
        }

        .box-glow {
            position: absolute;
            inset: -5px;
            border-radius: 10px;
            background: radial-gradient(circle, rgba(255, 179, 71, 0.3) 0%, transparent 70%);
            opacity: 0;
            animation: pulse 3s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }

        .riddle {
            position: absolute;
            top: -60px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Playfair Display', serif;
            font-style: italic;
            font-size: 0.9rem;
            color: #ffb347;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            text-align: center;
            max-width: 300px;
            white-space: normal;
        }

        .box:hover .riddle {
            opacity: 1;
        }

        .puzzle-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .puzzle-overlay.active {
            display: flex;
        }

        .puzzle-content {
            background: #1a1410;
            padding: 40px;
            border-radius: 15px;
            border: 3px solid #8b6f47;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .puzzle-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: #ffb347;
            margin-bottom: 30px;
        }

        .puzzle-close {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2rem;
            color: #ffb347;
            cursor: pointer;
            background: none;
            border: none;
        }

        .slider-puzzle {
            margin: 30px 0;
        }

        .slider-puzzle input[type="range"] {
            width: 100%;
            height: 10px;
            background: #3a2f1f;
            border-radius: 5px;
            outline: none;
        }

        .slider-value {
            font-size: 2rem;
            color: #ffb347;
            margin-top: 20px;
        }

        .heatmap-puzzle {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 30px 0;
        }

        .heatmap-cell {
            aspect-ratio: 1;
            background: #3a2f1f;
            border: 2px solid #8b6f47;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .heatmap-cell.clicked {
            background: #ff6347;
        }

        .rotation-puzzle {
            margin: 30px 0;
        }

        .rotation-shape {
            width: 150px;
            height: 150px;
            margin: 0 auto;
            background: #ffb347;
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .rotation-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .rotation-buttons button {
            padding: 10px 20px;
            background: #8b6f47;
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            font-size: 1rem;
        }

        .pun-puzzle {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 30px 0;
        }

        .pun-option {
            padding: 20px;
            background: #3a2f1f;
            border: 2px solid #8b6f47;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pun-option:hover {
            background: #4a3f2f;
            border-color: #ffb347;
        }

        .rhyme-puzzle {
            margin: 30px 0;
        }

        .word-tiles {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .word-tile {
            padding: 10px 20px;
            background: #8b6f47;
            border-radius: 5px;
            cursor: pointer;
            user-select: none;
        }

        .word-tile.selected {
            background: #ffb347;
            color: #000;
        }

        .mirror-puzzle canvas {
            border: 2px solid #8b6f47;
            border-radius: 5px;
            cursor: crosshair;
            margin: 20px 0;
        }

        .graph-puzzle {
            margin: 30px 0;
        }

        .graph-canvas {
            position: relative;
            width: 100%;
            height: 300px;
            background: #3a2f1f;
            border-radius: 5px;
            border: 2px solid #8b6f47;
        }

        .graph-node {
            position: absolute;
            width: 50px;
            height: 50px;
            background: #8b6f47;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.5rem;
        }

        .graph-node.selected {
            background: #ffb347;
            box-shadow: 0 0 20px rgba(255, 179, 71, 0.8);
        }

        .submit-button {
            padding: 15px 40px;
            background: #8b6f47;
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .submit-button:hover {
            background: #ffb347;
            color: #000;
        }

        .box-content {
            position: absolute;
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 10px;
            padding: 30px;
            color: #000;
            opacity: 0;
            transition: opacity 0.5s ease 0.3s;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(255, 179, 71, 0.5);
        }

        .box.unlocked .box-content {
            opacity: 1;
        }

        .box-content h3 {
            font-family: 'Roboto', sans-serif;
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #1a1410;
        }

        .box-content p {
            line-height: 1.6;
            margin-bottom: 20px;
            color: #333;
        }

        .project-links {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .project-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            background: linear-gradient(135deg, #8b6f47 0%, #6b5437 100%);
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        .project-link:hover {
            background: linear-gradient(135deg, #ffb347 0%, #ff8c00 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 179, 71, 0.5);
        }

        .achievement {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #ffb347 0%, #ff8c00 100%);
            padding: 40px 60px;
            border-radius: 15px;
            font-size: 2rem;
            font-weight: 700;
            z-index: 2000;
            box-shadow: 0 0 50px rgba(255, 179, 71, 0.8);
            animation: achievementPop 0.5s ease;
        }

        @keyframes achievementPop {
            0% { transform: translate(-50%, -50%) scale(0); }
            50% { transform: translate(-50%, -50%) scale(1.1); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #ffb347;
            position: absolute;
            animation: confettiFall 3s linear;
        }

        @keyframes confettiFall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        footer {
            text-align: center;
            padding: 40px 20px;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.9rem;
            color: #00ff00;
            border-top: 1px solid #333;
        }

        .stopwatch {
            color: #00ff00;
            font-weight: 700;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }

            .subtitle {
                font-size: 1rem;
            }

            .boxes-container {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .riddle {
                position: static;
                transform: none;
                margin-bottom: 10px;
                opacity: 1;
                font-size: 0.8rem;
            }

            .puzzle-content {
                padding: 30px 20px;
            }

            .box-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div id="particles"></div>
    
    <div class="container">
        <header>
            <h1>Geva Kipper</h1>
            <div class="subtitle">Building intelligent systems at Google</div>
            <div class="meta-text">This portfolio redesigns itself daily through AIâ€”you're experiencing today's iteration.</div>
        </header>

        <div class="progress-bar" id="progressBar"></div>

        <div class="boxes-container" id="boxesContainer"></div>

        <div class="achievement" id="achievement">
            ðŸŽ‰ Achievement Unlocked! ðŸŽ‰<br>
            <span style="font-size: 1.2rem;">Master Code Breaker</span>
        </div>
    </div>

    <footer>
        Escape room designed by Claude (Anthropic) â€¢ You've been solving for <span class="stopwatch" id="stopwatch">00h 00m 00s</span> since October 27th, 2025.
    </footer>

    <script>
        // Particles animation
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                const size = Math.random() * 3 + 1;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particle.style.animationDelay = Math.random() * 5 + 's';
                particle.style.setProperty('--drift', (Math.random() * 100 - 50) + 'px');
                container.appendChild(particle);
            }
        }

        // Stopwatch
        function updateStopwatch() {
            const startDate = new Date('2025-10-27T00:00:00');
            const now = new Date();
            const diff = now - startDate;
            
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            document.getElementById('stopwatch').textContent = 
                `${hours.toString().padStart(2, '0')}h ${minutes.toString().padStart(2, '0')}m ${seconds.toString().padStart(2, '0')}s`;
        }

        // Projects data
        const projects = [
            {
                symbol: 'ðŸŽµ',
                riddle: 'What song plays on repeat? Find the pattern in the compression.',
                title: 'GlglStats',
                description: 'A statistical analysis tool for music streaming patterns and compression algorithms.',
                puzzle: 'slider',
                links: [
                    { text: 'Visit GlglStats', url: 'https://glglstats.geekip.dev', icon: 'ðŸŒ' },
                    { text: 'Watch PyData Talk', url: 'https://www.youtube.com/watch?v=jrKAtOsj1Lo', icon: 'ðŸŽ¬' }
                ]
            },
            {
                symbol: 'ðŸ…¿ï¸',
                riddle: 'Where Tel-Aviv parks its secretsâ€”seek the heat where spaces hide.',
                title: 'Ahuzat Dibuk',
                description: 'Uncovering hidden parking patterns in Tel-Aviv through data visualization and heat mapping.',
                puzzle: 'heatmap',
                links: [
                    { text: 'Original Post', url: 'https://www.facebook.com/groups/secrettelaviv/posts/10159636301195943', icon: 'ðŸ“' },
                    { text: 'Channel 13 Coverage', url: 'https://13tv.co.il/item/news/domestic/internal/parking-902956407/', icon: 'ðŸ“º' },
                    { text: 'Mako News', url: 'https://www.mako.co.il/nexter-news/Article-ae43964b891bf71027.htm', icon: 'ðŸ“°' }
                ]
            },
            {
                symbol: 'ðŸ”„',
                riddle: 'Spin the pieces until they alignâ€”orientation is everything.',
                title: '2D Part Orienting',
                description: 'Academic research on optimal 2D part orientation algorithms for manufacturing and assembly.',
                puzzle: 'rotation',
                links: [
                    { text: 'Research Paper & Code', url: 'https://www.cgl.cs.tau.ac.il/projects/2d-part-orienting/', icon: 'ðŸŽ“' }
                ]
            },
            {
                symbol: 'ðŸ˜„',
                riddle: 'Can you tell wit from artificial humor? Choose the jest that makes you laugh.',
                title: 'The Turing Jest',
                description: 'An AI-powered pun generator that challenges the boundary between human and machine humor.',
                puzzle: 'pun',
                links: [
                    { text: 'Try The Turing Jest', url: 'https://jest.geekip.dev', icon: 'ðŸŽ­' }
                ]
            },
            {
                symbol: 'ðŸ“œ',
                riddle: 'Arrange the words to make them singâ€”poetry flows in patterns.',
                title: 'Rhymes of Israel',
                description: 'A Chrome extension that helps create Hebrew rhymes and poetic patterns.',
                puzzle: 'rhyme',
                links: [
                    { text: 'Chrome Extension', url: 'https://chromewebstore.google.com/detail/eainginjgdkpgolpjniijdihfbeeeklb', icon: 'ðŸ”Œ' }
                ]
            },
            {
                symbol: 'ðŸªž',
                riddle: 'Reflect upon this pageâ€”trace the mirror to reveal the truth.',
                title: 'Meta Portfolio',
                description: 'This very portfolio you\'re exploringâ€”a self-referential escape room experience.',
                puzzle: 'mirror',
                links: [
                    { text: 'You Are Here', url: 'https://geekip.dev', icon: 'ðŸ ' }
                ]
            },
            {
                symbol: 'ðŸ”—',
                riddle: 'Connect the nodes to complete the networkâ€”three links to unity.',
                title: 'Connect',
                description: 'Find me across the digital landscape.',
                puzzle: 'graph',
                links: [
                    { text: 'GitHub', url: 'https://github.com/gevak', icon: 'ðŸ’»' },
                    { text: 'LinkedIn', url: 'https://linkedin.com/in/gevakip', icon: 'ðŸ’¼' },
                    { text: 'Facebook', url: 'https://facebook.com/geva.kipper', icon: 'ðŸ‘¤' }
                ]
            }
        ];

        let unlockedCount = 0;
        const puzzleStates = {};

        // Initialize progress bar
        function initProgressBar() {
            const progressBar = document.getElementById('progressBar');
            for (let i = 0; i < projects.length; i++) {
                const circle = document.createElement('div');
                circle.className = 'progress-circle';
                circle.id = `progress-${i}`;
                progressBar.appendChild(circle);
            }
        }

        // Create boxes
        function createBoxes() {
            const container = document.getElementById('boxesContainer');
            projects.forEach((project, index) => {
                const box = document.createElement('div');
                box.className = 'box';
                box.id = `box-${index}`;
                
                box.innerHTML = `
                    <div class="box-glow"></div>
                    <div class="riddle">${project.riddle}</div>
                    <div class="box-front">
                        <div class="box-symbol">${project.symbol}</div>
                        <div class="keyhole"></div>
                    </div>
                    <div class="box-content">
                        <h3>${project.title}</h3>
                        <p>${project.description}</p>
                        <div class="project-links">
                            ${project.links.map(link => 
                                `<a href="${link.url}" class="project-link" target="_blank">
                                    <span>${link.icon}</span>
                                    <span>${link.text}</span>
                                </a>`
                            ).join('')}
                        </div>
                    </div>
                `;
                
                box.addEventListener('click', () => openPuzzle(index));
                container.appendChild(box);
            });
        }

        // Puzzle implementations
        function openPuzzle(index) {
            if (document.getElementById(`box-${index}`).classList.contains('unlocked')) {
                return;
            }

            const overlay = document.createElement('div');
            overlay.className = 'puzzle-overlay active';
            overlay.innerHTML = `
                <div class="puzzle-content">
                    <button class="puzzle-close" onclick="this.closest('.puzzle-overlay').remove()">Ã—</button>
                    <div class="puzzle-title">${projects[index].title}</div>
                    <div id="puzzleArea"></div>
                </div>
            `;
            
            document.body.appendChild(overlay);
            
            const puzzleArea = overlay.querySelector('#puzzleArea');
            
            switch(projects[index].puzzle) {
                case 'slider':
                    createSliderPuzzle(puzzleArea, index, overlay);
                    break;
                case 'heatmap':
                    createHeatmapPuzzle(puzzleArea, index, overlay);
                    break;
                case 'rotation':
                    createRotationPuzzle(puzzleArea, index, overlay);
                    break;
                case 'pun':
                    createPunPuzzle(puzzleArea, index, overlay);
                    break;
                case 'rhyme':
                    createRhymePuzzle(puzzleArea, index, overlay);
                    break;
                case 'mirror':
                    createMirrorPuzzle(puzzleArea, index, overlay);
                    break;
                case 'graph':
                    createGraphPuzzle(puzzleArea, index, overlay);
                    break;
            }
        }

        function createSliderPuzzle(container, index, overlay) {
            const targetValue = 75;
            container.innerHTML = `
                <div class="slider-puzzle">
                    <p>Adjust the compression level to reveal the pattern:</p>
                    <input type="range" min="0" max="100" value="0" id="sliderInput">
                    <div class="slider-value" id="sliderValue">0%</div>
                    <button class="submit-button" onclick="checkSlider(${index}, ${targetValue})">Unlock</button>
                </div>
            `;
            
            const slider = container.querySelector('#sliderInput');
            const value = container.querySelector('#sliderValue');
            slider.addEventListener('input', (e) => {
                value.textContent = e.target.value + '%';
            });
        }

        window.checkSlider = function(index, target) {
            const value = parseInt(document.getElementById('sliderInput').value);
            if (Math.abs(value - target) <= 5) {
                unlockBox(index);
                document.querySelector('.puzzle-overlay').remove();
            } else {
                alert('Not quite right. Try adjusting the slider!');
            }
        };

        function createHeatmapPuzzle(container, index, overlay) {
            const sequence = [4, 1, 7]; // center, top-left, bottom-right
            puzzleStates[index] = { clicks: [], sequence };
            
            container.innerHTML = `
                <div class="heatmap-puzzle">
                    <p style="grid-column: 1 / -1; margin-bottom: 10px;">Click the parking spots in the correct heat sequence:</p>
                    ${Array(9).fill(0).map((_, i) => 
                        `<div class="heatmap-cell" onclick="clickHeatmap(${index}, ${i})"></div>`
                    ).join('')}
                </div>
                <button class="submit-button" onclick="checkHeatmap(${index})">Unlock</button>
            `;
        }

        window.clickHeatmap = function(index, cell) {
            const state = puzzleStates[index];
            const cellEl = document.querySelectorAll('.heatmap-cell')[cell];
            
            if (!cellEl.classList.contains('clicked')) {
                cellEl.classList.add('clicked');
                state.clicks.push(cell);
            }
        };

        window.checkHeatmap = function(index) {
            const state = puzzleStates[index];
            if (JSON.stringify(state.clicks) === JSON.stringify(state.sequence)) {
                unlockBox(index);
                document.querySelector('.puzzle-overlay').remove();
            } else {
                alert('Wrong pattern! Try again.');
                state.clicks = [];
                document.querySelectorAll('.heatmap-cell').forEach(c => c.classList.remove('clicked'));
            }
        };

        function createRotationPuzzle(container, index, overlay) {
            puzzleStates[index] = { rotation: 0, target: 90 };
            
            container.innerHTML = `
                <div class="rotation-puzzle">
                    <p>Rotate the part to the correct orientation (90Â°):</p>
                    <div class="rotation-shape" id="rotationShape"></div>
                    <div class="rotation-buttons">
                        <button onclick="rotateShape(${index}, -45)">â†¶ 45Â°</button>
                        <button onclick="rotateShape(${index}, 45)">â†· 45Â°</button>
                    </div>
                    <button class="submit-button" onclick="checkRotation(${index})">Unlock</button>
                </div>
            `;
            updateRotationShape(index);
        }

        window.rotateShape = function(index, deg) {
            puzzleStates[index].rotation = (puzzleStates[index].rotation + deg) % 360;
            updateRotationShape(index);
        };

        function updateRotationShape(index) {
            const shape = document.getElementById('rotationShape');
            if (shape) {
                shape.style.transform = `rotate(${puzzleStates[index].rotation}deg)`;
            }
        }

        window.checkRotation = function(index) {
            const rotation = puzzleStates[index].rotation;
            if (rotation === puzzleStates[index].target || rotation === -270) {
                unlockBox(index);
                document.querySelector('.puzzle-overlay').remove();
            } else {
                alert(`Current rotation: ${rotation}Â°. Keep trying!`);
            }
        };

        function createPunPuzzle(container, index, overlay) {
            const puns = [
                "Why don't scientists trust atoms? Because they make up everything!",
                "I'm reading a book about anti-gravity. It's impossible to put down!"
            ];
            const funnier = 1;
            
            container.innerHTML = `
                <div class="pun-puzzle">
                    <p>Which pun is funnier?</p>
                    ${puns.map((pun, i) => 
                        `<div class="pun-option" onclick="checkPun(${index}, ${i}, ${funnier})">${pun}</div>`
                    ).join('')}
                </div>
            `;
        }

        window.checkPun = function(index, selected, correct) {
            if (selected === correct) {
                unlockBox(index);
                document.querySelector('.puzzle-overlay').remove();
            } else {
                alert('Try the other one!');
            }
        };

        function createRhymePuzzle(container, index, overlay) {
            const words = ['sun', 'fun', 'run', 'cat'];
            const correctOrder = [0, 1, 2]; // sun, fun, run
            puzzleStates[index] = { selected: [] };
            
            container.innerHTML = `
                <div class="rhyme-puzzle">
                    <p>Select words in order to create a rhyme (3 words):</p>
                    <div class="word-tiles">
                        ${words.map((word, i) => 
                            `<div class="word-tile" onclick="selectWord(${index}, ${i}, '${word}')">${word}</div>`
                        ).join('')}
                    </div>
                    <div id="selectedWords" style="min-height: 30px; margin: 20px 0;"></div>
                    <button class="submit-button" onclick="checkRhyme(${index}, ${JSON.stringify(correctOrder).replace(/"/g, '&quot;')})">Unlock</button>
                </div>
            `;
        }

        window.selectWord = function(index, wordIndex, word) {
            const state = puzzleStates[index];
            const tiles = document.querySelectorAll('.word-tile');
            
            if (tiles[wordIndex].classList.contains('selected')) {
                tiles[wordIndex].classList.remove('selected');
                state.selected = state.selected.filter(i => i !== wordIndex);
            } else if (state.selected.length < 3) {
                tiles[wordIndex].classList.add('selected');
                state.selected.push(wordIndex);
            }
            
            document.getElementById('selectedWords').textContent = 
                state.selected.map(i => document.querySelectorAll('.word-tile')[i].textContent).join(' â†’ ');
        };

        window.checkRhyme = function(index, correct) {
            const correctArray = JSON.parse(correct.replace(/&quot;/g, '"'));
            if (JSON.stringify(puzzleStates[index].selected) === JSON.stringify(correctArray)) {
                unlockBox(index);
                document.querySelector('.puzzle-overlay').remove();
            } else {
                alert('Not quite a rhyme! Try again.');
            }
        };

        function createMirrorPuzzle(container, index, overlay) {
            container.innerHTML = `
                <div class="mirror-puzzle">
                    <p>Draw a diagonal line from top-left to bottom-right:</p>
                    <canvas id="mirrorCanvas" width="300" height="300"></canvas>
                    <button class="submit-button" onclick="checkMirror(${index})">Unlock</button>
                </div>
            `;
            
            const canvas = document.getElementById('mirrorCanvas');
            const ctx = canvas.getContext('2d');
            let drawing = false;
            puzzleStates[index] = { path: [] };
            
            ctx.fillStyle = '#3a2f1f';
            ctx.fillRect(0, 0, 300, 300);
            
            canvas.addEventListener('mousedown', () => drawing = true);
            canvas.addEventListener('mouseup', () => drawing = false);
            canvas.addEventListener('mousemove', (e) => {
                if (!drawing) return;
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                ctx.fillStyle = '#ffb347';
                ctx.fillRect(x-2, y-2, 4, 4);
                puzzleStates[index].path.push({x, y});
            });
        }

        window.checkMirror = function(index) {
            const path = puzzleStates[index].path;
            if (path.length > 20) {
                const start = path[0];
                const end = path[path.length - 1];
                if (start.x < 50 && start.y < 50 && end.x > 250 && end.y > 250) {
                    unlockBox(index);
                    document.querySelector('.puzzle-overlay').remove();
                    return;
                }
            }
            alert('Try drawing a diagonal line from top-left to bottom-right!');
        };

        function createGraphPuzzle(container, index, overlay) {
            puzzleStates[index] = { selected: [] };
            
            container.innerHTML = `
                <div class="graph-puzzle">
                    <p>Click all three nodes to connect the network:</p>
                    <div class="graph-canvas">
                        <div class="graph-node" style="top: 50px; left: 50px;" onclick="selectNode(${index}, 0)">ðŸ’»</div>
                        <div class="graph-node" style="top: 50px; right: 50px;" onclick="selectNode(${index}, 1)">ðŸ’¼</div>
                        <div class="graph-node" style="bottom: 50px; left: 50%; transform: translateX(-50%);" onclick="selectNode(${index}, 2)">ðŸ‘¤</div>
                    </div>
                    <button class="submit-button" onclick="checkGraph(${index})">Unlock</button>
                </div>
            `;
        }

        window.selectNode = function(index, nodeIndex) {
            const nodes = document.querySelectorAll('.graph-node');
            const state = puzzleStates[index];
            
            if (state.selected.includes(nodeIndex)) {
                nodes[nodeIndex].classList.remove('selected');
                state.selected = state.selected.filter(i => i !== nodeIndex);
            } else {
                nodes[nodeIndex].classList.add('selected');
                state.selected.push(nodeIndex);
            }
        };

        window.checkGraph = function(index) {
            if (puzzleStates[index].selected.length === 3) {
                unlockBox(index);
                document.querySelector('.puzzle-overlay').remove();
            } else {
                alert('Connect all three nodes!');
            }
        };

        function unlockBox(index) {
            const box = document.getElementById(`box-${index}`);
            box.classList.add('unlocked');
            
            const progress = document.getElementById(`progress-${index}`);
            progress.classList.add('unlocked');
            
            unlockedCount++;
            
            if (unlockedCount === projects.length) {
                setTimeout(showAchievement, 500);
            }
        }

        function showAchievement() {
            const achievement = document.getElementById('achievement');
            achievement.style.display = 'block';
            
            // Create confetti
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-10px';
                    confetti.style.background = ['#ffb347', '#ff8c00', '#ffd700', '#00ff00'][Math.floor(Math.random() * 4)];
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
            
            setTimeout(() => {
                achievement.style.display = 'none';
            }, 4000);
        }

        // Initialize
        createParticles();
        initProgressBar();
        createBoxes();
        updateStopwatch();
        setInterval(updateStopwatch, 1000);
    </script>
<!-- Add this block to embed the like button -->
    <script src="/static/js/like_button.js"></script>
    <script>
        LikeButton.init({
          pageId: "20251027",
          position: "bottom-right", // Options: bottom-right, bottom-left, top-right, top-left
        });
    </script>

</body>
</html>