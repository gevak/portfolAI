<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <title>Geva Kipper — Surfboard Skill Tree</title>
  <style>
    :root{
      --ui: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;

      --ink: rgba(245,250,255,.92);
      --ink-dim: rgba(245,250,255,.70);
      --deep: #031024;
      --mid: #063056;
      --turq: #11b7c7;

      --glass: rgba(255,255,255,.10);
      --glass-stroke: rgba(255,255,255,.18);

      --card: rgba(250, 249, 246, .94);
      --card-ink: rgba(10, 18, 28, .88);
      --card-ink-dim: rgba(10, 18, 28, .68);
      --fiberglass: rgba(10,18,28,.18);

      --route: rgba(155, 240, 255, .18);
      --route-glow: rgba(155, 240, 255, .26);

      --focus: #b7f4ff;
      --shadow: 0 26px 60px rgba(0,0,0,.28);

      --boardW: 110px;
      --boardH: 280px;

      --pinY: 78vh; /* where the surfboard sits */
      --nodeSize: 46px;
    }

    @media (prefers-reduced-motion: reduce){
      *{ animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
    }

    *{ box-sizing: border-box; }
    html, body{ height: 100%; }
    body{
      margin: 0;
      font-family: var(--ui);
      color: var(--ink);
      background: radial-gradient(1200px 800px at 50% -10%, rgba(255,255,255,.12), transparent 60%),
                  linear-gradient(180deg, var(--deep) 0%, var(--mid) 45%, #0a5c7a 70%, #0db3c1 100%);
      overflow-x: hidden;
    }

    /* Fixed ocean layers */
    .ocean{
      position: fixed;
      inset: 0;
      z-index: -3;
      pointer-events: none;
    }
    #oceanCanvas{
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      filter: saturate(1.08) contrast(1.02);
    }
    .seaMist{
      position: absolute;
      inset: -20%;
      background:
        radial-gradient(900px 600px at 30% 20%, rgba(255,255,255,.06), transparent 60%),
        radial-gradient(800px 520px at 75% 30%, rgba(255,255,255,.05), transparent 62%),
        radial-gradient(700px 520px at 58% 68%, rgba(255,255,255,.045), transparent 60%);
      mix-blend-mode: screen;
      opacity: .9;
      transform: translateZ(0);
    }

    /* App layout */
    #app{
      position: relative;
      min-height: 100%;
    }

    /* Top-left return button */
    .return{
      position: fixed;
      top: 16px;
      left: 16px;
      z-index: 30;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(0,0,0,.18);
      border: 1px solid rgba(255,255,255,.18);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      color: var(--ink);
      text-decoration: none;
      font-size: 13px;
      letter-spacing: .02em;
    }
    .return:hover{ background: rgba(0,0,0,.25); }
    .return:focus-visible{
      outline: 3px solid var(--focus);
      outline-offset: 3px;
    }
    .return svg{ opacity: .9; }

    /* Voyage world */
    #voyage{
      position: relative;
      width: 100%;
    }

    /* Route SVG layer (in world coords, scrolls with content) */
    #routeLayer{
      position: absolute;
      inset: 0 auto 0 0;
      width: 100%;
      pointer-events: none;
      z-index: 1;
    }
    #routeLayer .glow{
      filter: drop-shadow(0 0 10px rgba(155,240,255,.25));
    }

    /* Hero */
    header.hero{
      position: relative;
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: 96px 20px 40px;
      z-index: 2;
    }
    .horizon{
      position: absolute;
      top: 28vh;
      left: 0;
      width: 100%;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.35), transparent);
      opacity: .7;
    }
    .sunHalo{
      position: absolute;
      top: calc(28vh - 40px);
      left: 50%;
      width: 140px;
      height: 140px;
      transform: translateX(-50%);
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.22);
      box-shadow: 0 0 80px rgba(255,255,255,.08);
      opacity: .9;
      backdrop-filter: blur(2px);
    }
    .heroStack{
      text-align: center;
      max-width: 1000px;
      padding: 0 14px;
    }
    .heroStack h1{
      margin: 0;
      font-weight: 640;
      font-size: clamp(44px, 6vw, 76px);
      letter-spacing: -0.02em;
      line-height: 1.02;
    }
    .heroStack .oneLine{
      margin: 12px 0 0;
      color: var(--ink-dim);
      font-size: clamp(14px, 1.65vw, 18px);
      letter-spacing: .01em;
      white-space: balance;
    }
    .pillRow{
      margin-top: 18px;
      display: inline-flex;
      align-items: center;
      gap: 12px;
      padding: 10px 14px;
      border-radius: 999px;
      background: var(--glass);
      border: 1px solid var(--glass-stroke);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      color: rgba(255,255,255,.88);
      box-shadow: 0 10px 40px rgba(0,0,0,.18);
    }
    .pillRow .sub{
      font-size: 13px;
      letter-spacing: .02em;
    }
    .pillRow .seed{
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing: .10em;
      opacity: .9;
      padding-left: 10px;
      border-left: 1px solid rgba(255,255,255,.20);
    }

    /* Below fold invite */
    .invite{
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-family: var(--mono);
      font-size: 12px;
      color: rgba(255,255,255,.68);
      letter-spacing: .12em;
      text-transform: uppercase;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      user-select: none;
    }
    .invite .tick{
      width: 18px;
      height: 28px;
      border: 1px solid rgba(255,255,255,.22);
      border-radius: 999px;
      position: relative;
      overflow: hidden;
    }
    .invite .tick::after{
      content: "";
      position: absolute;
      top: 7px;
      left: 50%;
      width: 2px;
      height: 7px;
      transform: translateX(-50%);
      border-radius: 99px;
      background: rgba(255,255,255,.55);
      animation: tick 1.5s infinite ease-in-out;
    }
    @keyframes tick{
      0%{ transform: translate(-50%, 0); opacity: .3; }
      50%{ transform: translate(-50%, 9px); opacity: .85; }
      100%{ transform: translate(-50%, 0); opacity: .3; }
    }

    /* Sections as “stops” */
    section.stop{
      position: relative;
      min-height: 120vh;
      padding: 0 20px;
      z-index: 2;
      display: grid;
      align-items: start;
    }

    /* Sticky card container */
    .stop .sticky{
      position: sticky;
      top: 12vh;
      padding-top: 16vh; /* breathing room before card pins */
    }

    /* Deck panel card */
    .card{
      width: min(980px, 92vw);
      margin: 0 auto;
      border-radius: 20px;
      background: var(--card);
      color: var(--card-ink);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: var(--shadow);
      overflow: hidden;
      position: relative;
      transform: translateY(26px);
      opacity: 0;
      transition: transform 800ms cubic-bezier(.2,.9,.2,1), opacity 700ms ease;
    }
    .card::before{
      /* subtle grain */
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(1px 1px at 10% 10%, rgba(0,0,0,.05), transparent 55%),
        radial-gradient(1px 1px at 35% 65%, rgba(0,0,0,.04), transparent 55%),
        radial-gradient(1px 1px at 70% 30%, rgba(0,0,0,.05), transparent 55%),
        radial-gradient(1px 1px at 82% 75%, rgba(0,0,0,.035), transparent 55%);
      opacity: .22;
      pointer-events: none;
      mix-blend-mode: multiply;
    }
    .card .edge{
      position: absolute;
      inset: 10px;
      border-radius: 16px;
      border: 1px solid rgba(10,18,28,.10);
      pointer-events: none;
    }
    .card.unlocked{
      transform: translateY(0);
      opacity: 1;
    }

    /* “Waxed strip” */
    .wax{
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 16px;
      padding: 18px 20px 12px;
      border-bottom: 1px solid rgba(10,18,28,.09);
      background:
        linear-gradient(90deg, rgba(255,255,255,.66), rgba(255,255,255,.34));
    }
    .wax h2{
      margin: 0;
      font-size: clamp(18px, 2.2vw, 24px);
      letter-spacing: -0.01em;
      font-weight: 680;
    }
    .wax .meta{
      font-family: var(--mono);
      font-size: 12px;
      color: rgba(10,18,28,.55);
      letter-spacing: .08em;
      text-transform: uppercase;
      white-space: nowrap;
    }

    .body{
      padding: 16px 20px 20px;
      display: grid;
      gap: 14px;
    }
    .desc{
      margin: 0;
      color: var(--card-ink-dim);
      line-height: 1.55;
      font-size: 15px;
    }

    /* Tech chips */
    .chips{
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .chip{
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(10,18,28,.06);
      border: 1px solid rgba(10,18,28,.09);
      color: rgba(10,18,28,.70);
    }

    /* CTA row */
    .ctaRow{
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      margin-top: 2px;
    }
    .btn{
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 12px;
      text-decoration: none;
      border: 1px solid rgba(10,18,28,.12);
      font-weight: 650;
      letter-spacing: .01em;
      font-size: 13px;
      transition: transform 120ms ease, background 180ms ease, border-color 180ms ease;
      user-select: none;
    }
    .btn:focus-visible{
      outline: 3px solid var(--focus);
      outline-offset: 3px;
    }
    .btn.primary{
      color: rgba(10,18,28,.90);
      background: rgba(255,255,255,.86);
      border-color: rgba(10,18,28,.15);
    }
    .btn.secondary{
      color: rgba(10,18,28,.80);
      background: rgba(10,18,28,.04);
    }
    .btn:hover{ transform: translateY(-1px); }
    .btn .arrow{ font-family: var(--mono); opacity: .7; }

    /* “Porthole” media */
    .porthole{
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(10,18,28,.10);
      background: linear-gradient(180deg, rgba(10,18,28,.06), rgba(10,18,28,.02));
      box-shadow: inset 0 12px 30px rgba(0,0,0,.08);
    }
    .porthole .thumb{
      display: grid;
      place-items: center;
      min-height: 270px;
      background:
        radial-gradient(1200px 500px at 20% 20%, rgba(17,183,199,.18), transparent 55%),
        linear-gradient(180deg, rgba(0,0,0,.06), rgba(0,0,0,.02));
      color: rgba(10,18,28,.75);
      position: relative;
    }
    .porthole .thumb button{
      appearance: none;
      border: 1px solid rgba(10,18,28,.18);
      background: rgba(255,255,255,.78);
      color: rgba(10,18,28,.85);
      border-radius: 999px;
      padding: 10px 14px;
      font-weight: 700;
      letter-spacing: .01em;
      cursor: pointer;
      box-shadow: 0 12px 30px rgba(0,0,0,.12);
    }
    .porthole .thumb button:hover{ background: rgba(255,255,255,.92); }
    .porthole iframe{
      width: 100%;
      aspect-ratio: 16/9;
      border: 0;
      display: block;
    }

    /* Alternating alignment (side-of-path feel) */
    .stop[data-side="left"] .card{ margin-left: max(4vw, 18px); margin-right: auto; }
    .stop[data-side="right"] .card{ margin-right: max(4vw, 18px); margin-left: auto; }

    /* Accent colors */
    .card[data-accent="seafoam"]{ --accent: rgba(45, 220, 197, .85); }
    .card[data-accent="coral"]{ --accent: rgba(255, 125, 125, .85); }
    .card[data-accent="amber"]{ --accent: rgba(255, 191, 90, .85); }
    .card[data-accent="indigo"]{ --accent: rgba(120, 135, 255, .85); }

    .card .accentBar{
      height: 3px;
      background: linear-gradient(90deg, transparent, var(--accent), transparent);
      opacity: .95;
    }

    /* Water rise + drip hint */
    .drip{
      position: absolute;
      left: 0; right: 0;
      top: -24px;
      height: 24px;
      background:
        radial-gradient(24px 16px at 20% 100%, rgba(255,255,255,.55), transparent 60%),
        radial-gradient(30px 16px at 50% 100%, rgba(255,255,255,.40), transparent 62%),
        radial-gradient(20px 16px at 80% 100%, rgba(255,255,255,.52), transparent 60%);
      opacity: .0;
      transform: translateY(8px);
      transition: opacity 600ms ease, transform 800ms cubic-bezier(.2,.9,.2,1);
      pointer-events: none;
    }
    .card.unlocked .drip{
      opacity: .8;
      transform: translateY(0);
    }

    /* Buoy nodes overlay */
    #nodesLayer{
      position: absolute;
      inset: 0;
      z-index: 3;
      pointer-events: none;
    }
    .node{
      position: absolute;
      width: var(--nodeSize);
      height: var(--nodeSize);
      border-radius: 999px;
      transform: translate(-50%, -50%);
      display: grid;
      place-items: center;
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.22);
      box-shadow: 0 18px 44px rgba(0,0,0,.18);
      opacity: .55;
      filter: saturate(.55);
    }
    .node .icon{
      width: 22px; height: 22px;
      opacity: .92;
    }
    .node.locked{
      opacity: .42;
      filter: saturate(.35) brightness(.92);
      transform: translate(-50%,-50%) translateY(10px); /* slightly submerged */
    }
    .node.near{
      animation: breathe 1.8s ease-in-out infinite;
    }
    @keyframes breathe{
      0%,100%{ transform: translate(-50%,-50%) translateY(8px) scale(1); }
      50%{ transform: translate(-50%,-50%) translateY(6px) scale(1.05); }
    }
    .node.unlocked{
      opacity: .98;
      filter: saturate(1) brightness(1.05);
      transform: translate(-50%,-50%) translateY(0);
      animation: none;
      border-color: rgba(155,240,255,.40);
      box-shadow: 0 18px 44px rgba(0,0,0,.22), 0 0 0 6px rgba(155,240,255,.08);
    }

    /* Unlock label near buoy */
    .unlockLabel{
      position: absolute;
      transform: translate(-50%,-50%);
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing: .06em;
      text-transform: uppercase;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.18);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      opacity: 0;
      transition: opacity 520ms ease, transform 620ms cubic-bezier(.2,.9,.2,1);
      pointer-events: none;
      white-space: nowrap;
      color: rgba(255,255,255,.88);
    }
    .unlockLabel.show{
      opacity: 1;
      transform: translate(-50%,-50%) translateY(-10px);
    }

    /* Surfboard pinned */
    #board{
      position: fixed;
      left: 50%;
      top: var(--pinY);
      width: var(--boardW);
      height: var(--boardH);
      transform: translate(-50%, -50%) rotate(-12deg);
      z-index: 10;
      pointer-events: none;
      filter: drop-shadow(0 20px 26px rgba(0,0,0,.28));
      transform-origin: 50% 72%;
    }
    .boardWrap{
      width: 100%;
      height: 100%;
      border-radius: 999px;
      background:
        radial-gradient(120px 220px at 50% 20%, rgba(255,255,255,.82), rgba(255,255,255,.68) 48%, rgba(245, 248, 252, .52) 70%, rgba(255,255,255,.36) 100%),
        linear-gradient(180deg, rgba(0,0,0,.10), transparent 45%);
      border: 1px solid rgba(255,255,255,.22);
      position: relative;
      overflow: hidden;
    }
    .boardWrap::before{
      content:"";
      position: absolute;
      inset: 10px;
      border-radius: 999px;
      border: 1px solid rgba(10,18,28,.10);
      opacity: .7;
    }
    .fin{
      position: absolute;
      bottom: 18px;
      left: 50%;
      transform: translateX(-50%);
      width: 34px;
      height: 26px;
      border-radius: 0 0 14px 14px;
      background: rgba(10,18,28,.14);
      border: 1px solid rgba(10,18,28,.16);
      box-shadow: inset 0 10px 18px rgba(0,0,0,.08);
      opacity: .9;
    }
    .stringer{
      position: absolute;
      top: 0; bottom: 0;
      left: 50%;
      width: 2px;
      background: rgba(10,18,28,.08);
      transform: translateX(-50%);
    }
    .bob{
      animation: bob 2.8s ease-in-out infinite;
    }
    @keyframes bob{
      0%,100%{ transform: translate(-50%,-50%) rotate(-12deg) translateY(0px); }
      50%{ transform: translate(-50%,-50%) rotate(-12deg) translateY(6px); }
    }

    /* Wax stamp near board */
    #stamp{
      position: fixed;
      left: 50%;
      top: calc(var(--pinY) + 36px);
      transform: translate(-50%, -50%);
      z-index: 11;
      pointer-events: none;
      opacity: 0;
    }
    .stampBubble{
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing: .12em;
      text-transform: uppercase;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(0,0,0,.20);
      border: 1px solid rgba(255,255,255,.20);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      transform: translateY(10px) scale(.98);
      box-shadow: 0 18px 44px rgba(0,0,0,.20);
    }
    #stamp.show{
      opacity: 1;
      animation: stampPop 900ms cubic-bezier(.2,.9,.2,1) both;
    }
    @keyframes stampPop{
      0%{ opacity: 0; transform: translate(-50%,-50%) translateY(12px) scale(.96); }
      35%{ opacity: 1; transform: translate(-50%,-50%) translateY(0px) scale(1.02); }
      100%{ opacity: 0; transform: translate(-50%,-50%) translateY(-10px) scale(1); }
    }

    /* Project-specific motifs */
    .watermarkHeat{
      position: absolute;
      inset: 0;
      background:
        radial-gradient(260px 220px at 74% 62%, rgba(255,90,90,.14), transparent 60%),
        radial-gradient(240px 210px at 62% 55%, rgba(255,200,90,.10), transparent 62%),
        radial-gradient(260px 230px at 70% 48%, rgba(55,190,255,.12), transparent 60%);
      opacity: .28;
      pointer-events: none;
      mix-blend-mode: multiply;
      filter: blur(.1px);
    }

    .polygonMotif{
      width: 100%;
      display: grid;
      place-items: center;
      padding: 10px 0 2px;
    }
    .polygonMotif svg{
      width: min(520px, 92%);
      height: auto;
      opacity: .88;
    }
    .polygonMotif .arrows{
      opacity: .45;
      transition: opacity 280ms ease;
    }
    .card.inFocus .polygonMotif .arrows{
      opacity: .95;
    }
    .card.inFocus .polygonMotif .pulsePath{
      animation: dash 2.6s linear infinite;
    }
    @keyframes dash{
      to{ stroke-dashoffset: -36; }
    }

    .duel{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      padding: 14px;
    }
    .duel .col{
      border-radius: 14px;
      border: 1px solid rgba(10,18,28,.10);
      background: rgba(255,255,255,.55);
      padding: 12px;
      min-height: 120px;
    }
    .duel .label{
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing: .08em;
      text-transform: uppercase;
      color: rgba(10,18,28,.55);
      margin-bottom: 8px;
    }
    .rating{
      height: 10px;
      border-radius: 999px;
      background: rgba(10,18,28,.08);
      overflow: hidden;
      border: 1px solid rgba(10,18,28,.10);
      margin-top: 8px;
    }
    .rating > div{
      width: 62%;
      height: 100%;
      background: linear-gradient(90deg, rgba(120,135,255,.65), rgba(45,220,197,.72));
    }

    .yearbook{
      padding: 14px;
      display: grid;
      gap: 10px;
    }
    .caption{
      border-radius: 14px;
      border: 1px dashed rgba(10,18,28,.18);
      padding: 12px;
      background: rgba(255,255,255,.55);
    }
    .caption .hand{
      font-family: "Bradley Hand", "Segoe Print", "Comic Sans MS", cursive;
      font-size: 16px;
      color: rgba(10,18,28,.76);
      letter-spacing: .01em;
    }
    .caption .baseline{
      margin-top: 6px;
      height: 1px;
      background: rgba(10,18,28,.10);
    }

    .recursive{
      display: grid;
      place-items: center;
      padding: 14px;
    }
    .recursive .frame{
      width: min(540px, 92%);
      aspect-ratio: 16/8;
      border-radius: 16px;
      border: 1px solid rgba(10,18,28,.14);
      background:
        radial-gradient(800px 260px at 50% 10%, rgba(17,183,199,.16), transparent 60%),
        linear-gradient(180deg, rgba(10,18,28,.06), rgba(10,18,28,.02));
      position: relative;
      overflow: hidden;
      box-shadow: inset 0 12px 24px rgba(0,0,0,.06);
    }
    .recursive .miniRoute{
      position: absolute;
      inset: 14px;
      border-radius: 12px;
      border: 1px solid rgba(10,18,28,.10);
      background:
        linear-gradient(90deg, transparent, rgba(155,240,255,.18), transparent);
      overflow: hidden;
    }
    .recursive .miniRoute svg{
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      opacity: .9;
    }

    /* Connect dock */
    .dock{
      padding: 18px 20px 24px;
      background:
        repeating-linear-gradient(90deg,
          rgba(120, 84, 44, .10) 0 14px,
          rgba(120, 84, 44, .07) 14px 28px),
        linear-gradient(180deg, rgba(255,255,255,.55), rgba(255,255,255,.40));
      border-top: 1px solid rgba(10,18,28,.10);
    }
    .dockGrid{
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
    }
    @media (max-width: 720px){
      .dockGrid{ grid-template-columns: 1fr; }
    }
    .iconBtn{
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 14px;
      border-radius: 16px;
      border: 1px solid rgba(10,18,28,.16);
      background: rgba(255,255,255,.78);
      color: rgba(10,18,28,.86);
      text-decoration: none;
      transition: transform 120ms ease, box-shadow 180ms ease;
      box-shadow: 0 12px 26px rgba(0,0,0,.10);
    }
    .iconBtn:hover{
      transform: translateY(-1px);
      box-shadow: 0 16px 32px rgba(0,0,0,.12);
    }
    .iconBtn:active{ transform: translateY(0px) scale(.99); }
    .iconBtn:focus-visible{
      outline: 3px solid var(--focus);
      outline-offset: 3px;
    }
    .iconBtn .i{
      width: 38px; height: 38px;
      border-radius: 14px;
      display: grid;
      place-items: center;
      border: 1px solid rgba(10,18,28,.12);
      background: rgba(10,18,28,.04);
    }
    .iconBtn .t{
      display: grid;
      gap: 2px;
    }
    .iconBtn .t strong{ font-size: 14px; letter-spacing: .01em; }
    .iconBtn .t span{
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing: .06em;
      color: rgba(10,18,28,.55);
      text-transform: uppercase;
    }

    /* Footer waterline */
    footer{
      position: relative;
      min-height: 52vh;
      padding: 48px 20px 64px;
      display: grid;
      align-content: end;
      gap: 12px;
      color: rgba(255,255,255,.78);
      z-index: 2;
    }
    footer .waterline{
      position: absolute;
      top: 22%;
      left: 0;
      width: 100%;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.20), transparent);
      opacity: .8;
    }
    footer .footInner{
      max-width: 980px;
      margin: 0 auto;
      width: 100%;
      display: grid;
      gap: 10px;
      text-align: center;
    }
    footer .credit{
      font-size: 13px;
      letter-spacing: .02em;
      opacity: .95;
    }
    footer .stopwatch{
      font-family: var(--mono);
      font-size: 13px;
      letter-spacing: .08em;
      color: rgba(255,255,255,.84);
    }

    /* Links (within cards) */
    .linkList{
      display: grid;
      gap: 8px;
      padding-left: 0;
      margin: 0;
      list-style: none;
    }
    .linkList a{
      color: rgba(10,18,28,.86);
      text-decoration: none;
      border-bottom: 1px solid rgba(10,18,28,.20);
    }
    .linkList a:hover{ border-bottom-color: rgba(10,18,28,.55); }
    .source{
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing: .08em;
      text-transform: uppercase;
      color: rgba(10,18,28,.55);
      margin-right: 8px;
    }

    /* Accessibility: clear focus rings for all */
    a, button{ outline: none; }
    a:focus-visible, button:focus-visible{
      outline: 3px solid var(--focus);
      outline-offset: 3px;
    }

    /* Small helper */
    .srOnly{
      position: absolute !important;
      height: 1px; width: 1px;
      overflow: hidden;
      clip: rect(1px,1px,1px,1px);
      white-space: nowrap;
    }
  </style>
</head>

<body>
  <div class="ocean" aria-hidden="true">
    <canvas id="oceanCanvas"></canvas>
    <div class="seaMist"></div>
  </div>

  <a class="return" href="#top" id="returnBtn" aria-label="Return to Horizon (scroll to top)">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <path d="M12 19V6" stroke="rgba(255,255,255,.86)" stroke-width="2" stroke-linecap="round"/>
      <path d="M7 10l5-5 5 5" stroke="rgba(255,255,255,.86)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    Return to Horizon
  </a>

  <!-- Pinned surfboard -->
  <div id="board" class="bob" aria-hidden="true">
    <div class="boardWrap">
      <div class="stringer"></div>
      <div class="fin"></div>
    </div>
  </div>

  <!-- Wax stamp -->
  <div id="stamp" aria-hidden="true"><div class="stampBubble" id="stampText">Python</div></div>

  <div id="app">
    <main id="voyage">
      <svg id="routeLayer" aria-hidden="true"></svg>
      <div id="nodesLayer" aria-hidden="true"></div>

      <header class="hero" id="top">
        <div class="sunHalo"></div>
        <div class="horizon"></div>

        <div class="heroStack">
          <h1>Geva Kipper</h1>
          <p class="oneLine">Currently building at Google.</p>

          <div class="pillRow" role="note" aria-label="Daily redesign note and seed">
            <span class="sub">This portfolio is re-designed daily by AI—ever-changing by design.</span>
            <span class="seed" id="seedLabel">Seed: —</span>
          </div>
        </div>

        <div class="invite" aria-hidden="true">
          <span class="tick"></span>
          <span>Scroll to paddle</span>
        </div>
      </header>

      <!-- Stops / cards (content is in-flow; nodes/path are overlaid and computed from these) -->

      <section class="stop" id="s1" data-side="left"
        data-tech="Python"
        data-icon="python"
        data-unlock="Compression + Music Analytics">
        <div class="sticky">
          <article class="card" data-accent="seafoam" aria-labelledby="t1">
            <div class="drip"></div>
            <div class="accentBar"></div>
            <div class="edge" aria-hidden="true"></div>
            <div class="wax">
              <h2 id="t1">GlglStats</h2>
              <div class="meta">Unlocked • 01</div>
            </div>
            <div class="body">
              <p class="desc">
                A Python deep-dive into <strong>LZ77-style compression</strong> and Israeli pop-chart repetitiveness:
                I measure repetition structure, then visualize repetition-patterns as a compact, readable “song fingerprint.”
              </p>

              <div class="chips" aria-label="Tech badge line">
                <span class="chip">Python</span>
                <span class="chip">Compression (LZ77)</span>
                <span class="chip">Visualization</span>
                <span class="chip">Music Analytics</span>
              </div>

              <div class="ctaRow" aria-label="Actions">
                <a class="btn primary" href="https://glglstats.geekip.dev" target="_blank" rel="noreferrer">
                  Visit glglstats.geekip.dev <span class="arrow">↗</span>
                </a>
                <a class="btn secondary" href="https://www.youtube.com/watch?v=jrKAtOsj1Lo" target="_blank" rel="noreferrer">
                  Watch PyData TLV talk <span class="arrow">↗</span>
                </a>
              </div>

              <div class="porthole" aria-label="Video preview (loads on click)">
                <div class="thumb" id="ytThumb">
                  <button type="button" id="loadYt">Load video preview</button>
                  <div class="srOnly">Loads an embedded YouTube player</div>
                </div>
              </div>
            </div>
          </article>
        </div>
      </section>

      <section class="stop" id="s2" data-side="right"
        data-tech="Web"
        data-icon="web"
        data-unlock="Scraping + Heatmaps">
        <div class="sticky">
          <article class="card" data-accent="coral" aria-labelledby="t2">
            <div class="drip"></div>
            <div class="accentBar"></div>
            <div class="edge" aria-hidden="true"></div>
            <div class="watermarkHeat" aria-hidden="true"></div>

            <div class="wax">
              <h2 id="t2">Ahuzat Dibuk</h2>
              <div class="meta">Unlocked • 02</div>
            </div>

            <div class="body">
              <p class="desc">
                A scraping + statistics project tracking occupancy in Tel‑Aviv parking lots, turning raw availability signals into
                resident-friendly summaries and <strong>heat-map</strong> insights.
              </p>

              <div class="chips" aria-label="Tech badge line">
                <span class="chip">Scraping</span>
                <span class="chip">Data Pipeline</span>
                <span class="chip">Occupancy Stats</span>
                <span class="chip">Heatmaps</span>
              </div>

              <ul class="linkList" aria-label="Publications and mentions">
                <li><span class="source">13tv</span><a href="https://13tv.co.il/item/news/domestic/internal/parking-902956407/" target="_blank" rel="noreferrer">Media mention</a></li>
                <li><span class="source">mako</span><a href="https://www.mako.co.il/nexter-news/Article-ae43964b891bf71027.htm" target="_blank" rel="noreferrer">Media mention</a></li>
                <li><span class="source">Facebook</span><a href="https://www.facebook.com/groups/secrettelaviv/posts/10159636301195943" target="_blank" rel="noreferrer">Group post</a></li>
              </ul>

              <div class="porthole" aria-label="Heat-map motif window">
                <div class="thumb" style="min-height:220px;background:
                  radial-gradient(240px 180px at 20% 30%, rgba(255,90,90,.26), transparent 62%),
                  radial-gradient(280px 210px at 55% 45%, rgba(255,200,90,.20), transparent 66%),
                  radial-gradient(260px 220px at 75% 58%, rgba(55,190,255,.22), transparent 62%),
                  linear-gradient(180deg, rgba(0,0,0,.05), rgba(0,0,0,.02));">
                  <div style="font-family:var(--mono);letter-spacing:.08em;text-transform:uppercase;font-size:12px;opacity:.72;">
                    heat‑map watermark
                  </div>
                </div>
              </div>
            </div>
          </article>
        </div>
      </section>

      <section class="stop" id="s3" data-side="left"
        data-tech="C++"
        data-icon="cpp"
        data-unlock="Computational Geometry">
        <div class="sticky">
          <article class="card" data-accent="amber" aria-labelledby="t3">
            <div class="drip"></div>
            <div class="accentBar"></div>
            <div class="edge" aria-hidden="true"></div>

            <div class="wax">
              <h2 id="t3">2D Part Orienting</h2>
              <div class="meta">Unlocked • 03</div>
            </div>

            <div class="body">
              <p class="desc">
                A C++ implementation and open-source computational geometry contribution:
                the <strong>push plan</strong> algorithm for orienting polygons (and reasoning about feasible motion under constraints).
              </p>

              <div class="chips" aria-label="Tech badge line">
                <span class="chip">C++</span>
                <span class="chip">Computational Geometry</span>
                <span class="chip">Open Source</span>
                <span class="chip">Algorithms</span>
              </div>

              <div class="ctaRow" aria-label="Actions">
                <a class="btn primary" href="https://www.cgl.cs.tau.ac.il/projects/2d-part-orienting/" target="_blank" rel="noreferrer">
                  TAU CGL project page <span class="arrow">↗</span>
                </a>
              </div>

              <div class="porthole" aria-label="Polygon + push-plan motif">
                <div class="polygonMotif">
                  <svg viewBox="0 0 700 260" role="img" aria-label="Line-art polygon with directional push arrows">
                    <defs>
                      <marker id="arr" markerWidth="10" markerHeight="10" refX="6" refY="3" orient="auto">
                        <path d="M0,0 L6,3 L0,6 Z" fill="rgba(10,18,28,.55)"></path>
                      </marker>
                    </defs>
                    <rect x="22" y="22" width="656" height="216" rx="18" fill="rgba(255,255,255,.35)" stroke="rgba(10,18,28,.08)"/>
                    <path d="M170,170 L240,80 L360,105 L430,70 L520,135 L445,195 L300,205 Z"
                          fill="rgba(255,191,90,.12)" stroke="rgba(10,18,28,.42)" stroke-width="2"/>
                    <path class="pulsePath" d="M120,190 C200,160 240,110 300,104 C360,98 410,82 470,96 C530,110 560,140 600,160"
                          fill="none" stroke="rgba(10,18,28,.40)" stroke-width="2" stroke-dasharray="7 10" stroke-dashoffset="0"/>
                    <g class="arrows">
                      <path d="M130,95 L210,95" stroke="rgba(10,18,28,.55)" stroke-width="2" marker-end="url(#arr)"/>
                      <path d="M520,190 L440,190" stroke="rgba(10,18,28,.55)" stroke-width="2" marker-end="url(#arr)"/>
                      <path d="M360,48 L360,88" stroke="rgba(10,18,28,.55)" stroke-width="2" marker-end="url(#arr)"/>
                    </g>
                  </svg>
                </div>
              </div>
            </div>
          </article>
        </div>
      </section>

      <!-- Fork-feel: a nearby node will appear around here, then reconverge (visual only). -->
      <section class="stop" id="s4" data-side="right"
        data-tech="LLMs"
        data-icon="llm"
        data-unlock="LLM Arenas + Ranking">
        <div class="sticky">
          <article class="card" data-accent="indigo" aria-labelledby="t4">
            <div class="drip"></div>
            <div class="accentBar"></div>
            <div class="edge" aria-hidden="true"></div>

            <div class="wax">
              <h2 id="t4">The Turing Jest</h2>
              <div class="meta">Unlocked • 04</div>
            </div>

            <div class="body">
              <p class="desc">
                An arena where LLMs compete at making and explaining puns, rated by users—an
                understated, LMSYS-like loop for preference data (but for jokes).
              </p>

              <div class="chips" aria-label="Tech badge line">
                <span class="chip">LLMs</span>
                <span class="chip">Ranking</span>
                <span class="chip">Web App</span>
                <span class="chip">UX Experiments</span>
              </div>

              <div class="ctaRow" aria-label="Actions">
                <a class="btn primary" href="https://jest.geekip.dev" target="_blank" rel="noreferrer">
                  jest.geekip.dev <span class="arrow">↗</span>
                </a>
              </div>

              <div class="porthole" aria-label="Duel motif">
                <div class="duel">
                  <div class="col">
                    <div class="label">Model A</div>
                    <div style="color:rgba(10,18,28,.70);font-size:14px;line-height:1.45;">
                      “I tried to write a pun about entropy…<br/>but it kept falling apart.”
                    </div>
                    <div class="rating" aria-hidden="true"><div></div></div>
                  </div>
                  <div class="col">
                    <div class="label">Model B</div>
                    <div style="color:rgba(10,18,28,.70);font-size:14px;line-height:1.45;">
                      “My joke about compilers got rejected—<br/>too many errors.”
                    </div>
                    <div class="rating" aria-hidden="true"><div style="width:38%"></div></div>
                  </div>
                </div>
              </div>

            </div>
          </article>
        </div>
      </section>

      <section class="stop" id="s5" data-side="left"
        data-tech="Chrome"
        data-icon="chrome"
        data-unlock="Extensions + LLM Writing">
        <div class="sticky">
          <article class="card" data-accent="seafoam" aria-labelledby="t5">
            <div class="drip"></div>
            <div class="accentBar"></div>
            <div class="edge" aria-hidden="true"></div>

            <div class="wax">
              <h2 id="t5">Rhymes of Israel</h2>
              <div class="meta">Unlocked • 05</div>
            </div>

            <div class="body">
              <p class="desc">
                A Chrome extension that rewrites Israeli news headlines into comedic rhymes in a yearbook style,
                using an LLM—light touch, strong typography, and clear “before → after” delight.
              </p>

              <div class="chips" aria-label="Tech badge line">
                <span class="chip">Chrome Extension</span>
                <span class="chip">LLM</span>
                <span class="chip">Headline Rewriting</span>
              </div>

              <div class="ctaRow" aria-label="Actions">
                <a class="btn primary" href="https://chromewebstore.google.com/detail/eainginjgdkpgolpjniijdihfbeeeklb" target="_blank" rel="noreferrer">
                  Chrome Web Store install <span class="arrow">↗</span>
                </a>
              </div>

              <div class="porthole" aria-label="Yearbook caption motif">
                <div class="yearbook">
                  <div class="caption">
                    <div class="hand">“Breaking news? Make it *making rhymes*.”</div>
                    <div class="baseline"></div>
                  </div>
                  <div style="font-family:var(--mono);letter-spacing:.08em;text-transform:uppercase;font-size:12px;opacity:.62;">
                    yearbook strip motif
                  </div>
                </div>
              </div>

            </div>
          </article>
        </div>
      </section>

      <section class="stop" id="s6" data-side="right"
        data-tech="Data Viz"
        data-icon="dataviz"
        data-unlock="Self‑Reference">
        <div class="sticky">
          <article class="card" data-accent="indigo" aria-labelledby="t6">
            <div class="drip"></div>
            <div class="accentBar"></div>
            <div class="edge" aria-hidden="true"></div>

            <div class="wax">
              <h2 id="t6">Portfolio Website (Meta)</h2>
              <div class="meta">Unlocked • 06</div>
            </div>

            <div class="body">
              <p class="desc">
                This very single-page <strong>surfboard skill tree</strong> is itself a project: scroll = distance paddled,
                a branching route, and progressive “unlocks” as you travel.
              </p>

              <div class="chips" aria-label="Tech badge line">
                <span class="chip">Single-file SPA</span>
                <span class="chip">Motion Design</span>
                <span class="chip">Accessibility</span>
                <span class="chip">Procedural Canvas</span>
              </div>

              <div class="ctaRow" aria-label="Actions">
                <a class="btn primary" href="https://geekip.dev" target="_blank" rel="noreferrer">
                  geekip.dev <span class="arrow">↗</span>
                </a>
              </div>

              <div class="porthole" aria-label="Recursive frame motif">
                <div class="recursive">
                  <div class="frame">
                    <div class="miniRoute">
                      <svg viewBox="0 0 1000 500" preserveAspectRatio="none" aria-hidden="true">
                        <path d="M120,410 C260,320 320,280 430,260 C560,236 590,176 710,156 C820,136 870,92 910,70"
                              fill="none" stroke="rgba(155,240,255,.35)" stroke-width="5" stroke-linecap="round"/>
                        <circle cx="120" cy="410" r="14" fill="rgba(255,255,255,.50)" stroke="rgba(10,18,28,.12)"/>
                        <circle cx="430" cy="260" r="14" fill="rgba(255,255,255,.50)" stroke="rgba(10,18,28,.12)"/>
                        <circle cx="710" cy="156" r="14" fill="rgba(255,255,255,.50)" stroke="rgba(10,18,28,.12)"/>
                        <circle cx="910" cy="70" r="14" fill="rgba(255,255,255,.50)" stroke="rgba(10,18,28,.12)"/>
                      </svg>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </article>
        </div>
      </section>

      <section class="stop" id="s7" data-side="left"
        data-tech="Web"
        data-icon="web"
        data-unlock="Arrival / Dock">
        <div class="sticky">
          <article class="card unlocked" data-accent="amber" aria-labelledby="t7" style="opacity:1;transform:none;">
            <div class="accentBar"></div>
            <div class="edge" aria-hidden="true"></div>

            <div class="wax">
              <h2 id="t7">Connect / Links</h2>
              <div class="meta">Dock</div>
            </div>

            <div class="dock">
              <div class="dockGrid" role="navigation" aria-label="Social links">
                <a class="iconBtn" href="https://github.com/gevak" target="_blank" rel="noreferrer">
                  <span class="i" aria-hidden="true">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                      <path d="M12 2C6.48 2 2 6.58 2 12.24c0 4.52 2.87 8.35 6.84 9.7.5.1.68-.22.68-.48l-.01-1.68c-2.78.62-3.37-1.1-3.37-1.1-.45-1.18-1.1-1.49-1.1-1.49-.9-.63.07-.62.07-.62 1 .07 1.53 1.05 1.53 1.05.9 1.58 2.36 1.12 2.94.86.09-.67.35-1.12.63-1.38-2.22-.26-4.56-1.14-4.56-5.08 0-1.12.39-2.04 1.03-2.76-.1-.26-.45-1.31.1-2.73 0 0 .84-.27 2.75 1.05.8-.23 1.66-.34 2.52-.34.86 0 1.72.12 2.52.34 1.9-1.32 2.74-1.05 2.74-1.05.55 1.42.2 2.47.1 2.73.64.72 1.03 1.64 1.03 2.76 0 3.95-2.35 4.82-4.58 5.08.36.32.68.95.68 1.92l-.01 2.84c0 .27.18.59.69.48A10.27 10.27 0 0 0 22 12.24C22 6.58 17.52 2 12 2Z" fill="rgba(10,18,28,.78)"/>
                    </svg>
                  </span>
                  <span class="t"><strong>GitHub</strong><span>github.com/gevak</span></span>
                </a>

                <a class="iconBtn" href="https://linkedin.com/in/gevakip" target="_blank" rel="noreferrer">
                  <span class="i" aria-hidden="true">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                      <path d="M6.94 6.5A2.23 2.23 0 1 1 6.94 2a2.23 2.23 0 0 1 0 4.5ZM3.9 22V8.2h6.1V22H3.9Zm9.2 0V8.2h5.85v1.88h.08c.82-1.46 2.83-3 5.83-3 6.24 0 7.4 4.04 7.4 9.28V22h-6.1v-5.18c0-1.24-.03-2.84-1.8-2.84-1.8 0-2.08 1.36-2.08 2.75V22h-6.18Z" fill="rgba(10,18,28,.78)"/>
                    </svg>
                  </span>
                  <span class="t"><strong>LinkedIn</strong><span>linkedin.com/in/gevakip</span></span>
                </a>

                <a class="iconBtn" href="https://facebook.com/geva.kipper" target="_blank" rel="noreferrer">
                  <span class="i" aria-hidden="true">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                      <path d="M13.5 22v-8h2.7l.4-3H13.5V9.1c0-.87.25-1.46 1.54-1.46h1.64V5c-.28-.04-1.25-.12-2.38-.12-2.36 0-3.98 1.4-3.98 4v2.12H8.9v3h2.42v8h2.18Z" fill="rgba(10,18,28,.78)"/>
                    </svg>
                  </span>
                  <span class="t"><strong>Facebook</strong><span>facebook.com/geva.kipper</span></span>
                </a>
              </div>
            </div>
          </article>
        </div>
      </section>

      <footer>
        <div class="waterline" aria-hidden="true"></div>
        <div class="footInner">
          <div class="credit">Created by ChatGPT (OpenAI)</div>
          <div class="stopwatch" id="stopwatch">Time since 2025-12-23 01:10:40: 00:00:00</div>
        </div>
      </footer>
    </main>
  </div>

  <script>
    (() => {
      const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      /* ---------- Daily seed (deterministic by date) ---------- */
      function fnv1a32(str){
        let h = 0x811c9dc5;
        for(let i=0;i<str.length;i++){
          h ^= str.charCodeAt(i);
          h = Math.imul(h, 0x01000193);
        }
        return (h >>> 0);
      }
      function hex(n, len=8){ return n.toString(16).padStart(len,'0'); }
      const now = new Date();
      const dayKey = `${now.getUTCFullYear()}-${String(now.getUTCMonth()+1).padStart(2,'0')}-${String(now.getUTCDate()).padStart(2,'0')}`;
      const seed = fnv1a32('geekip.dev|' + dayKey);
      document.getElementById('seedLabel').textContent = `Daily Redesign Seed: ${hex(seed).slice(0,8)}`;

      /* ---------- YouTube lazy load ---------- */
      const ytBtn = document.getElementById('loadYt');
      const ytThumb = document.getElementById('ytThumb');
      if(ytBtn && ytThumb){
        ytBtn.addEventListener('click', () => {
          const iframe = document.createElement('iframe');
          iframe.title = 'GlglStats — PyData TLV talk (YouTube)';
          iframe.loading = 'lazy';
          iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share';
          iframe.referrerPolicy = 'strict-origin-when-cross-origin';
          iframe.allowFullscreen = true;
          iframe.src = 'https://www.youtube-nocookie.com/embed/jrKAtOsj1Lo?rel=0';
          ytThumb.replaceWith(iframe);
        });
      }

      /* ---------- Stopwatch ---------- */
      const start = new Date('2025-12-23T01:10:40');
      const sw = document.getElementById('stopwatch');
      function pad2(n){ return String(n).padStart(2,'0'); }
      function tickStopwatch(){
        const diff = Math.max(0, Date.now() - start.getTime());
        const s = Math.floor(diff/1000);
        const hh = Math.floor(s/3600);
        const mm = Math.floor((s%3600)/60);
        const ss = s%60;
        sw.textContent = `Time since 2025-12-23 01:10:40: ${pad2(hh)}:${pad2(mm)}:${pad2(ss)}`;
      }
      tickStopwatch();
      setInterval(tickStopwatch, 250);

      /* ---------- Ocean canvas: waves + foam particles ---------- */
      const canvas = document.getElementById('oceanCanvas');
      const ctx = canvas.getContext('2d', { alpha: true });

      function resizeCanvas(){
        const dpr = Math.min(2, window.devicePixelRatio || 1);
        canvas.width = Math.floor(innerWidth * dpr);
        canvas.height = Math.floor(innerHeight * dpr);
        canvas.style.width = innerWidth + 'px';
        canvas.style.height = innerHeight + 'px';
        ctx.setTransform(dpr,0,0,dpr,0,0);
      }
      resizeCanvas();
      addEventListener('resize', resizeCanvas, { passive: true });

      // seeded pseudo random
      function mulberry32(a){
        return function(){
          let t = a += 0x6D2B79F5;
          t = Math.imul(t ^ (t >>> 15), t | 1);
          t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
          return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
        }
      }
      const rand = mulberry32(seed);

      const foam = Array.from({length: prefersReduced ? 0 : 70}, () => ({
        x: rand() * innerWidth,
        y: rand() * innerHeight,
        r: 0.8 + rand() * 2.2,
        vx: 10 + rand() * 26,
        a: 0.04 + rand() * 0.10
      }));

      function waveY(x, t, band){
        // layered sine with slight warble
        const k1 = 0.005 + band * 0.0008;
        const k2 = 0.011 + band * 0.0012;
        return Math.sin(x*k1 + t*(0.35 + band*0.06)) * (10 + band*5)
             + Math.sin(x*k2 - t*(0.22 + band*0.04)) * (5 + band*2);
      }

      let t0 = performance.now();
      function drawOcean(){
        const t = (performance.now() - t0) / 1000;

        ctx.clearRect(0,0,innerWidth,innerHeight);

        // Subtle procedural wave lines
        ctx.save();
        ctx.globalCompositeOperation = 'screen';
        for(let band=0; band<6; band++){
          const yBase = innerHeight * (0.20 + band*0.14);
          ctx.beginPath();
          for(let x=0; x<=innerWidth; x+=10){
            const y = yBase + waveY(x, t, band) * 0.55;
            if(x===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
          }
          ctx.strokeStyle = `rgba(180, 245, 255, ${0.03 + band*0.012})`;
          ctx.lineWidth = 1;
          ctx.stroke();
        }
        ctx.restore();

        // Foam particles drifting sideways
        if(!prefersReduced){
          for(const p of foam){
            p.x += p.vx * 0.016;
            if(p.x > innerWidth + 20) p.x = -20;
            // gentle vertical bob
            p.y += Math.sin(t*0.8 + p.x*0.01) * 0.10;

            ctx.beginPath();
            ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
            ctx.fillStyle = `rgba(255,255,255, ${p.a})`;
            ctx.fill();
          }
        }

        if(!prefersReduced) requestAnimationFrame(drawOcean);
      }
      if(!prefersReduced) requestAnimationFrame(drawOcean);

      /* ---------- Skill tree overlay (nodes + route + board glide) ---------- */
      const stops = [...document.querySelectorAll('section.stop')];
      const nodesLayer = document.getElementById('nodesLayer');
      const routeLayer = document.getElementById('routeLayer');
      const board = document.getElementById('board');
      const stamp = document.getElementById('stamp');
      const stampText = document.getElementById('stampText');

      // icons (wax-stamp-ish, minimal)
      function iconSVG(type){
        const stroke = 'rgba(255,255,255,.92)';
        const fill = 'rgba(255,255,255,.92)';
        switch(type){
          case 'python':
            return `<svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M8 8c0-2 1.6-3.5 3.6-3.5H15c1.7 0 3 1.3 3 3v3.3c0 1.7-1.3 3.2-3.2 3.2H11.5"
                stroke="${stroke}" stroke-width="2" stroke-linecap="round"/>
              <path d="M16 16c0 2-1.6 3.5-3.6 3.5H9c-1.7 0-3-1.3-3-3v-3.3c0-1.7 1.3-3.2 3.2-3.2H12.5"
                stroke="${stroke}" stroke-width="2" stroke-linecap="round"/>
              <circle cx="14.8" cy="6.8" r="1" fill="${fill}"/>
              <circle cx="9.2" cy="17.2" r="1" fill="${fill}"/>
            </svg>`;
          case 'cpp':
            return `<svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M10 8.2c-2.4 0-4.4 1.9-4.4 4.3s2 4.3 4.4 4.3c1.2 0 2.3-.4 3.1-1.2"
                stroke="${stroke}" stroke-width="2" stroke-linecap="round"/>
              <path d="M14.8 10.2v4.6M17.3 10.2v4.6M13.3 12.5h5.6"
                stroke="${stroke}" stroke-width="2" stroke-linecap="round"/>
            </svg>`;
          case 'llm':
            return `<svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M7 8.5a4.5 4.5 0 0 1 9 0V13a3.5 3.5 0 0 1-3.5 3.5H9.5A3.5 3.5 0 0 1 6 13V9.5"
                stroke="${stroke}" stroke-width="2" stroke-linecap="round"/>
              <path d="M9 18.5v2M15 18.5v2" stroke="${stroke}" stroke-width="2" stroke-linecap="round"/>
              <path d="M9.2 12h.01M12 12h.01M14.8 12h.01" stroke="${stroke}" stroke-width="3" stroke-linecap="round"/>
            </svg>`;
          case 'chrome':
            return `<svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <circle cx="12" cy="12" r="3.2" stroke="${stroke}" stroke-width="2"/>
              <path d="M12 2a10 10 0 0 1 8.66 5H12" stroke="${stroke}" stroke-width="2" stroke-linecap="round"/>
              <path d="M3.1 7A10 10 0 0 0 12 22l4.3-7.4" stroke="${stroke}" stroke-width="2" stroke-linecap="round"/>
              <path d="M20.7 7.2A10 10 0 0 1 12 22" stroke="${stroke}" stroke-width="2" stroke-linecap="round" opacity=".4"/>
            </svg>`;
          case 'dataviz':
            return `<svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M6 18V9M11 18V6M16 18v-7M21 18H3"
                stroke="${stroke}" stroke-width="2" stroke-linecap="round"/>
              <circle cx="6" cy="9" r="1" fill="${fill}"/>
              <circle cx="11" cy="6" r="1" fill="${fill}"/>
              <circle cx="16" cy="11" r="1" fill="${fill}"/>
            </svg>`;
          case 'web':
          default:
            return `<svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M3 12a9 9 0 0 0 18 0 9 9 0 0 0-18 0Z" stroke="${stroke}" stroke-width="2"/>
              <path d="M3 12h18" stroke="${stroke}" stroke-width="2" stroke-linecap="round"/>
              <path d="M12 3c2.8 3 2.8 15 0 18" stroke="${stroke}" stroke-width="2" stroke-linecap="round"/>
            </svg>`;
        }
      }

      // Define a branching "skill tree" x-offset plan (world coordinates).
      // We compute node y from section content and apply these x offsets for a winding path + fork.
      // Fork around nodes 3-4: create an extra "phantom" node near node 4 to suggest a branch, then reconverge.
      const xPlan = [
        -90,   // s1
        120,   // s2
        -140,  // s3
        140,   // s4
        -120,  // s5
        110,   // s6
        -40    // s7
      ];

      // Create overlay node elements + unlock labels
      const nodeEls = [];
      const labelEls = [];
      const unlocked = new Set();

      // Phantom fork nodes (visual only): [afterIndex, xOffset, label]
      const forkNodes = [
        { after: 2, x: 40, label: 'Fork: Tools ↔ Models', icon: 'dataviz' },   // near between s3 and s4
        { after: 3, x: -20, label: 'Rejoin: Main Current', icon: 'web' }       // near after s4
      ];
      const phantomEls = [];

      function makeNode(iconType){
        const el = document.createElement('div');
        el.className = 'node locked';
        el.innerHTML = iconSVG(iconType);
        return el;
      }

      function makeUnlockLabel(text){
        const el = document.createElement('div');
        el.className = 'unlockLabel';
        el.textContent = `Unlocked: ${text}`;
        return el;
      }

      function layoutTree(){
        // Clear route svg
        routeLayer.innerHTML = '';
        routeLayer.setAttribute('width', String(document.documentElement.clientWidth));
        routeLayer.setAttribute('height', String(document.body.scrollHeight));

        // Build nodes if not built
        if(nodeEls.length === 0){
          stops.forEach((s) => {
            const n = makeNode(s.dataset.icon || 'web');
            nodesLayer.appendChild(n);
            nodeEls.push(n);

            const lab = makeUnlockLabel(s.dataset.unlock || '—');
            nodesLayer.appendChild(lab);
            labelEls.push(lab);
          });

          // phantom nodes
          forkNodes.forEach(fn => {
            const n = makeNode(fn.icon);
            n.classList.add('locked');
            n.style.opacity = '.32';
            nodesLayer.appendChild(n);

            const lab = document.createElement('div');
            lab.className = 'unlockLabel';
            lab.textContent = fn.label;
            lab.style.opacity = '0';
            nodesLayer.appendChild(lab);

            phantomEls.push({ node:n, label:lab, ...fn });
          });
        }

        const worldW = document.documentElement.clientWidth;
        const centerX = worldW * 0.5;

        // Compute y positions at a point inside each stop (near where the card appears)
        const points = stops.map((s, i) => {
          const rect = s.getBoundingClientRect();
          const top = s.offsetTop;
          const y = top + Math.min(s.clientHeight * 0.42, 480); // buoy around upper half of the stop
          const x = centerX + xPlan[i];
          return { x, y };
        });

        // Position nodes + labels
        points.forEach((p, i) => {
          const n = nodeEls[i];
          const lab = labelEls[i];

          n.style.left = `${p.x}px`;
          n.style.top = `${p.y}px`;

          const side = (stops[i].dataset.side || 'left') === 'left' ? -1 : 1;
          lab.style.left = `${p.x + side * 170}px`;
          lab.style.top = `${p.y - 10}px`;
        });

        // Place phantom fork nodes between specific points
        phantomEls.forEach(ph => {
          const a = points[ph.after];
          const b = points[Math.min(points.length-1, ph.after+1)];
          const y = (a.y + b.y) * 0.5;
          const x = centerX + ph.x + (ph.after % 2 ? 70 : -70);

          ph.node.style.left = `${x}px`;
          ph.node.style.top = `${y}px`;

          ph.label.style.left = `${x + 160}px`;
          ph.label.style.top = `${y - 10}px`;
        });

        // Draw route (smooth-ish) with SVG paths
        const svgNS = 'http://www.w3.org/2000/svg';
        const path = document.createElementNS(svgNS, 'path');
        const glow = document.createElementNS(svgNS, 'path');

        function dFromPoints(pts){
          let d = `M ${pts[0].x} ${pts[0].y}`;
          for(let i=1;i<pts.length;i++){
            const p0 = pts[i-1];
            const p1 = pts[i];
            const cx = (p0.x + p1.x) / 2;
            d += ` Q ${cx} ${p0.y} ${p1.x} ${p1.y}`;
          }
          return d;
        }

        const dMain = dFromPoints(points);
        glow.setAttribute('d', dMain);
        glow.setAttribute('fill', 'none');
        glow.setAttribute('stroke', 'rgba(155,240,255,.18)');
        glow.setAttribute('stroke-width', '9');
        glow.setAttribute('stroke-linecap', 'round');
        glow.setAttribute('stroke-linejoin', 'round');
        glow.setAttribute('class', 'glow');

        path.setAttribute('d', dMain);
        path.setAttribute('fill', 'none');
        path.setAttribute('stroke', 'rgba(155,240,255,.22)');
        path.setAttribute('stroke-width', '2');
        path.setAttribute('stroke-linecap', 'round');
        path.setAttribute('stroke-linejoin', 'round');
        path.setAttribute('opacity', '.95');

        routeLayer.appendChild(glow);
        routeLayer.appendChild(path);

        // Draw fork branches (visual)
        function addBranch(fromIdx, ph, toIdx){
          const a = points[fromIdx];
          const b = { x: parseFloat(ph.node.style.left), y: parseFloat(ph.node.style.top) };
          const c = points[toIdx];

          const br = document.createElementNS(svgNS,'path');
          const d = `M ${a.x} ${a.y} Q ${(a.x+b.x)/2} ${(a.y+b.y)/2 - 60} ${b.x} ${b.y}
                     Q ${(b.x+c.x)/2} ${(b.y+c.y)/2 + 30} ${c.x} ${c.y}`;
          br.setAttribute('d', d);
          br.setAttribute('fill','none');
          br.setAttribute('stroke','rgba(155,240,255,.12)');
          br.setAttribute('stroke-width','2');
          br.setAttribute('stroke-linecap','round');
          br.setAttribute('stroke-linejoin','round');
          routeLayer.appendChild(br);
        }
        if(phantomEls.length >= 2){
          addBranch(2, phantomEls[0], 3);
          addBranch(3, phantomEls[1], 4);
        }

        return points;
      }

      let points = layoutTree();
      addEventListener('resize', () => { points = layoutTree(); }, { passive: true });

      /* ---------- Unlock + in-focus observers ---------- */
      const cards = stops.map(s => s.querySelector('.card')).filter(Boolean);

      // Reveal card on unlock (board passing buoy), but also pre-unlock if user scrolls fast.
      function unlockIndex(i){
        if(unlocked.has(i)) return;
        unlocked.add(i);

        const node = nodeEls[i];
        const label = labelEls[i];
        const card = cards[i];
        if(node){ node.classList.remove('locked'); node.classList.add('unlocked'); }
        if(label){
          label.classList.add('show');
          // hide label after a bit (leave subtle memory)
          setTimeout(() => label.classList.remove('show'), 1800);
        }
        if(card){ card.classList.add('unlocked'); }

        // wax stamp near board
        const tech = stops[i].dataset.tech || 'Unlocked';
        stampText.textContent = tech;
        stamp.classList.remove('show');
        // reflow for restart
        void stamp.offsetWidth;
        stamp.classList.add('show');
      }

      // In-focus highlight for subtle motifs
      const focusObs = new IntersectionObserver((entries) => {
        for(const e of entries){
          const card = e.target;
          if(e.isIntersecting) card.classList.add('inFocus');
          else card.classList.remove('inFocus');
        }
      }, { threshold: 0.55 });

      cards.forEach(c => focusObs.observe(c));

      /* ---------- Board glide along path based on scroll ---------- */
      function clamp(n,a,b){ return Math.max(a, Math.min(b, n)); }
      function lerp(a,b,t){ return a + (b-a)*t; }

      function updateBoard(){
        // Determine current progress by finding where a "travelY" in world maps to points
        const scrollY = window.scrollY;
        // board's "world Y" is where the pinned board is in the document
        const boardWorldY = scrollY + (window.innerHeight * 0.78);

        // Near/pulse states and unlock states
        for(let i=0;i<points.length;i++){
          const dy = Math.abs(points[i].y - boardWorldY);
          const n = nodeEls[i];
          if(!n) continue;
          if(unlocked.has(i)){
            n.classList.remove('near');
          }else{
            if(dy < 240) n.classList.add('near');
            else n.classList.remove('near');

            // unlock threshold
            if(points[i].y < boardWorldY + 40) unlockIndex(i);
          }
        }

        // phantom label gentle show when near
        for(const ph of phantomEls){
          const y = parseFloat(ph.node.style.top);
          const dy = Math.abs(y - boardWorldY);
          if(dy < 220 && !prefersReduced){
            ph.label.classList.add('show');
            setTimeout(() => ph.label.classList.remove('show'), 900);
          }
        }

        // Interpolate board x between nearest two points by y
        let idx = 0;
        while(idx < points.length-1 && points[idx+1].y < boardWorldY) idx++;
        const p0 = points[clamp(idx,0,points.length-1)];
        const p1 = points[clamp(idx+1,0,points.length-1)];
        const denom = Math.max(1, (p1.y - p0.y));
        const t = clamp((boardWorldY - p0.y) / denom, 0, 1);

        const x = lerp(p0.x, p1.x, t);
        // slight angle based on local direction
        const dx = p1.x - p0.x;
        const angle = clamp(dx / 18, -18, 18);

        if(prefersReduced){
          board.style.left = '50%';
          board.style.transform = `translate(-50%,-50%) rotate(-12deg)`;
        }else{
          board.style.left = `${x}px`;
          board.style.transform = `translate(-50%,-50%) rotate(${(-10 + angle*0.35).toFixed(2)}deg)`;
        }

        if(!prefersReduced) requestAnimationFrame(updateBoard);
      }
      if(!prefersReduced) requestAnimationFrame(updateBoard);
      else updateBoard();

      /* ---------- Ensure initial card reveal when loaded mid-scroll ---------- */
      function initialUnlockScan(){
        const scrollY = window.scrollY;
        const boardWorldY = scrollY + (window.innerHeight * 0.78);
        for(let i=0;i<points.length;i++){
          if(points[i].y < boardWorldY + 40) unlockIndex(i);
        }
      }
      addEventListener('load', initialUnlockScan, { once: true });

      /* ---------- Smooth scroll for “Return to Horizon” ---------- */
      const returnBtn = document.getElementById('returnBtn');
      returnBtn.addEventListener('click', (e) => {
        e.preventDefault();
        window.scrollTo({ top: 0, behavior: prefersReduced ? 'auto' : 'smooth' });
      });

      /* ---------- Progressive enhancement: if user scrolls, stop bobbing slightly ---------- */
      let scrolledOnce = false;
      addEventListener('scroll', () => {
        if(!scrolledOnce){
          scrolledOnce = true;
          // keep it gentle; don't fully remove, just reduce on non-reduced-motion users
          if(!prefersReduced) document.getElementById('board').classList.remove('bob');
        }
      }, { passive: true });

      /* ---------- Route layer height sync (document can change due to iframe load) ---------- */
      const ro = new ResizeObserver(() => { points = layoutTree(); });
      ro.observe(document.body);

      /* ---------- Make sure stop 7 isn't treated as unlockable node (it is the dock) ---------- */
      // Spec says final buoy arrives at calmer waters; we still keep the buoy, but the card is already visible.
      // The node will unlock naturally as you approach, but the card doesn't need to animate from hidden.
    })();
  </script>
<!-- Add this block to embed the like button -->
    <script src="/static/js/like_button.js"></script>
    <script>
        LikeButton.init({
          pageId: "20251223",
          position: "bottom-right", // Options: bottom-right, bottom-left, top-right, top-left
        });
    </script>

</body>
</html>