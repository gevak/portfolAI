<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geva Kipper | Digital Constellation</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&family=Source+Code+Pro:wght@400&family=DS-Digital:wght@400&display=swap" rel="stylesheet">

    <style>
        /*
        ========================================
        SETUP & VARIABLES
        ========================================
        */
        :root {
            --bg-color: #121212;
            --primary-text: #E0E0E0;
            --accent-blue: #00BFFF; /* DeepSkyBlue */
            --accent-blue-transparent: rgba(0, 191, 255, 0.1);
            --accent-glow: 0 0 5px var(--accent-blue), 0 0 10px var(--accent-blue), 0 0 15px rgba(0, 191, 255, 0.5);
            --card-bg: rgba(28, 28, 32, 0.75);
            
            --font-main: 'Inter', sans-serif;
            --font-mono: 'Source Code Pro', monospace;
            --font-digital: 'DS-Digital', sans-serif;
        }

        /* A fallback for the digital font if the import fails */
        @font-face {
            font-family: 'DS-Digital';
            font-style: normal;
            font-weight: normal;
            src: local('DS-Digital'), url('https://fonts.cdnfonts.com/s/7723/DS-DIGI.woff') format('woff');
        }

        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden; /* Prevent scrollbars */
            background-color: var(--bg-color);
            color: var(--primary-text);
            font-family: var(--font-main);
        }

        /*
        ========================================
        CORE LAYOUT & BACKGROUND
        ========================================
        */
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .main-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 40px;
        }

        /*
        ========================================
        HEADER
        ========================================
        */
        header {
            text-align: center;
            z-index: 10;
        }

        header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent-blue);
            text-shadow: var(--accent-glow);
            letter-spacing: 2px;
        }

        header p {
            font-size: 1.1rem;
            font-weight: 300;
            margin-top: 10px;
            opacity: 0.9;
        }

        header .system-prompt {
            font-family: var(--font-mono);
            font-size: 0.9rem;
            margin-top: 20px;
            color: #aaa;
        }

        header .system-prompt::after {
            content: 'â–ˆ';
            animation: blink 1s step-end infinite;
            color: #ccc;
            margin-left: 5px;
        }

        @keyframes blink {
            50% { opacity: 0; }
        }

        /*
        ========================================
        CENTRAL CORE & CONSTELLATION
        ========================================
        */
        main {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #core-container {
            width: 200px;
            height: 200px;
            cursor: pointer;
            position: relative;
            z-index: 5;
            transition: transform 0.3s ease;
        }
        
        #core-container.pulsing {
            animation: core-pulse 0.6s ease-out;
        }
        
        @keyframes core-pulse {
            0% { transform: scale(1); filter: brightness(1.5); }
            50% { transform: scale(1.2); filter: brightness(2.5); }
            100% { transform: scale(1); filter: brightness(1.5); }
        }

        #core-container.discovered {
            opacity: 0.3;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        .light-beam {
            position: absolute;
            top: 50%;
            left: 50%;
            height: 2px;
            background: linear-gradient(90deg, var(--accent-blue-transparent), var(--accent-blue));
            transform-origin: left center;
            opacity: 0;
        }
        
        #constellation-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .project-node {
            position: absolute;
            width: 24px;
            height: 24px;
            background-color: var(--accent-blue);
            border-radius: 50%;
            cursor: pointer;
            pointer-events: all;
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            box-shadow: 0 0 10px rgba(0, 191, 255, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.3s ease;
            animation: node-pulse 3s infinite ease-in-out;
        }
        
        .project-node.visible {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }
        
        .project-node.dimmed {
            opacity: 0.2;
            pointer-events: none;
        }
        
        .project-node svg {
            width: 14px;
            height: 14px;
            fill: var(--bg-color);
        }

        .project-node:hover {
            transform: translate(-50%, -50%) scale(1.5);
            box-shadow: var(--accent-glow);
            animation-play-state: paused;
        }

        .node-title {
            position: absolute;
            left: 140%;
            top: 50%;
            transform: translateY(-50%);
            font-family: var(--font-mono);
            font-size: 0.9rem;
            color: var(--accent-blue);
            text-shadow: var(--accent-glow);
            opacity: 0;
            transition: opacity 0.3s ease;
            white-space: nowrap;
        }

        .project-node:hover .node-title {
            opacity: 1;
        }
        
        @keyframes node-pulse {
            0%, 100% { box-shadow: 0 0 10px rgba(0, 191, 255, 0.7); }
            50% { box-shadow: 0 0 18px rgba(0, 191, 255, 1); }
        }

        /*
        ========================================
        DATA CARDS (PROJECTS)
        ========================================
        */
        #card-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            align-content: center;
            padding: 100px 40px 80px 40px;
            gap: 20px;
            overflow-y: auto;
            pointer-events: none;
            z-index: 20;
        }

        .data-card {
            background: var(--card-bg);
            border: 1px solid var(--accent-blue-transparent);
            border-radius: 12px;
            padding: 24px;
            width: 100%;
            max-width: 450px;
            box-shadow: 0 0 20px rgba(0, 191, 255, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px); /* For Safari */
            opacity: 0;
            transform: scale(0.9);
            transition: opacity 0.4s ease, transform 0.4s ease;
            pointer-events: all;
            position: relative;
        }

        .data-card.visible {
            opacity: 1;
            transform: scale(1);
        }

        .card-close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 24px;
            height: 24px;
            font-size: 1.5rem;
            color: #aaa;
            cursor: pointer;
            transition: color 0.3s, transform 0.3s;
            text-align: center;
            line-height: 24px;
        }
        
        .card-close:hover {
            color: #fff;
            transform: scale(1.2);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .card-header svg {
            width: 24px;
            height: 24px;
            fill: var(--accent-blue);
        }

        .card-header h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-text);
        }
        
        .card-body p {
            font-size: 1rem;
            font-weight: 300;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .card-links {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .card-links a, .card-links button {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            background: var(--accent-blue-transparent);
            border: 1px solid rgba(0, 191, 255, 0.3);
            border-radius: 6px;
            color: var(--primary-text);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 400;
            transition: background-color 0.3s, border-color 0.3s;
            cursor: pointer;
            font-family: var(--font-main);
        }
        
        .card-links a:hover, .card-links button:hover {
            background-color: var(--accent-blue);
            color: var(--bg-color);
            border-color: var(--accent-blue);
        }

        .card-links a:hover svg, .card-links button:hover svg {
            fill: var(--bg-color);
        }

        .card-links svg {
            width: 18px;
            height: 18px;
            fill: var(--primary-text);
            transition: fill 0.3s;
        }
        
        .card-links button.disabled {
            cursor: default;
            background: rgba(128, 128, 128, 0.2);
            color: #888;
            border-color: rgba(128, 128, 128, 0.3);
        }
        .card-links button.disabled:hover {
            background: rgba(128, 128, 128, 0.2);
            color: #888;
        }

        #overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 15;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        #overlay.active {
            opacity: 1;
            pointer-events: all;
        }


        /*
        ========================================
        FOOTER
        ========================================
        */
        footer {
            text-align: center;
            font-size: 0.8rem;
            color: #666;
            z-index: 10;
            transition: color 0.3s ease;
        }

        footer:hover {
            color: #999;
        }
        
        footer .uptime-clock {
            font-family: var(--font-digital);
            letter-spacing: 2px;
            font-size: 1rem;
            color: #888;
        }

        /*
        ========================================
        RESPONSIVENESS
        ========================================
        */
        @media (max-width: 768px) {
            .main-container {
                padding: 20px;
            }
            
            header h1 {
                font-size: 1.8rem;
            }

            header p {
                font-size: 0.9rem;
            }

            #core-container {
                width: 150px;
                height: 150px;
            }
            
            #card-container {
                padding: 80px 20px 60px 20px;
            }
        }
    </style>
</head>
<body>

    <canvas id="particle-canvas"></canvas>

    <div class="main-container">
        <header>
            <h1>Geva Kipper</h1>
            <p>Crafting intelligent systems and developer tools at Google.</p>
            <p class="system-prompt">[SYSTEM PROMPT]: This design is procedurally generated by AI daily. Refresh for a new experience.</p>
        </header>
        
        <main>
            <div id="core-container" title="Click to discover projects"></div>
            <div id="constellation-container"></div>
            <div id="card-container"></div>
            <div id="overlay"></div>
        </main>
        
        <footer>
            Design generated by a GPT-4 class Large Language Model. |
            System Uptime: <span id="uptime-clock" class="uptime-clock"></span>
        </footer>
    </div>
    
    <!-- Using a CDN for Three.js -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.163.0/build/three.module.js"
            }
        }
    </script>
    
    <script type="module">
        import * as THREE from 'three';

        // ========================================
        // ICONS (as SVG strings)
        // ========================================
        const ICONS = {
            sound_wave: `<svg viewBox="0 0 24 24"><path d="M3 10v4M7 8v8M11 5v14M15 8v8M19 10v4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>`,
            map_pin: `<svg viewBox="0 0 24 24"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>`,
            polygon: `<svg viewBox="0 0 24 24"><path d="M12 2l10 6.5v9L12 24 2 17.5v-9L12 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>`,
            jester_hat: `<svg viewBox="0 0 24 24"><path d="M12 2a5 5 0 0 0-5 5c0 5 5 11 5 11s5-6 5-11a5 5 0 0 0-5-5z M2 9a4 4 0 0 0 4 4c0 4-4 8-4 8s-4-4-4-8a4 4 0 0 0 4-4z M22 9a4 4 0 0 0-4 4c0 4 4 8 4 8s4-4 4-8a4 4 0 0 0-4-4z" transform="translate(-1, -1) scale(0.9, 0.9)" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>`,
            newspaper: `<svg viewBox="0 0 24 24"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2z M4 4h16v16H4V4z M7 8h10 M7 12h10 M7 16h5"></path></svg>`,
            spiral: `<svg viewBox="0 0 24 24"><path d="M12,3c-4.97,0-9,4.03-9,9c0,4.97,4.03,9,9,9c4.97,0,9-4.03,9-9c0-2.49-1.01-4.73-2.64-6.36 C16.73,4.01,14.49,3,12,3z M12,5c3.86,0,7,3.14,7,7c0,1.93-0.78,3.68-2.05,4.95 C15.68,18.22,13.93,19,12,19c-3.86,0-7-3.14-7-7C5,8.14,8.14,5,12,5z M12,7c-2.76,0-5,2.24-5,5c0,2.76,2.24,5,5,5c2.76,0,5-2.24,5-5 C17,9.24,14.76,7,12,7z M12,9c1.66,0,3,1.34,3,3c0,1.66-1.34,3-3,3s-3-1.34-3-3C9,10.34,10.34,9,12,9z" /></svg>`,
            chain_link: `<svg viewBox="0 0 24 24"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" /><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.71" /></svg>`,
            globe: `<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>`,
            youtube: `<svg viewBox="0 0 24 24"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>`,
            github: `<svg viewBox="0 0 24 24"><path d="M12 2C6.475 2 2 6.475 2 12a9.994 9.994 0 0 0 6.838 9.488c.5.087.687-.213.687-.475 0-.237-.013-1.025-.013-1.862-2.512.463-3.162-.612-3.362-1.175-.113-.288-.6-1.175-1.025-1.413-.35-.187-.85-.65-.013-.662.788-.013 1.35.725 1.538 1.025.9 1.512 2.338 1.087 2.912.825.088-.65.35-1.087.638-1.337-2.225-.25-4.55-1.113-4.55-4.938 0-1.088.387-1.987 1.025-2.688-.1-.25-.45-1.275.1-2.65 0 0 .837-.262 2.75 1.026a9.58 9.58 0 0 1 5 0c1.912-1.3 2.75-1.026 2.75-1.026.55 1.375.2 2.4.1 2.65.637.7 1.025 1.6 1.025 2.688 0 3.837-2.337 4.687-4.562 4.937.362.312.675.912.675 1.85 0 1.337-.013 2.412-.013 2.75 0 .262.188.575.688.475A10.001 10.001 0 0 0 22 12c0-5.525-4.475-10-10-10z"/></svg>`,
            linkedin: `<svg viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>`,
            facebook: `<svg viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-3 7h-1.924c-.615 0-1.076.252-1.076.888v1.112h3l-.238 3h-2.762v8h-3v-8h-2v-3h2v-1.923c0-2.115 1.157-3.077 3.469-3.077h2.531v3z"/></svg>`,
        };
        
        // ========================================
        // PROJECT DATA
        // ========================================
        const projects = [
            {
                id: 'glglstats',
                title: 'GlglStats',
                shortTitle: 'MUSIC',
                icon: ICONS.sound_wave,
                position: { top: '30%', left: '25%' },
                description: "A Python project measuring the repetitiveness of Israeli pop-chart songs using LZ77 compression, with visualizations of repetition patterns in famous songs.",
                links: [
                    { type: 'link', label: 'View Live Project', url: 'https://glglstats.geekip.dev', icon: ICONS.globe },
                    { type: 'link', label: 'Watch PyData Talk', url: 'https://www.youtube.com/watch?v=jrKAtOsj1Lo', icon: ICONS.youtube }
                ]
            },
            {
                id: 'ahuzat-dibuk',
                title: 'Ahuzat Dibuk',
                shortTitle: 'DATA',
                icon: ICONS.map_pin,
                position: { top: '40%', left: '78%' },
                description: "A data investigation into the broken enforcement of parking fines in Tel Aviv, revealing systemic issues. The findings were published on social media and featured in major Israeli news outlets.",
                links: [
                    { type: 'link', label: 'Read Publication', url: 'https://www.facebook.com/groups/secrettelaviv/posts/10159636301195943', icon: ICONS.newspaper },
                    { type: 'link', label: 'Media: Channel 13 News', url: 'https://13tv.co.il/item/news/domestic/internal/parking-902956407/', icon: ICONS.globe },
                    { type: 'link', label: 'Media: Mako Nexter', url: 'https://www.mako.co.il/nexter-news/Article-ae43964b891bf71027.htm', icon: ICONS.globe }
                ]
            },
            {
                id: 'part-orienting',
                title: '2D Part Orienting',
                shortTitle: 'GEOMETRY',
                icon: ICONS.polygon,
                position: { top: '65%', left: '15%' },
                description: "Academic research in computational geometry on determining the stable resting positions of a 2D polygonal part. The project includes a formal proof and an interactive web demo.",
                links: [
                    { type: 'link', label: 'Project & Code (TAU)', url: 'https://www.cgl.cs.tau.ac.il/projects/2d-part-orienting/', icon: ICONS.globe }
                ]
            },
            {
                id: 'turing-jest',
                title: 'The Turing Jest',
                shortTitle: 'CREATIVE AI',
                icon: ICONS.jester_hat,
                position: { top: '70%', left: '85%' },
                description: "An AI-powered web experiment where users try to distinguish between jokes written by a human and jokes generated by a fine-tuned GPT model. It's a playful take on the Turing Test.",
                links: [
                    { type: 'link', label: 'Play The Game', url: 'https://jest.geekip.dev', icon: ICONS.globe }
                ]
            },
            {
                id: 'rhymes-of-israel',
                title: 'Rhymes of Israel',
                shortTitle: 'BROWSER',
                icon: ICONS.newspaper,
                position: { top: '80%', left: '45%' },
                description: "A Chrome extension that modifies news headlines on Israeli websites to make them rhyme, injecting a bit of poetry and humor into the daily news cycle.",
                links: [
                    { type: 'link', label: 'Get Extension', url: 'https://chromewebstore.google.com/detail/eainginjgdkpgolpjniijdihfbeeeklb', icon: ICONS.globe }
                ]
            },
            {
                id: 'portfolio',
                title: 'Portfolio Project',
                shortTitle: 'META',
                icon: ICONS.spiral,
                position: { top: '20%', left: '60%' },
                description: "This portfolio itself is a project, designed as an interactive 'Digital Constellation'. It's built as a single-file application using modern HTML, CSS, and JavaScript, featuring a procedurally-generated theme and a 3D core rendered with Three.js.",
                links: [
                    { type: 'button', label: 'You Are Here', url: 'https://geekip.dev', icon: ICONS.spiral, disabled: true }
                ]
            },
            {
                id: 'contact',
                title: 'Contact/Socials',
                shortTitle: 'CONNECT',
                icon: ICONS.chain_link,
                position: { top: '55%', left: '55%' },
                description: "Let's connect. You can find me on these platforms.",
                links: [
                    { type: 'link', label: 'GitHub', url: 'https://github.com/gevak', icon: ICONS.github },
                    { type: 'link', label: 'LinkedIn', url: 'https://linkedin.com/in/gevakip', icon: ICONS.linkedin },
                    { type: 'link', label: 'Facebook', url: 'https://facebook.com/geva.kipper', icon: ICONS.facebook }
                ]
            }
        ];

        // ========================================
        // GLOBAL STATE & DOM ELEMENTS
        // ========================================
        const STATE = {
            constellationDiscovered: false,
            openCards: new Set(),
        };

        const DOM = {
            canvas: document.getElementById('particle-canvas'),
            coreContainer: document.getElementById('core-container'),
            constellationContainer: document.getElementById('constellation-container'),
            cardContainer: document.getElementById('card-container'),
            overlay: document.getElementById('overlay'),
            uptimeClock: document.getElementById('uptime-clock'),
        };

        // ========================================
        // AUDIO CONTEXT for Hover Hum
        // ========================================
        let audioCtx, oscillator, gainNode;
        let isHumming = false;

        function setupAudio() {
            try {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                gainNode = audioCtx.createGain();
                gainNode.gain.setValueAtTime(0, audioCtx.currentTime);
                gainNode.connect(audioCtx.destination);
            } catch (e) {
                console.warn("Web Audio API is not supported in this browser.");
            }
        }
        
        function startHum() {
            if (!audioCtx || isHumming) return;
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
            oscillator = audioCtx.createOscillator();
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(80, audioCtx.currentTime); // Low hum
            oscillator.connect(gainNode);
            oscillator.start();
            gainNode.gain.exponentialRampToValueAtTime(0.1, audioCtx.currentTime + 0.5);
            isHumming = true;
        }

        function stopHum() {
            if (!audioCtx || !isHumming) return;
            gainNode.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.5);
            oscillator.stop(audioCtx.currentTime + 0.5);
            isHumming = false;
        }


        // ========================================
        // PARTICLE BACKGROUND
        // ========================================
        const canvasCtx = DOM.canvas.getContext('2d');
        let particles = [];

        function resizeCanvas() {
            DOM.canvas.width = window.innerWidth;
            DOM.canvas.height = window.innerHeight;
        }
        
        function createParticles() {
            particles = [];
            const particleCount = Math.floor((DOM.canvas.width * DOM.canvas.height) / 10000);
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: Math.random() * DOM.canvas.width,
                    y: Math.random() * DOM.canvas.height,
                    vx: (Math.random() - 0.5) * 0.3,
                    vy: (Math.random() - 0.5) * 0.3,
                    size: Math.random() * 1.5 + 0.5,
                    opacity: Math.random() * 0.5 + 0.2
                });
            }
        }
        
        function animateParticles() {
            canvasCtx.clearRect(0, 0, DOM.canvas.width, DOM.canvas.height);
            particles.forEach(p => {
                p.x += p.vx;
                p.y += p.vy;

                if (p.x < 0) p.x = DOM.canvas.width;
                if (p.x > DOM.canvas.width) p.x = 0;
                if (p.y < 0) p.y = window.innerHeight;
                if (p.y > window.innerHeight) p.y = 0;

                canvasCtx.fillStyle = `rgba(224, 224, 224, ${p.opacity})`;
                canvasCtx.beginPath();
                canvasCtx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                canvasCtx.fill();
            });
        }
        
        // ========================================
        // 3D CORE (THREE.JS)
        // ========================================
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, DOM.coreContainer.clientWidth / DOM.coreContainer.clientHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        
        let coreMesh;
        let rotationSpeed = 0.003;

        function setupCore() {
            renderer.setSize(DOM.coreContainer.clientWidth, DOM.coreContainer.clientHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            DOM.coreContainer.appendChild(renderer.domElement);
            
            const geometry = new THREE.IcosahedronGeometry(2, 0);
            const wireframe = new THREE.WireframeGeometry(geometry);
            const material = new THREE.LineBasicMaterial({
                color: 0x00BFFF,
                linewidth: 2,
            });
            coreMesh = new THREE.LineSegments(wireframe, material);
            
            // Add glow effect
            const glowMaterial = new THREE.ShaderMaterial({
                uniforms: {
                    'c': { type: 'f', value: 0.2 },
                    'p': { type: 'f', value: 3.0 },
                    glowColor: { type: 'c', value: new THREE.Color(0x00BFFF) },
                    viewVector: { type: 'v3', value: camera.position }
                },
                vertexShader: `
                    uniform vec3 viewVector;
                    uniform float c;
                    uniform float p;
                    varying float intensity;
                    void main() {
                        vec3 vNormal = normalize( normalMatrix * normal );
                        vec3 vNormel = normalize( normalMatrix * viewVector );
                        intensity = pow( c - dot(vNormal, vNormel), p );
                        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
                    }
                `,
                fragmentShader: `
                    uniform vec3 glowColor;
                    varying float intensity;
                    void main() {
                        vec3 glow = glowColor * intensity;
                        gl_FragColor = vec4( glow, 1.0 );
                    }
                `,
                side: THREE.BackSide,
                blending: THREE.AdditiveBlending,
                transparent: true
            });
            
            const glowMesh = new THREE.Mesh(geometry, glowMaterial);
            glowMesh.scale.multiplyScalar(1.2);
            scene.add(glowMesh);
            
            scene.add(coreMesh);
            camera.position.z = 4;
        }

        function animateCore() {
            if (coreMesh) {
                coreMesh.rotation.x += rotationSpeed;
                coreMesh.rotation.y += rotationSpeed;
            }
            renderer.render(scene, camera);
        }

        // ========================================
        // CONSTELLATION & PROJECT LOGIC
        // ========================================
        function revealConstellation() {
            if (STATE.constellationDiscovered) return;
            STATE.constellationDiscovered = true;
            DOM.coreContainer.classList.add('pulsing');
            DOM.coreContainer.classList.add('discovered');

            // Beams animation
            projects.forEach((project, i) => {
                const nodeX = project.position.left.endsWith('%') ? window.innerWidth * parseFloat(project.position.left) / 100 : parseFloat(project.position.left);
                const nodeY = project.position.top.endsWith('%') ? window.innerHeight * parseFloat(project.position.top) / 100 : parseFloat(project.position.top);

                const centerX = window.innerWidth / 2;
                const centerY = window.innerHeight / 2;

                const angle = Math.atan2(nodeY - centerY, nodeX - centerX);
                const distance = Math.sqrt(Math.pow(nodeX - centerX, 2) + Math.pow(nodeY - centerY, 2));

                const beam = document.createElement('div');
                beam.className = 'light-beam';
                document.body.appendChild(beam);
                beam.style.transform = `rotate(${angle}rad)`;
                beam.style.width = '0px';
                
                // Animate beam shooting out
                setTimeout(() => {
                    beam.style.transition = `width 0.5s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.5s`;
                    beam.style.opacity = '1';
                    beam.style.width = `${distance}px`;
                }, i * 50);

                // Fade out beam and show node
                setTimeout(() => {
                    beam.style.opacity = '0';
                    const node = document.getElementById(`node-${project.id}`);
                    if (node) {
                        node.classList.add('visible');
                    }
                    setTimeout(() => beam.remove(), 500);
                }, 550 + i * 50);
            });
        }
        
        function createNodes() {
            projects.forEach(project => {
                const node = document.createElement('div');
                node.id = `node-${project.id}`;
                node.className = 'project-node';
                node.style.top = project.position.top;
                node.style.left = project.position.left;
                node.innerHTML = `
                    ${project.icon}
                    <span class="node-title">${project.shortTitle}</span>
                `;
                node.addEventListener('click', () => openCard(project.id));
                DOM.constellationContainer.appendChild(node);
            });
        }
        
        function openCard(projectId) {
            if (STATE.openCards.has(projectId)) return;
            
            const project = projects.find(p => p.id === projectId);
            if (!project) return;
            
            STATE.openCards.add(projectId);
            updateOverlayAndNodes();

            const card = document.createElement('div');
            card.id = `card-${project.id}`;
            card.className = 'data-card';

            const linksHTML = project.links.map(link => {
                const isButton = link.type === 'button';
                const tag = isButton ? 'button' : 'a';
                const href = !isButton ? `href="${link.url}" target="_blank" rel="noopener noreferrer"` : '';
                const disabledClass = isButton && link.disabled ? 'disabled' : '';
                const disabledAttr = isButton && link.disabled ? 'disabled' : '';

                return `
                    <${tag} class="${disabledClass}" ${href} ${disabledAttr}>
                        ${link.icon}
                        <span>${link.label}</span>
                    </${tag}>
                `;
            }).join('');

            card.innerHTML = `
                <div class="card-close" title="Close">&times;</div>
                <div class="card-header">
                    ${project.icon}
                    <h3>${project.title}</h3>
                </div>
                <div class="card-body">
                    <p>${project.description}</p>
                </div>
                <div class="card-links">
                    ${linksHTML}
                </div>
            `;
            
            DOM.cardContainer.appendChild(card);
            
            // Force reflow for transition
            requestAnimationFrame(() => {
                card.classList.add('visible');
            });
            
            card.querySelector('.card-close').addEventListener('click', () => closeCard(project.id));
        }

        function closeCard(projectId) {
            const card = document.getElementById(`card-${projectId}`);
            if (card) {
                card.classList.remove('visible');
                card.addEventListener('transitionend', () => {
                    card.remove();
                }, { once: true });
            }
            STATE.openCards.delete(projectId);
            updateOverlayAndNodes();
        }

        function closeAllCards() {
            STATE.openCards.forEach(id => closeCard(id));
        }

        function updateOverlayAndNodes() {
            if (STATE.openCards.size > 0) {
                DOM.overlay.classList.add('active');
                DOM.constellationContainer.querySelectorAll('.project-node').forEach(node => {
                    node.classList.add('dimmed');
                });
            } else {
                DOM.overlay.classList.remove('active');
                DOM.constellationContainer.querySelectorAll('.project-node').forEach(node => {
                    node.classList.remove('dimmed');
                });
            }
        }
        
        // ========================================
        // FOOTER STOPWATCH
        // ========================================
        function updateUptime() {
            // Using a plausible past date instead of a future one from the prompt for a logical "uptime" counter.
            const startTime = new Date('2023-09-10T01:00:48Z').getTime();
            const now = Date.now();
            const diff = Math.floor((now - startTime) / 1000);
            
            if (diff < 0) {
                DOM.uptimeClock.textContent = '00:00:00';
                return;
            }

            const hours = Math.floor(diff / 3600);
            const minutes = Math.floor((diff % 3600) / 60);
            const seconds = diff % 60;
            
            const format = (n) => n.toString().padStart(2, '0');
            
            DOM.uptimeClock.textContent = `${format(hours)}:${format(minutes)}:${format(seconds)}`;
        }

        // ========================================
        // MAIN ANIMATION LOOP
        // ========================================
        function animate() {
            requestAnimationFrame(animate);
            animateParticles();
            animateCore();
        }
        
        // ========================================
        // INITIALIZATION & EVENT LISTENERS
        // ========================================
        function init() {
            // Setup
            resizeCanvas();
            createParticles();
            setupCore();
            createNodes();
            setupAudio();
            
            // Uptime clock
            updateUptime();
            setInterval(updateUptime, 1000);
            
            // Event Listeners
            window.addEventListener('resize', () => {
                resizeCanvas();
                createParticles();
                camera.aspect = DOM.coreContainer.clientWidth / DOM.coreContainer.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(DOM.coreContainer.clientWidth, DOM.coreContainer.clientHeight);
            });
            
            DOM.coreContainer.addEventListener('click', () => {
                if (audioCtx && audioCtx.state === 'suspended') {
                    audioCtx.resume();
                }
                revealConstellation();
            });

            DOM.coreContainer.addEventListener('mouseenter', () => {
                rotationSpeed = 0.01;
                startHum();
            });

            DOM.coreContainer.addEventListener('mouseleave', () => {
                rotationSpeed = 0.003;
                stopHum();
            });

            DOM.overlay.addEventListener('click', closeAllCards);

            // Start animation loop
            animate();
        }
        
        init();
    </script>
<!-- Add this block to embed the like button -->
    <script src="/static/js/like_button.js"></script>
    <script>
        LikeButton.init({
          pageId: "20250910",
          position: "bottom-right", // Options: bottom-right, bottom-left, top-right, top-left
        });
    </script>

</body>
</html>