<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geva Kipper - Secure Vault</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&family=Roboto+Mono:wght@400;700&family=Caveat:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-color: #0f172a;
            --cyan: #06b6d4;
            --amber: #f59e0b;
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.08);
            --text-main: #e2e8f0;
            --text-muted: #94a3b8;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        /* Hero Section */
        header {
            padding: 4rem 2rem 2rem;
            text-align: center;
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            font-size: 4rem;
            font-weight: 900;
            letter-spacing: -1px;
            color: white;
            text-shadow: 0 0 20px rgba(6, 182, 212, 0.4), 0 0 40px rgba(6, 182, 212, 0.2);
            margin-bottom: 1rem;
        }

        .hero-desc {
            font-size: 1.25rem;
            color: var(--text-main);
            margin-bottom: 1.5rem;
            font-weight: 300;
        }

        .sys-note {
            font-family: 'Roboto Mono', monospace;
            font-size: 0.9rem;
            color: var(--amber);
            background: rgba(245, 158, 11, 0.1);
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid var(--amber);
            text-align: left;
            display: inline-block;
        }

        .cursor {
            animation: blink 1s step-end infinite;
        }

        @keyframes blink { 50% { opacity: 0; } }

        /* Grid Layout */
        main {
            flex: 1;
            padding: 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 24px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        /* Vault Boxes - Glassmorphism */
        .vault-box {
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            position: relative;
            overflow: hidden;
            min-height: 280px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .vault-box:hover {
            border-color: rgba(6, 182, 212, 0.3);
            box-shadow: 0 10px 40px rgba(6, 182, 212, 0.1);
        }

        .box-title {
            padding: 1.2rem 1.5rem;
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 700;
            font-size: 1.1rem;
            z-index: 10;
        }

        .status-icon {
            color: var(--amber);
            text-shadow: 0 0 10px rgba(245, 158, 11, 0.5);
            transition: all 0.5s ease;
        }

        .vault-box.unlocked .status-icon {
            color: var(--cyan);
            text-shadow: 0 0 15px rgba(6, 182, 212, 0.7);
        }

        .box-inner {
            position: relative;
            flex: 1;
            display: flex;
        }

        /* Setup for Lock/Unlock Crossfade */
        .lock-interface, .content-interface {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 1.5rem;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
        }

        .content-interface {
            opacity: 0;
            pointer-events: none;
            transform: scale(0.95) translateY(10px);
            overflow-y: auto;
        }

        .vault-box.unlocked .lock-interface {
            opacity: 0;
            pointer-events: none;
            transform: scale(1.05);
        }

        .vault-box.unlocked .content-interface {
            opacity: 1;
            pointer-events: all;
            transform: scale(1) translateY(0);
        }

        /* General Typography & Assets inside boxes */
        p { margin-bottom: 1rem; line-height: 1.5; color: var(--text-muted); font-size: 0.95rem; }
        .text-cyan { color: var(--cyan); }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 0.6rem 1.2rem;
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid var(--cyan);
            color: var(--cyan);
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 700;
            transition: all 0.3s ease;
            cursor: pointer;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .btn:hover {
            background: var(--cyan);
            color: var(--bg-color);
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.4);
        }

        .tags { display: flex; gap: 8px; margin-bottom: 1rem; }
        .tag {
            background: rgba(255,255,255,0.1);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-family: 'Roboto Mono', monospace;
        }

        /* Specific Puzzles */
        /* Box 1 */
        .puzzle-sequence { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin-top: 1rem; }
        .seq-block { width: 40px; height: 40px; border-radius: 6px; cursor: pointer; transition: transform 0.2s; }
        .seq-block:hover { transform: scale(1.1); }
        .seq-a { background: #475569; }
        .seq-b { background: #94a3b8; }
        
        /* Box 2 */
        .puzzle-heatmap { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; width: 100%; max-width: 200px; margin: 1rem auto; }
        .heat-cell { aspect-ratio: 1; cursor: pointer; border-radius: 4px; transition: transform 0.2s; }
        .heat-cell:hover { transform: scale(1.1); border: 1px solid white; }
        .news-links { display: flex; gap: 15px; font-size: 1.5rem; }
        .news-links a { color: var(--text-muted); transition: color 0.3s; }
        .news-links a:hover { color: var(--cyan); }

        /* Box 3 */
        .canvas-container { text-align: center; }
        #geomCanvas { background: rgba(0,0,0,0.3); border-radius: 8px; border: 1px solid var(--glass-border); margin-bottom: 10px; }
        .pusher-slider { width: 100%; -webkit-appearance: none; background: transparent; margin-top: 10px;}
        .pusher-slider::-webkit-slider-runnable-track { width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; }
        .pusher-slider::-webkit-slider-thumb { -webkit-appearance: none; height: 16px; width: 40px; border-radius: 4px; background: var(--amber); cursor: pointer; margin-top: -5px; box-shadow: 0 0 10px var(--amber); }
        
        .terminal-block {
            background: #000;
            border: 1px solid #333;
            border-radius: 6px;
            padding: 1rem;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.8rem;
            color: #4ade80;
            text-decoration: none;
            display: block;
            margin-top: 10rem;
        }

        /* Box 4 */
        .voting-arena { display: flex; flex-direction: column; gap: 10px; height: 100%; justify-content: center; }
        .vote-btn { background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); color: white; padding: 1rem; border-radius: 8px; cursor: pointer; text-align: left; transition: all 0.2s; font-family: 'Roboto Mono', monospace; font-size: 0.85rem;}
        .vote-btn:hover { background: rgba(6, 182, 212, 0.2); border-color: var(--cyan); }

        /* Box 5 */
        .rhyme-puzzle { text-align: center; padding-top: 2rem; }
        .drop-zone { display: inline-block; width: 80px; height: 30px; border: 2px dashed rgba(255,255,255,0.3); border-radius: 4px; vertical-align: middle; margin: 0 5px; background: rgba(0,0,0,0.2);}
        .draggable-word { display: inline-block; padding: 5px 15px; background: var(--amber); color: #000; font-weight: bold; border-radius: 4px; cursor: grab; margin-top: 20px; box-shadow: 0 0 10px rgba(245, 158, 11, 0.5);}
        .draggable-word:active { cursor: grabbing; }
        
        .yearbook-card {
            background: #fff;
            color: #222;
            padding: 1rem;
            border-radius: 2px;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
            transform: rotate(-2deg);
            margin: 10px;
        }
        .yearbook-font { font-family: 'Caveat', cursive; font-size: 1.5rem; line-height: 1; margin-bottom: 5px;}

        /* Box 6 */
        .meta-puzzle { display: grid; grid-template-columns: repeat(3, 1fr); gap: 4px; width: 60px; margin: 2rem auto; }
        .mini-box { background: rgba(255,255,255,0.2); aspect-ratio: 1; border-radius: 2px; }
        .mini-box-target { background: var(--cyan); cursor: pointer; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; box-shadow: 0 0 10px var(--cyan); } 100% { opacity: 0.6; } }
        
        .zoom-animation {
            animation: infiniteZoom 1s forwards cubic-bezier(0.7, 0, 0.3, 1);
        }
        @keyframes infiniteZoom { to { transform: scale(50); opacity: 0; } }

        /* Box 7 (Full width) */
        .box-social { grid-column: 1 / -1; min-height: 200px; }
        .laser-grid { position: relative; width: 100%; height: 100px; display: flex; justify-content: space-around; align-items: center; margin-top: 1rem;}
        .node { 
            width: 40px; height: 40px; border-radius: 50%; border: 2px solid var(--glass-border);
            display: flex; justify-content: center; align-items: center; font-weight: bold;
            font-family: 'Roboto Mono'; z-index: 2; user-select: none; transition: all 0.3s;
        }
        .node.active { background: rgba(245, 158, 11, 0.8); border-color: var(--amber); box-shadow: 0 0 15px var(--amber); color: #000;}
        #laserCanvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
        
        .social-hub { display: flex; justify-content: center; gap: 30px; align-items: center; height: 100%; }
        .social-link { font-size: 3rem; color: var(--text-muted); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .social-link:hover { color: var(--cyan); transform: scale(1.2) translateY(-10px); filter: drop-shadow(0 10px 10px rgba(6, 182, 212, 0.4));}

        /* Footer */
        footer {
            margin-top: 3rem;
            padding: 1.5rem 2rem;
            border-top: 1px solid var(--glass-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.85rem;
            background: rgba(0,0,0,0.5);
        }
        .ai-badge { color: var(--text-muted); }
        .model-name { color: var(--cyan); font-weight: 700; }
        .stopwatch { color: var(--amber); font-size: 1.1rem; text-shadow: 0 0 5px rgba(245, 158, 11, 0.5); font-weight: bold;}

        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; }
            .box-social { grid-column: auto; }
            footer { flex-direction: column; gap: 10px; text-align: center; }
        }
    </style>
</head>
<body>

    <header>
        <h1>Geva Kipper</h1>
        <p class="hero-desc">Currently building high-impact, scalable software solutions as a Software Engineer at Google.</p>
        <div class="sys-note">
            <span id="typewriter"></span><span class="cursor">_</span>
        </div>
    </header>

    <main>
        <!-- Box 1: GlglStats -->
        <div class="vault-box" id="box1">
            <div class="box-title">
                <span>01 : GlglStats</span>
                <i class="fas fa-lock status-icon"></i>
            </div>
            <div class="box-inner">
                <div class="lock-interface">
                    <p>Detect the sequence anomaly to unlock (LZ77 simulation).</p>
                    <div class="puzzle-sequence" id="seq-puzzle">
                        <!-- Filled by JS -->
                    </div>
                </div>
                <div class="content-interface">
                    <h3 class="text-cyan" style="margin-bottom: 0.5rem;">GlglStats Analyzer</h3>
                    <div class="tags"><span class="tag">Python</span><span class="tag">Data Analysis</span></div>
                    <p>A statistical analysis tool measuring the repetitiveness of Israeli pop-chart songs, visualizing patterns to determine lyrical complexity.</p>
                    <div>
                        <a href="https://glglstats.geekip.dev" target="_blank" class="btn"><i class="fas fa-globe"></i> Website</a>
                        <a href="https://www.youtube.com/watch?v=jrKAtOsj1Lo" target="_blank" class="btn"><i class="fab fa-youtube"></i> PyData Talk</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Box 2: Ahuzat Dibuk -->
        <div class="vault-box" id="box2">
            <div class="box-title">
                <span>02 : Ahuzat Dibuk</span>
                <i class="fas fa-lock status-icon"></i>
            </div>
            <div class="box-inner">
                <div class="lock-interface">
                    <p>Locate the lowest occupancy sector.</p>
                    <div class="puzzle-heatmap" id="heat-puzzle">
                        <!-- Filled by JS -->
                    </div>
                </div>
                <div class="content-interface">
                    <h3 class="text-cyan" style="margin-bottom: 0.5rem;">Ahuzat Dibuk</h3>
                    <div class="tags"><span class="tag">Scraping</span><span class="tag">Data Viz</span></div>
                    <p>Revealed the true occupancy rates of Tel-Aviv parking lots through extensive data scraping and visualization, sparking national news coverage.</p>
                    <div class="news-links">
                        <a href="https://13tv.co.il/item/news/domestic/internal/parking-902956407/" target="_blank" title="Channel 13"><i class="fas fa-tv"></i></a>
                        <a href="https://www.mako.co.il/nexter-news/Article-ae43964b891bf71027.htm" target="_blank" title="Mako"><i class="far fa-newspaper"></i></a>
                        <a href="https://www.facebook.com/groups/secrettelaviv/posts/10159636301195943/" target="_blank" title="Secret Tel Aviv"><i class="fab fa-facebook-square"></i></a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Box 3: 2D Part Orienting -->
        <div class="vault-box" id="box3">
            <div class="box-title">
                <span>03 : 2D Part Orienting</span>
                <i class="fas fa-lock status-icon"></i>
            </div>
            <div class="box-inner">
                <div class="lock-interface">
                    <p>Align the geometry using the pusher.</p>
                    <div class="canvas-container">
                        <canvas id="geomCanvas" width="200" height="120"></canvas>
                        <input type="range" min="-45" max="45" value="30" class="pusher-slider" id="pusher">
                    </div>
                </div>
                <div class="content-interface">
                    <h3 class="text-cyan" style="margin-bottom: 0.5rem;">Algorithmic Alignment</h3>
                    <div class="tags"><span class="tag">C++</span><span class="tag">Comp Geometry</span></div>
                    <p>Implementation of an efficient sensorless algorithm for orienting 2D polygonal parts via parallel jaw grippers.</p>
                    <a href="https://www.cgl.cs.tau.ac.il/projects/2d-part-orienting/" target="_blank" class="terminal-block">
                        > cd ~/projects/2d-part-orienting <br>
                        > ./execute_view <br>
                        [Click to view Source & Paper]
                    </a>
                </div>
            </div>
        </div>

        <!-- Box 4: The Turing Jest -->
        <div class="vault-box" id="box4">
            <div class="box-title">
                <span>04 : The Turing Jest</span>
                <i class="fas fa-lock status-icon"></i>
            </div>
            <div class="box-inner">
                <div class="lock-interface">
                    <p>Evaluate outputs to shatter cipher.</p>
                    <div class="voting-arena">
                        <button class="vote-btn" onclick="unlock(4)">A: "Why did the LLM cross the road? To optimize its routing parameters."</button>
                        <button class="vote-btn" onclick="unlock(4)">B: "What's an AI's favorite food? Halloumi-nations."</button>
                    </div>
                </div>
                <div class="content-interface">
                    <h3 class="text-cyan" style="margin-bottom: 0.5rem;">The Turing Jest Arena</h3>
                    <p>An LMSYS-style competitive arena where large language models battle by generating and explaining complex, nuanced puns.</p>
                    <a href="https://jest.geekip.dev" target="_blank" class="btn" style="margin-top:auto; text-align:center; display:block;"><i class="fas fa-bolt"></i> Enter the Arena</a>
                </div>
            </div>
        </div>

        <!-- Box 5: Rhymes of Israel -->
        <div class="vault-box" id="box5">
            <div class="box-title">
                <span>05 : Rhymes of Israel</span>
                <i class="fas fa-lock status-icon"></i>
            </div>
            <div class="box-inner">
                <div class="lock-interface">
                    <p>Complete the couplet.</p>
                    <div class="rhyme-puzzle">
                        <p style="font-family: 'Roboto Mono'">The news today is quite absurd,<br>so drop in the missing <span class="drop-zone" id="d-zone"></span></p>
                        <div class="draggable-word" draggable="true" id="d-word">WORD</div>
                    </div>
                </div>
                <div class="content-interface" style="background:#f8fafc; border-radius: 8px; margin: 5px;">
                    <div class="yearbook-card">
                        <h3 class="yearbook-font">Rhymes of Israel ðŸŽ“</h3>
                        <p style="color:#475569; font-size:0.85rem; font-family: sans-serif;">A satirical Chrome extension leveraging LLMs to automatically rewrite bleak Israeli news headlines into highschool-style, uplifting rhyming couplets.</p>
                        <a href="https://chromewebstore.google.com/detail/eainginjgdkpgolpjniijdihfbeeeklb" target="_blank" class="btn" style="background:#3b82f6; color:white; border:none; border-radius: 20px; font-family: sans-serif;"><i class="fab fa-chrome"></i> Add to Chrome</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Box 6: Portfolio Website -->
        <div class="vault-box" id="box6">
            <div class="box-title">
                <span>06 : Portfolio Site</span>
                <i class="fas fa-lock status-icon"></i>
            </div>
            <div class="box-inner">
                <div class="lock-interface">
                    <p>Initiate recursive inspection.</p>
                    <div class="meta-puzzle" id="meta-site">
                        <div class="mini-box"></div><div class="mini-box"></div><div class="mini-box"></div>
                        <div class="mini-box"></div><div class="mini-box"></div><div class="mini-box-target" onclick="triggerMetaZoom()"></div>
                        <div class="mini-box" style="grid-column: 1/-1; height: 10px;"></div>
                    </div>
                </div>
                <div class="content-interface">
                    <h3 class="text-cyan" style="margin-bottom: 0.5rem;">Recursive Architecture</h3>
                    <p>You are observing a self-describing construct. This portfolio was dynamically architected based on a strict set of AI-interpreted parameters.</p>
                    <a href="https://geekip.dev" class="btn"><i class="fas fa-undo"></i> Go to geekip.dev</a>
                </div>
            </div>
        </div>

        <!-- Box 7: Social Terminal -->
        <div class="vault-box box-social" id="box7">
            <div class="box-title">
                <span>07 : Comm Terminal</span>
                <i class="fas fa-lock status-icon"></i>
            </div>
            <div class="box-inner">
                <div class="lock-interface">
                    <p>Draw a continuous connection across nodes G, L, F to establish link.</p>
                    <div class="laser-grid" id="laser-container">
                        <canvas id="laserCanvas"></canvas>
                        <div class="node" id="node-G" data-id="G">G</div>
                        <div class="node" id="node-L" data-id="L">L</div>
                        <div class="node" id="node-F" data-id="F">F</div>
                    </div>
                </div>
                <div class="content-interface" style="flex-direction: row; align-items: center; justify-content: center;">
                    <div class="social-hub">
                        <a href="https://github.com/gevak" target="_blank" class="social-link"><i class="fab fa-github"></i></a>
                        <a href="https://linkedin.com/in/gevakip" target="_blank" class="social-link"><i class="fab fa-linkedin"></i></a>
                        <a href="https://facebook.com/geva.kipper" target="_blank" class="social-link"><i class="fab fa-facebook"></i></a>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <footer>
        <span class="ai-badge">Design dynamically assembled by <span class="model-name">DeepSeek-Coder-V2</span>, an AI architecture system.</span>
        <span class="stopwatch" id="clock">00:00:00:000</span>
    </footer>

    <script>
        // Typing Effect
        const textToType = "SYSTEM NOTE: This website's design is regenerated daily by an AI, resulting in an ever-changing digital landscape.";
        const typeTarget = document.getElementById('typewriter');
        let typeIndex = 0;

        function typeWriter() {
            if (typeIndex < textToType.length) {
                typeTarget.innerHTML += textToType.charAt(typeIndex);
                typeIndex++;
                setTimeout(typeWriter, 40);
            }
        }
        setTimeout(typeWriter, 500);

        // Global Unlock Function
        function unlock(boxNum) {
            const box = document.getElementById(`box${boxNum}`);
            if (!box.classList.contains('unlocked')) {
                box.classList.add('unlocked');
                const icon = box.querySelector('.status-icon');
                icon.classList.remove('fa-lock');
                icon.classList.add('fa-lock-open');
            }
        }

        // Box 1 Puzzle: LZ77 Sequence
        const seqContainer = document.getElementById('seq-puzzle');
        const pattern = ['A', 'B', 'A', 'B', 'A', 'B', 'X', 'B']; // X is anomaly
        pattern.forEach((type, idx) => {
            const b = document.createElement('div');
            b.className = type === 'B' ? 'seq-block seq-b' : 'seq-block seq-a';
            if (type === 'X') {
                b.style.backgroundColor = '#475569'; // looks like A, but breaks AB pattern
                b.onclick = () => unlock(1);
            }
            seqContainer.appendChild(b);
        });

        // Box 2 Puzzle: Heatmap
        const heatContainer = document.getElementById('heat-puzzle');
        let targetIndex = Math.floor(Math.random() * 16);
        for (let i = 0; i < 16; i++) {
            const cell = document.createElement('div');
            cell.className = 'heat-cell';
            if (i === targetIndex) {
                cell.style.backgroundColor = '#22c55e'; // brightest green
                cell.onclick = () => unlock(2);
            } else {
                // random red/dark greens
                const isRed = Math.random() > 0.5;
                const shade = 20 + Math.random() * 50;
                cell.style.backgroundColor = isRed ? `rgb(${shade+100}, ${shade}, ${shade})` : `rgb(${shade}, ${shade+60}, ${shade})`;
            }
            heatContainer.appendChild(cell);
        }

        // Box 3 Puzzle: Canvas Geometry Rotation
        const canvas = document.getElementById('geomCanvas');
        const ctx = canvas.getContext('2d');
        const slider = document.getElementById('pusher');
        
        function drawPoly(angle) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.save();
            ctx.translate(canvas.width/2, canvas.height/2);
            ctx.rotate(angle * Math.PI / 180);
            
            ctx.beginPath();
            ctx.moveTo(-40, -20);
            ctx.lineTo(40, -10);
            ctx.lineTo(20, 30);
            ctx.lineTo(-30, 20);
            ctx.closePath();
            
            ctx.fillStyle = 'rgba(6, 182, 212, 0.8)';
            ctx.fill();
            ctx.lineWidth = 2;
            ctx.strokeStyle = '#fff';
            ctx.stroke();
            ctx.restore();
            
            // Draw pusher base
            ctx.fillStyle = 'rgba(245, 158, 11, 0.2)';
            ctx.fillRect(10, canvas.height - 20, canvas.width - 20, 10);
        }
        
        drawPoly(parseInt(slider.value));
        
        slider.addEventListener('input', (e) => {
            const val = parseInt(e.target.value);
            drawPoly(val);
            if (Math.abs(val) < 2) {
                setTimeout(() => unlock(3), 300);
            }
        });

        // Box 5 Puzzle: Drag and Drop
        const word = document.getElementById('d-word');
        const zone = document.getElementById('d-zone');
        
        word.addEventListener('dragstart', (e) => {
            e.dataTransfer.setData('text/plain', 'WORD');
        });
        
        zone.addEventListener('dragover', (e) => e.preventDefault());
        
        zone.addEventListener('drop', (e) => {
            e.preventDefault();
            zone.innerText = "WORD";
            zone.style.background = "var(--amber)";
            zone.style.color = "#000";
            word.style.display = "none";
            unlock(5);
        });

        // Fallback for mobile (click to move)
        word.addEventListener('click', () => {
             zone.innerText = "WORD";
             zone.style.background = "var(--amber)";
             zone.style.color = "#000";
             word.style.display = "none";
             unlock(5);
        });

        // Box 6 Puzzle: Meta recursive
        function triggerMetaZoom() {
            const metaContainer = document.getElementById('meta-site');
            metaContainer.classList.add('zoom-animation');
            setTimeout(() => {
                unlock(6);
            }, 800);
        }

        // Box 7 Puzzle: Laser connect nodes
        const laserCanvas = document.getElementById('laserCanvas');
        const lctx = laserCanvas.getContext('2d');
        const lContainer = document.getElementById('laser-container');
        
        let isDrawing = false;
        let connectState = [];
        let startPos = {x:0, y:0};
        
        function resizeLaser() {
            laserCanvas.width = lContainer.clientWidth;
            laserCanvas.height = lContainer.clientHeight;
        }
        window.addEventListener('resize', resizeLaser);
        resizeLaser();

        function getCenter(el) {
            const rect = el.getBoundingClientRect();
            const containerRect = lContainer.getBoundingClientRect();
            return {
                x: rect.left - containerRect.left + rect.width / 2,
                y: rect.top - containerRect.top + rect.height / 2
            };
        }

        function checkNodeHit(x, y) {
            ['G', 'L', 'F'].forEach(id => {
                const el = document.getElementById(`node-${id}`);
                const center = getCenter(el);
                const dist = Math.hypot(center.x - x, center.y - y);
                if (dist < 25) {
                    if (!connectState.includes(id)) {
                        // Must be in order G -> L -> F
                        if (id === 'G' && connectState.length === 0) connectState.push('G');
                        else if (id === 'L' && connectState.includes('G') && !connectState.includes('L')) connectState.push('L');
                        else if (id === 'F' && connectState.includes('L')) {
                            connectState.push('F');
                            unlock(7);
                        }
                        if(connectState.includes(id)) el.classList.add('active');
                    }
                }
            });
        }

        lContainer.addEventListener('mousedown', (e) => {
            const rect = lContainer.getBoundingClientRect();
            isDrawing = true;
            connectState = [];
            document.querySelectorAll('.node').forEach(n => n.classList.remove('active'));
            lctx.clearRect(0,0, laserCanvas.width, laserCanvas.height);
            
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            checkNodeHit(x, y);
            if(connectState.includes('G')) {
                startPos = getCenter(document.getElementById('node-G'));
            }
        });

        window.addEventListener('mousemove', (e) => {
            if (!isDrawing) return;
            const rect = lContainer.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            checkNodeHit(x, y);
            
            lctx.clearRect(0,0, laserCanvas.width, laserCanvas.height);
            
            // Draw confirmed segments
            lctx.beginPath();
            lctx.lineWidth = 4;
            lctx.strokeStyle = 'rgba(245, 158, 11, 0.8)';
            lctx.lineJoin = 'round';
            lctx.lineCap = 'round';
            lctx.shadowBlur = 10;
            lctx.shadowColor = 'var(--amber)';
            
            if (connectState.length > 0) {
                const p1 = getCenter(document.getElementById(`node-${connectState[0]}`));
                lctx.moveTo(p1.x, p1.y);
                
                for(let i=1; i<connectState.length; i++){
                    const p = getCenter(document.getElementById(`node-${connectState[i]}`));
                    lctx.lineTo(p.x, p.y);
                }
                
                // Draw to current mouse
                if(connectState.length < 3) {
                    lctx.lineTo(x, y);
                }
            }
            lctx.stroke();
        });

        window.addEventListener('mouseup', () => {
            isDrawing = false;
            if(connectState.length < 3) {
                lctx.clearRect(0,0, laserCanvas.width, laserCanvas.height);
                document.querySelectorAll('.node').forEach(n => n.classList.remove('active'));
                connectState = [];
            }
        });

        // Touch support for Box 7
        lContainer.addEventListener('touchstart', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousedown', { clientX: touch.clientX, clientY: touch.clientY });
            lContainer.dispatchEvent(mouseEvent);
        });
        window.addEventListener('touchmove', (e) => {
            if(!isDrawing) return;
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousemove', { clientX: touch.clientX, clientY: touch.clientY });
            window.dispatchEvent(mouseEvent);
        });
        window.addEventListener('touchend', () => {
            const mouseEvent = new MouseEvent('mouseup');
            window.dispatchEvent(mouseEvent);
        });

        // Footer Stopwatch
        const clockEl = document.getElementById('clock');
        const baseline = new Date('2026-02-24T01:27:16Z').getTime();

        setInterval(() => {
            const now = Date.now();
            const diff = Math.abs(now - baseline); // Using absolute diff since target is in the "future" relative to real current time for dramatic effect

            const hrs = Math.floor(diff / (1000 * 60 * 60));
            const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const secs = Math.floor((diff % (1000 * 60)) / 1000);
            
            const pad = (num, size=2) => String(num).padStart(size, '0');
            
            clockEl.innerText = `${pad(hrs)}:${pad(mins)}:${pad(secs)}`;
        }, 1000);

    </script>
<!-- Add this block to embed the like button -->
    <script src="/static/js/like_button.js"></script>
    <script>
        LikeButton.init({
          pageId: "20260224",
          position: "bottom-right", // Options: bottom-right, bottom-left, top-right, top-left
        });
    </script>

</body>
</html>