<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geva Kipper - Debugging Portfolio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* --- CSS Variables and Global Resets --- */
        :root {
            --bg-color: #1a1a1a;
            --bg-light: #2a2a2a;
            --text-color: #f0f0f0;
            --grey-text-color: #999;
            --accent-color: #00bfff; /* Deep sky blue */
            --green-color: #39ff14; /* Neon green */
            --warn-color: #ffd700; /* Gold */
            --success-color: #39ff14;
            --font-mono: 'Fira Code', monospace;
            --font-sans: 'Inter', sans-serif;
            --grid-color: rgba(60, 60, 60, 0.4);
            --transition-speed: 0.5s;
            --long-transition-speed: 1.5s;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        /* --- Initial "Broken" State --- */
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-mono);
            overflow: hidden; /* Prevent scrollbars during initial chaos */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-image:
                linear-gradient(to right, var(--grid-color) 1px, transparent 1px),
                linear-gradient(to bottom, var(--grid-color) 1px, transparent 1px);
            background-size: 40px 40px;
            z-index: -1;
            opacity: 0.2;
            animation: pulseGrid 8s ease-in-out infinite alternate;
        }
        
        main {
            flex-grow: 1;
            width: 100%;
            position: relative;
        }

        header {
            text-align: center;
            padding: 40px 20px 20px;
            position: relative;
            z-index: 10;
        }

        #main-header {
            font-size: clamp(2.5rem, 8vw, 4rem);
            font-weight: 700;
            line-height: 1.1;
            letter-spacing: 0.2em; /* Erratic kerning */
            font-kerning: none;
        }

        #main-header span {
            display: inline-block;
        }
        
        #sub-header {
            color: var(--grey-text-color);
            font-weight: 400;
            margin-top: -5px;
            margin-left: 20px; /* Overlap effect */
            filter: blur(0.5px);
            max-width: 40ch;
            margin-inline: auto;
        }

        #ai-disclaimer {
            margin-top: 15px;
            color: var(--grey-text-color);
            opacity: 0.5;
            transition: opacity var(--transition-speed) ease;
        }

        .ai-icon-container { display: none; }

        #prompt-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.5rem;
            color: var(--green-color);
            z-index: 20;
            white-space: nowrap;
        }

        #prompt-container span::after {
            content: '_';
            animation: blink 1s step-end infinite;
        }
        
        #project-grid {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
        }

        .project-box {
            position: absolute;
            width: 280px;
            height: 200px;
            background-color: var(--bg-light);
            border: 1px solid var(--grid-color);
            overflow: hidden;
            transition: transform var(--long-transition-speed) cubic-bezier(0.165, 0.84, 0.44, 1),
                        opacity var(--long-transition-speed) ease;
        }

        .broken-content {
            height: 100%;
            overflow: hidden;
            opacity: 1;
            transition: opacity var(--transition-speed) ease;
        }

        .broken-content pre {
            font-size: 0.75rem;
            line-height: 1.4;
            color: var(--grey-text-color);
            animation: scroll-code 20s linear infinite;
        }
        .broken-content pre .c1 { color: #808080; }
        .broken-content pre .c2 { color: #6a9955; }
        .broken-content pre .c3 { color: #569cd6; }
        .broken-content pre .c4 { color: #c586c0; }
        .broken-content pre .c5 { color: #4ec9b0; }

        .rendered-content {
            position: absolute;
            inset: 0;
            padding: 20px;
            opacity: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            transition: opacity var(--transition-speed) ease;
        }

        .default-view h3, .default-view .project-icon {
            transition: opacity var(--transition-speed) ease, transform var(--transition-speed) ease;
        }
        
        .project-box:hover .default-view h3 {
             transform: translateY(-10px);
             opacity: 0;
        }
        .project-box:hover .default-view .project-icon {
             transform: translateY(-10px);
             opacity: 0;
        }
        
        .hover-view {
            position: absolute;
            inset: 0;
            padding: 20px;
            opacity: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 15px;
            transform: translateY(10px);
            transition: opacity var(--transition-speed) ease, transform var(--transition-speed) ease;
        }
        .project-box:hover .hover-view {
            opacity: 1;
            transform: translateY(0);
        }

        .hover-view p {
            font-size: 0.9rem;
            color: var(--grey-text-color);
            line-height: 1.5;
        }

        .project-links {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .project-links a {
            color: var(--accent-color);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: color var(--transition-speed), transform var(--transition-speed);
        }
        .project-links a:hover {
            color: var(--text-color);
            transform: translateY(-2px);
        }
        .project-links a svg { width: 18px; height: 18px; }

        footer {
            width: 100%;
            text-align: center;
            padding: 20px;
            font-size: 0.8rem;
            color: var(--grey-text-color);
            opacity: 0; /* Hidden initially */
            transition: opacity var(--transition-speed) ease;
        }
        #stopwatch { font-family: var(--font-mono); }

        /* --- Console Overlay --- */
        #console-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(5px);
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s ease;
        }
        #console-overlay.visible {
            opacity: 1;
        }
        #console-text {
            font-family: var(--font-mono);
            padding: 20px;
            font-size: 0.9rem;
            line-height: 1.6;
            white-space: pre-wrap;
            height: 100%;
            overflow-y: hidden;
        }
        #console-text span { display: block; }
        .log-info { color: #ccc; }
        .log-warn { color: var(--warn-color); }
        .log-success { color: var(--success-color); }
        .log-cmd { color: var(--green-color); font-weight: bold; }
        
        /* --- "Rendered" State --- */
        body.rendered {
            overflow: auto;
            font-family: var(--font-sans);
        }

        body.rendered #prompt-container {
            opacity: 0;
            pointer-events: none;
        }
        
        body.rendered header {
            transition: all var(--transition-speed) ease;
        }

        body.rendered #main-header {
            letter-spacing: -0.02em;
            font-kerning: auto;
            transition: letter-spacing var(--long-transition-speed) ease;
        }

        body.rendered #sub-header {
            margin-top: 10px;
            margin-left: 0;
            filter: none;
            transition: all var(--long-transition-speed) ease;
        }

        body.rendered #ai-disclaimer {
            opacity: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        body.rendered .ai-icon-container {
            display: inline-block;
            position: relative;
            width: 20px;
            height: 20px;
        }
        .ai-icon-container svg {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            transition: opacity 0.5s ease;
        }
        .ai-icon-container .cog-icon {
            animation: spin 8s linear infinite;
        }
        .ai-icon-container .brain-icon { opacity: 0; }
        body.rendered .ai-icon-container:hover .cog-icon { opacity: 0; }
        body.rendered .ai-icon-container:hover .brain-icon { opacity: 1; }
        
        body.rendered #project-grid {
            position: relative;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 40px 5%;
            max-width: 1400px;
            margin: 0 auto;
        }

        body.rendered .project-box {
            position: static;
            width: auto;
            height: auto;
            aspect-ratio: 1.5 / 1;
            transform: none !important; /* Override inline styles */
            border-color: var(--accent-color);
            box-shadow: 0 0 0 0 rgba(0, 191, 255, 0.7);
            transition: transform var(--transition-speed) ease,
                        box-shadow var(--transition-speed) ease,
                        border-color var(--transition-speed) ease;
        }
        body.rendered .project-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 25px 5px rgba(0, 191, 255, 0.3);
        }
        body.rendered .project-box a {
            font-family: var(--font-sans);
        }

        body.rendered .project-box.shake-animation {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }
        
        body.rendered .broken-content { opacity: 0; }
        body.rendered .rendered-content { opacity: 1; }

        .project-icon {
            width: 48px;
            height: 48px;
            color: var(--accent-color);
            margin-bottom: 15px;
        }
        
        body.rendered footer {
            opacity: 1;
        }

        /* --- Animations --- */
        @keyframes pulseGrid {
            from { opacity: 0.1; }
            to { opacity: 0.3; }
        }

        @keyframes blink {
            50% { opacity: 0; }
        }

        @keyframes scroll-code {
            from { transform: translateY(0); }
            to { transform: translateY(-80%); }
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes shake {
          10%, 90% { transform: translate3d(-1px, 0, 0) translateY(-5px); }
          20%, 80% { transform: translate3d(2px, 0, 0) translateY(-5px); }
          30%, 50%, 70% { transform: translate3d(-4px, 0, 0) translateY(-5px); }
          40%, 60% { transform: translate3d(4px, 0, 0) translateY(-5px); }
        }

    </style>
</head>
<body>
    <div id="console-overlay">
        <pre id="console-text"></pre>
    </div>

    <main id="portfolio-container">
        <header>
            <h1 id="main-header">Geva Kipper</h1>
            <p id="sub-header">Software Engineer at Google, working on conversational AI.</p>
            <p id="ai-disclaimer">
                <span class="ai-icon-container">
                    <!-- SVGs for cog and brain -->
                     <svg class="cog-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1v2m0 18v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M1 12h2m18 0h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41M12 6a6 6 0 1 0 0 12 6 6 0 0 0 0-12z"/></svg>
                     <svg class="brain-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v0A2.5 2.5 0 0 1 9.5 7h-3A2.5 2.5 0 0 1 4 4.5v0A2.5 2.5 0 0 1 6.5 2m8 0A2.5 2.5 0 0 1 18 4.5v0A2.5 2.5 0 0 1 15.5 7h-3A2.5 2.5 0 0 1 10 4.5v0A2.5 2.5 0 0 1 12.5 2M4.5 9.5A2.5 2.5 0 0 1 7 12v0a2.5 2.5 0 0 1-2.5 2.5h-2A2.5 2.5 0 0 1 0 12v0A2.5 2.5 0 0 1 2.5 9.5m15 0A2.5 2.5 0 0 1 22 12v0a2.5 2.5 0 0 1-2.5 2.5h-2a2.5 2.5 0 0 1-2.5-2.5v0A2.5 2.5 0 0 1 17.5 9.5M6 16.5A2.5 2.5 0 0 1 8.5 19v0a2.5 2.5 0 0 1-2.5 2.5h-3A2.5 2.5 0 0 1 0.5 19v0A2.5 2.5 0 0 1 3 16.5m12 0A2.5 2.5 0 0 1 17.5 19v0a2.5 2.5 0 0 1-2.5 2.5h-3a2.5 2.5 0 0 1-2.5-2.5v0A2.5 2.5 0 0 1 12.5 16.5"/></svg>
                </span>
                // This website is re-designed each day by AI and is thus ever-changing
            </p>
        </header>
        
        <div id="prompt-container">
            <span>> </span>
        </div>
        
        <div id="project-grid">
            <!-- Project boxes will be dynamically generated by JS -->
        </div>
    </main>
    
    <footer>
        Design generated by an AI assistant. Time since this design was rendered: <span id="stopwatch">00:00:00</span>
    </footer>

    <script defer>
        document.addEventListener('DOMContentLoaded', () => {

            const ELS = {
                body: document.body,
                mainHeader: document.getElementById('main-header'),
                promptContainer: document.getElementById('prompt-container'),
                promptCursor: document.querySelector('#prompt-container span'),
                projectGrid: document.getElementById('project-grid'),
                consoleOverlay: document.getElementById('console-overlay'),
                consoleText: document.getElementById('console-text'),
                stopwatch: document.getElementById('stopwatch'),
                portfolioBox: null // will be set later
            };

            const STATE = {
                glitchInterval: null,
                interactionDone: false,
                renderStartTime: new Date('2024-05-21T10:00:00') // Fixed date for consistent stopwatch
            };
            
            const ICONS = {
                globe: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>`,
                play: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>`,
                article: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20v-10H6.5A2.5 2.5 0 0 1 4 4.5v15zM4 2v2M4 7v2M4 12v2M4 17v2"></path><path d="M20 7H8.5"></path><path d="M20 12H8.5"></path></svg>`,
                github: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>`,
                linkedin: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>`,
                facebook: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>`
            };
            
            const PROJECTS = [
                {
                    title: 'GlglStats',
                    icon: `<svg class="project-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 12h2l2-10 4 20 4-10 4 10 2-20h2"/></svg>`,
                    description: "An analytics dashboard for Galgalatz, Israel's most popular radio station, tracking music trends in real-time.",
                    links: [
                        { text: 'Website', url: 'https://glglstats.geekip.dev', icon: ICONS.globe },
                        { text: 'Talk', url: 'https://www.youtube.com/watch?v=jrKAtOsj1Lo', icon: ICONS.play }
                    ]
                },
                {
                    title: 'Ahuzat Dibuk',
                    icon: `<svg class="project-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>`,
                    description: "A viral data analysis project that exposed parking patterns, leading to policy changes in Tel-Aviv.",
                    links: [
                        { text: 'Post', url: 'https://www.facebook.com/groups/secrettelaviv/posts/10159636301195943', icon: ICONS.facebook },
                        { text: 'News 1', url: 'https://13tv.co.il/item/news/domestic/internal/parking-902956407/', icon: ICONS.article },
                        { text: 'News 2', url: 'https://www.mako.co.il/nexter-news/Article-ae43964b891bf71027.htm', icon: ICONS.article }
                    ]
                },
                {
                    title: '2D Part Orienting',
                    icon: `<svg class="project-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><polygon points="50,5 95,25 95,75 50,95 5,75 5,25" fill="none" stroke="currentColor" stroke-width="5" /></svg>`,
                    description: "Academic research on a mechanical algorithm to orient any 2D part with a high probability.",
                    links: [ { text: 'TAU Page', url: 'https://www.cgl.cs.tau.ac.il/projects/2d-part-orienting/', icon: ICONS.globe } ]
                },
                {
                    title: 'The Turing Jest',
                    icon: `<svg class="project-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2"><path d="M12,2A10,10,0,0,0,2,12a1,1,0,0,0,1,1H15a1,1,0,0,0,1-1,8,8,0,0,1,0-16,1,1,0,0,0-1-1H4a1,1,0,0,0-1,1A10,10,0,0,0,12,22a10.12,10.12,0,0,0,9-12.28A.79.79,0,0,0,21,9"/><path d="M7 15.5c.67.67 1.33 1 2 1s1.33-.33 2-1M6 9h.01M10 9h.01"/></svg>`,
                    description: "A web-based game challenging you to distinguish between human and AI-generated jokes.",
                    links: [ { text: 'Play Game', url: 'https://jest.geekip.dev', icon: ICONS.globe } ]
                },
                {
                    title: 'Rhymes of Israel',
                    icon: `<svg class="project-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2.5 2v6h6v14H18v-6h3.5v-6H18V2z"></path><path d="M11 11.5v-1a2.5 2.5 0 0 0-5 0v1a2.5 2.5 0 0 0 5 0z"></path></svg>`,
                    description: "A Chrome extension that finds Hebrew rhymes, using NLP to analyze vowel patterns.",
                    links: [ { text: 'Chrome Store', url: 'https://chromewebstore.google.com/detail/eainginjgdkpgolpjniijdihfbeeeklb', icon: ICONS.globe } ]
                },
                {
                    title: 'This Portfolio',
                    id: 'portfolio-box',
                    icon: `<svg class="project-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><rect x="2" y="2" width="96" height="96" fill="none" stroke="currentColor" stroke-width="4"/><rect x="18" y="18" width="64" height="64" fill="none" stroke="currentColor" stroke-width="4"/><rect x="34" y="34" width="32" height="32" fill="none" stroke="currentColor" stroke-width="4"/></svg>`,
                    description: "A meta-project: this very website, built with a 'debugging' theme and generative design concepts.",
                    links: [ { text: 'You Are Here', url: 'https://geekip.dev', icon: ICONS.globe } ]
                },
                {
                    title: 'Connect',
                    icon: `<svg class="project-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"></path></svg>`,
                    description: "Find me on the web. Let's build something great together.",
                    links: [
                        { text: 'GitHub', url: 'https://github.com/gevak', icon: ICONS.github },
                        { text: 'LinkedIn', url: 'https://linkedin.com/in/gevakip', icon: ICONS.linkedin },
                        { text: 'Facebook', url: 'https://facebook.com/geva.kipper', icon: ICONS.facebook }
                    ]
                }
            ];
            
            // --- INITIALIZATION ---
            
            function setupBrokenState() {
                // 1. Jumble the header
                const originalHeaderText = ELS.mainHeader.textContent;
                ELS.mainHeader.innerHTML = originalHeaderText.split('').map(char => `<span>${char}</span>`).join('');
                const headerSpans = ELS.mainHeader.querySelectorAll('span');
                const chars = "!@#$%^&*(){}|[]";

                STATE.glitchInterval = setInterval(() => {
                    headerSpans.forEach(span => {
                        if (Math.random() > 0.85 && span.textContent !== ' ') {
                            span.textContent = chars[Math.floor(Math.random() * chars.length)];
                        } else {
                            span.textContent = span.dataset.originalChar || span.textContent;
                        }
                    });
                }, 100);
                headerSpans.forEach(span => span.dataset.originalChar = span.textContent);

                // 2. Populate and scatter project boxes
                const viewportW = window.innerWidth;
                const viewportH = window.innerHeight;
                ELS.projectGrid.innerHTML = PROJECTS.map(p => createProjectBox(p)).join('');
                document.querySelectorAll('.project-box').forEach((box) => {
                    const top = Math.random() * (viewportH - 250) + 50;
                    const left = Math.random() * (viewportW - 320) + 20;
                    const rot = Math.random() * 20 - 10;
                    box.style.top = `${top}px`;
                    box.style.left = `${left}px`;
                    box.style.transform = `rotate(${rot}deg)`;
                });
                
                // Set special element for portfolio box
                ELS.portfolioBox = document.getElementById('portfolio-box');
            }

            function createProjectBox(project) {
                const linksHTML = project.links.map(link => 
                    `<a href="${link.url}" target="_blank" rel="noopener noreferrer">
                        ${link.icon}<span>${link.text}</span>
                    </a>`
                ).join('');

                const gibberish = generateGibberishHTML();

                return `
                    <div class="project-box" ${project.id ? `id="${project.id}"` : ''}>
                        <div class="broken-content">
                            <pre><code>${gibberish}</code></pre>
                        </div>
                        <div class="rendered-content">
                           <div class="default-view">
                                ${project.icon}
                                <h3>${project.title}</h3>
                           </div>
                           <div class="hover-view">
                                <p>${project.description}</p>
                                <div class="project-links">${linksHTML}</div>
                           </div>
                        </div>
                    </div>
                `;
            }

            function generateGibberishHTML() {
                const lines = [
                    '<span class="c1">// Initializing buffer overflow...</span>',
                    '<span class="c3">const</span> <span class="c5">entropy</span> = <span class="c4">Math</span>.sqrt(-1);',
                    '<span class="c3">for</span> (<span class="c3">let</span> i=0; i&lt;999; i*=-1) {',
                    '  <span class="c4">document</span>.setStyle(<span class="c2">`z-index: <span class="c3">${Math.floor(Math.random() * 1000)}</span>`</span>);',
                    '  <span class="c4">console</span>.log(<span class="c2">"SYNTAX_ERR"</span>);',
                    '}',
                    '[<span class="c5"> CSS_MATRIX_FAILURE </span>]',
                    '<span class="c1">/* Re-routing neural network... */</span>',
                    'ptr :: <span class="c3">void*</span> = <span class="c4">malloc</span>(<span class="c5">0xDEADBEEF</span>);',
                    '<span class="c4">release</span>(ptr);',
                    '<span class="c3">transform-origin</span>: 50% 150.22%;',
                    'ASCII art data corrupt...',
                    '[[<span class="c4">λ.x</span>(<span class="c5">λ.y</span>(<span class="c4">x</span>))]]',
                    '<span class="c1">#include</span> <span class="c2">&lt;chaos&gt;</span>',
                    '<span class="c3">function</span> <span class="c5">unrender</span>() { <span class="c4">return</span> <span class="c5">unrender</span>(); }'
                ];
                let output = '';
                for (let i=0; i<30; i++){
                    output += lines[Math.floor(Math.random() * lines.length)] + '\n';
                }
                return output;
            }


            // --- "DEBUG" SEQUENCE ---

            function triggerRender(event) {
                if (STATE.interactionDone) return;
                STATE.interactionDone = true;
                window.removeEventListener('click', triggerRender);
                window.removeEventListener('keydown', triggerRender);

                sequenceStep1_TypeCommand();
            }
            
            async function sequenceStep1_TypeCommand(){
                const command = "system.render(true)";
                ELS.promptCursor.textContent = "> ";
                ELS.promptCursor.style.animation = 'none'; // Stop blinking
                
                for(let i=0; i<command.length; i++){
                    await new Promise(r => setTimeout(r, 50));
                    ELS.promptCursor.textContent += command[i];
                }
                ELS.promptCursor.innerHTML += '<span style="animation: blink 0.5s step-end infinite;">_</span>';
                
                await new Promise(r => setTimeout(r, 400));
                sequenceStep2_RunConsole();
            }

            async function sequenceStep2_RunConsole() {
                ELS.consoleOverlay.classList.add('visible');
                const logLines = [
                    {text: "EXECUTING..."},
                    {text: "[INFO] Initializing DOM...", class: "log-info"},
                    {text: "[INFO] Parsing assets...", class: "log-info"},
                    {text: "[WARN] Layout conflicts detected: 7 elements.", class: "log-warn"},
                    {text: "[INFO] Applying AI visual patch v.2024.05.21...", class: "log-info"},
                    {text: "[INFO] Recompiling CSS matrix...", class: "log-info"},
                    {text: "[SUCCESS] Render complete.", class: "log-success"},
                ];

                for(const line of logLines) {
                    await new Promise(r => setTimeout(r, 200 + Math.random() * 150));
                    const span = document.createElement('span');
                    span.textContent = line.text;
                    if (line.class) span.className = line.class;
                    ELS.consoleText.appendChild(span);
                }
                
                await new Promise(r => setTimeout(r, 1000));
                sequenceStep3_FixLayout();
            }
            
            function sequenceStep3_FixLayout() {
                // Fade out console
                ELS.consoleOverlay.style.opacity = '0';
                
                // Add rendered class to body to trigger CSS transitions
                ELS.body.classList.add('rendered');
                
                // Add staggered delay to project boxes for the "wave" effect
                document.querySelectorAll('.project-box').forEach((box, index) => {
                    box.style.transitionDelay = `${index * 100}ms`;
                });
                
                // Clean up the header glitch
                clearInterval(STATE.glitchInterval);
                const headerSpans = ELS.mainHeader.querySelectorAll('span');
                headerSpans.forEach(span => {
                    span.textContent = span.dataset.originalChar;
                });
                
                // Start the footer stopwatch
                startStopwatch();
            }


            // --- FINAL STATE LOGIC ---
            function startStopwatch() {
                setInterval(() => {
                    const now = new Date();
                    const diff = now - STATE.renderStartTime;

                    const hours = Math.floor(diff / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                    
                    const format = (n) => n.toString().padStart(2, '0');
                    ELS.stopwatch.textContent = `${format(hours)}:${format(minutes)}:${format(seconds)}`;
                }, 1000);
            }
            
            function handleSelfClick(e) {
                // Only trigger if in rendered state
                if(!ELS.body.classList.contains('rendered')) return;
                
                const selfLink = ELS.portfolioBox.querySelector('a');
                if (e.target === selfLink || selfLink.contains(e.target)) {
                    e.preventDefault();
                    if (!ELS.portfolioBox.classList.contains('shake-animation')) {
                        ELS.portfolioBox.classList.add('shake-animation');
                        setTimeout(() => ELS.portfolioBox.classList.remove('shake-animation'), 500);
                    }
                }
            }
            
            // --- EVENT LISTENERS ---
            window.addEventListener('click', triggerRender, { once: true });
            window.addEventListener('keydown', triggerRender, { once: true });
            // The self-click listener is attached to the grid because the box itself doesn't exist on load
            ELS.projectGrid.addEventListener('click', handleSelfClick);

            // --- LET'S GO ---
            setupBrokenState();
        });
    </script>
<!-- Add this block to embed the like button -->
    <script src="/static/js/like_button.js"></script>
    <script>
        LikeButton.init({
          pageId: "20250722",
          position: "bottom-right", // Options: bottom-right, bottom-left, top-right, top-left
        });
    </script>

</body>
</html>