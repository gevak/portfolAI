<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geva Kipper // MOTHERSHIP.AI Portfolio</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚡️</text></svg>">
    <style>
        :root {
            --bg-color: #1e1e1e;
            --main-pane-bg: rgba(30, 30, 30, 0.9);
            --minimap-bg: #1a1a1a;
            --footer-bg: #1a1a1a;
            --viewport-handle-bg: rgba(255, 255, 255, 0.1);
            --viewport-handle-hover-bg: rgba(255, 255, 255, 0.2);
            --text-color: #d4d4d4;
            --comment-color: #6a9955;
            --keyword-color: #569cd6;
            --class-name-color: #4ec9b0;
            --property-name-color: #9cdcfe;
            --string-color: #ce9178;
            --punctuation-color: #d4d4d4;
            --link-hover-border: #4ec9b0;
            --modal-bg: #0d0d0d;
            --minimap-highlight: rgba(255, 255, 255, 0.05);

            --font-main: "Consolas", "Courier New", monospace;
        }

        /* --- Base & Scrollbar --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            scrollbar-width: thin;
            scrollbar-color: var(--viewport-handle-bg) var(--minimap-bg);
        }

        *::-webkit-scrollbar {
            width: 8px;
        }

        *::-webkit-scrollbar-track {
            background: var(--minimap-bg);
        }

        *::-webkit-scrollbar-thumb {
            background-color: var(--viewport-handle-bg);
            border-radius: 4px;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: var(--font-main);
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        /* --- Loading Animation --- */
        #loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-color);
            z-index: 10000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 1.2rem;
            transition: opacity 0.7s ease-in-out;
        }
        #loader-text::after {
            content: '|';
            animation: blink 1s step-end infinite;
        }
        @keyframes blink {
            50% { opacity: 0; }
        }
        #loader-scroll {
            position: absolute;
            top: 0;
            left: 5%;
            width: 90%;
            height: 100%;
            overflow: hidden;
            opacity: 0;
            transition: opacity 0.3s ease-in;
            color: var(--comment-color);
            font-size: 0.8rem;
            white-space: pre;
            line-height: 1;
        }
        #loader-scroll-content {
            animation: scroll-up 2s linear forwards;
        }
        @keyframes scroll-up {
            from { transform: translateY(0); }
            to { transform: translateY(-100%); }
        }

        /* --- Main Layout --- */
        .site-wrapper {
            display: flex;
            width: 100%;
            height: 100vh;
            opacity: 0;
            transition: opacity 0.5s ease-in;
        }

        #main-content {
            flex-grow: 1;
            height: 100vh;
            overflow-y: scroll;
            background-color: var(--main-pane-bg);
            padding: 3rem 4rem 10rem 4rem; /* Extra padding at bottom */
            font-size: 1rem;
            line-height: 1.6;
            scroll-behavior: smooth;
        }

        #minimap-container {
            flex-basis: 18%;
            flex-shrink: 0;
            max-width: 250px;
            height: 100vh;
            position: relative;
            background-color: var(--minimap-bg);
            padding: 3rem 1.5rem;
            overflow: hidden;
            cursor: pointer;
        }

        /* --- Header & Code Styling --- */
        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .class-name { color: var(--class-name-color); font-weight: bold; }
        .comment { color: var(--comment-color); font-style: italic; }
        .keyword { color: var(--keyword-color); }
        .property { color: var(--property-name-color); }
        .string { color: var(--string-color); }
        .punctuation { color: var(--punctuation-color); }
        .project-title { color: var(--class-name-color); transition: text-shadow 0.3s ease; }
        
        .project-block {
            position: relative;
            margin-bottom: 2em;
            padding:_ 1em; /* for targeting */
        }

        .background-viz {
            position: absolute;
            top: -2em;
            left: -3em;
            right: -3em;
            bottom: -2em;
            z-index: -1;
            opacity: 0.1;
            overflow: hidden;
            border-radius: 8px;
        }
        .background-viz canvas {
            width: 100%;
            height: 100%;
        }

        a {
            color: inherit;
            text-decoration: none;
            position: relative;
            transition: color 0.2s ease;
        }
        a::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 1px;
            bottom: -2px;
            left: 0;
            background-color: var(--link-hover-border);
            transform: scaleX(0);
            transform-origin: bottom right;
            transition: transform 0.25s ease-out;
        }
        a:hover::after {
            transform: scaleX(1);
            transform-origin: bottom left;
        }
        a:hover {
            color: var(--class-name-color);
        }

        /* --- Minimap --- */
        #viewport-indicator {
            position: absolute;
            left: 0;
            width: 100%;
            background-color: var(--viewport-handle-bg);
            border: 1px solid var(--viewport-handle-hover-bg);
            border-radius: 2px;
            transition: background-color 0.2s ease;
            cursor: grab;
        }
        #viewport-indicator:hover {
            background-color: var(--viewport-handle-hover-bg);
        }
        #viewport-indicator:active {
            cursor: grabbing;
        }

        .minimap-section {
            position: absolute;
            width: calc(100% - 3rem); /* Match container padding */
            transition: filter 0.3s ease, background-color 0.3s ease;
        }
        .minimap-section:hover {
            filter: brightness(1.75);
        }
        .minimap-section canvas, .minimap-section .icon-container {
            width: 100%;
            height: 100%;
        }
        .icon-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        .icon-container svg {
            width: 25%;
            height: auto;
            max-height: 80%;
            fill: var(--text-color);
        }

        /* --- Footer --- */
        footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30px;
            background-color: var(--footer-bg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1rem;
            font-size: 0.8rem;
            z-index: 1000;
        }

        /* --- Video Modal --- */
        #video-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0s 0.3s linear;
        }
        #video-modal.visible {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.3s ease;
        }
        .modal-content {
            background-color: var(--modal-bg);
            width: 80%;
            max-width: 1120px;
            height: auto;
            aspect-ratio: 16/9;
            border: 1px solid var(--viewport-handle-hover-bg);
            border-radius: 5px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
        #video-modal.visible .modal-content {
            transform: scale(1);
        }

        .modal-header {
            background-color: var(--footer-bg);
            padding: 5px 10px;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            flex-shrink: 0;
        }
        .modal-title {
            margin-right: auto;
            font-size: 0.8rem;
            color: var(--comment-color);
        }
        .modal-close {
            background: #ff5f56;
            border: 1px solid #e0443e;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: pointer;
        }
        .modal-body {
            flex-grow: 1;
        }
        .modal-body iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>

    <!-- Loading Screen -->
    <div id="loader">
        <div id="loader-text">// Generating today's design...</div>
        <div id="loader-scroll"><div id="loader-scroll-content"></div></div>
    </div>
    
    <!-- Video Player Modal -->
    <div id="video-modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title">root@mothership:~ C:\Player.exe</span>
                <button class="modal-close" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <iframe id="video-iframe" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <div class="site-wrapper">
        <!-- Main Content Pane -->
        <main id="main-content">
            <header id="page-header">
<pre><code><span class="keyword">class</span> <span class="class-name">GevaKipper</span> {
  <span class="keyword">constructor</span>() {
    <span class="keyword">this</span>.<span class="property">role</span> = <span class="string">"Software Engineer at Google, working on core infrastructure for AI products."</span>;
  }
}

<span class="comment">// MOTHERSHIP.AI Daily Build: </span><span id="daily-build" class="comment"></span>
<span class="comment">// This portfolio's theme is re-generated daily. What you see today is unique.</span>
</code></pre>
            </header>
            
            <section id="content-projects">
<pre><code><span class="keyword">const</span> portfolio_projects = [
    <div class="project-block" id="project-glglstats">
        <div class="background-viz" id="viz-glglstats"><canvas></canvas></div>
<span class="punctuation">{</span>
    <span class="property">name</span>: <span class="string project-title">"GlglStats"</span>,
    <span class="property">description</span>: <span class="comment">"/* A Python project measuring song repetitiveness in Israeli pop charts using LZ77 compression, with visualizations of repetition patterns. */"</span>,
    <span class="property">site</span>: <span class="string">"<a href="https://glglstats.geekip.dev" target="_blank">https://glglstats.geekip.dev</a>"</span>,
    <span class="property">video</span>: <span class="string">"<a href="#" data-video-id="jrKAtOsj1Lo">https://youtube.com/watch?v=jrKAtOsj1Lo</a>"</span> <span class="comment">// Presented at PyData TLV</span>
<span class="punctuation">}</span>,
    </div>
    <div class="project-block" id="project-ahuzat-dibuk">
        <div class="background-viz" id="viz-ahuzat-dibuk"><canvas></canvas></div>
<span class="punctuation">{</span>
    <span class="property">name</span>: <span class="string project-title">"Ahuzat Dibuk"</span>,
    <span class="property">description</span>: <span class="comment">"/* Python scraping & data viz project tracking Tel-Aviv parking occupancy to generate predictive heatmaps for residents. Featured in major news outlets. */"</span>,
    <span class="property">news_1</span>: <span class="string">"<a href="https://13tv.co.il/item/news/domestic/internal/parking-902956407/" target="_blank">https://13tv.co.il/item/news/domestic/internal/parking-902956407/</a>"</span>,
    <span class="property">news_2</span>: <span class="string">"<a href="https://www.mako.co.il/nexter-news/Article-ae43964b891bf71027.htm" target="_blank">https://www.mako.co.il/nexter-news/Article-ae43964b891bf71027.htm</a>"</span>,
    <span class="property">publication</span>: <span class="string">"<a href="https://www.facebook.com/groups/secrettelaviv/posts/10159636301195943/" target="_blank">https://www.facebook.com/groups/secrettelaviv/posts/10159636301195943/</a>"</span>
<span class="punctuation">}</span>,
    </div>
    <div class="project-block" id="project-2d-orienting">
<span class="punctuation">{</span>
    <span class="property">name</span>: <span class="string project-title">"2D Part Orienting"</span>,
    <span class="property">description</span>: <span class="comment">"/* Research in computational geometry for my M.Sc. at Tel-Aviv University, focusing on algorithms to efficiently orient 2D parts using parallel grippers. */"</span>,
    <span class="property">project_page</span>: <span class="string">"<a href="https://www.cgl.cs.tau.ac.il/projects/2d-part-orienting/" target="_blank">https://www.cgl.cs.tau.ac.il/projects/2d-part-orienting/</a>"</span> <span class="comment">// Includes paper and code</span>
<span class="punctuation">}</span>,
    </div>
    <div class="project-block" id="project-turing-jest">
<span class="punctuation">{</span>
    <span class="property">name</span>: <span class="string project-title">"The Turing Jest"</span>,
    <span class="property">description</span>: <span class="comment">"/* Can you tell an AI-written joke from a human's? A web-based game exploring the nuances of humor and creativity in LLMs. */"</span>,
    <span class="property">site</span>: <span class="string">"<a href="https://jest.geekip.dev" target="_blank">https://jest.geekip.dev</a>"</span>
<span class="punctuation">}</span>,
    </div>
    <div class="project-block" id="project-rhymes">
<span class="punctuation">{</span>
    <span class="property">name</span>: <span class="string project-title">"Rhymes of Israel"</span>,
    <span class="property">description</span>: <span class="comment">"/* A Chrome extension that analyzes Hebrew text on any webpage and highlights phonetic rhymes, built to aid poets and songwriters. */"</span>,
    <span class="property">extension_store</span>: <span class="string">"<a href="https://chromewebstore.google.com/detail/eainginjgdkpgolpjniijdihfbeeeklb" target="_blank">https://chromewebstore.google.com/detail/eainginjgdkpgolpjniijdihfbeeeklb</a>"</span>
<span class="punctuation">}</span>,
    </div>
    <div class="project-block" id="project-portfolio">
<span class="punctuation">{</span>
    <span class="property">name</span>: <span class="string project-title">"This Portfolio"</span>,
    <span class="property">description</span>: <span class="comment">"/* A self-referential project. This site's layout, color-scheme, and font are procedurally generated daily. It's built in a single file with vanilla JS. You are here. */"</span>,
    <span class="property">repository</span>: <span class="string">"<a href="https://geekip.dev" target="_blank">https://geekip.dev</a>"</span>
<span class="punctuation">}</span>
    </div>
];
</code></pre>
            </section>
            
            <section id="content-links">
<pre><code><span class="keyword">const</span> social_links = {
    <div class="project-block" id="project-links">
    <span class="property">github</span>:   <span class="string">"<a href="https://github.com/gevak" target="_blank">github.com/gevak</a>"</span>,
    <span class="property">linkedin</span>: <span class="string">"<a href="https://linkedin.com/in/gevakip" target="_blank">linkedin.com/in/gevakip</a>"</span>,
    <span class="property">facebook</span>: <span class="string">"<a href="https://facebook.com/geva.kipper" target="_blank">facebook.com/geva.kipper</a>"</span>
    </div>
};
</code></pre>
            </section>
        </main>

        <!-- Minimap Pane -->
        <aside id="minimap-container">
            <div id="minimap-sections">
                <!-- Sections will be injected by JS -->
            </div>
            <div id="viewport-indicator"></div>
        </aside>
    </div>

    <!-- Footer Status Bar -->
    <footer>
        <div id="footer-left">> Design compiled by Assistant. Status: OK.</div>
        <div id="footer-right"></div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- 1. THEME GENERATION & SETUP ---
        
        const MONOSPACE_FONTS = [
            'Fira Code', 'JetBrains Mono', 'Source Code Pro', 'IBM Plex Mono', 
            'Roboto Mono', 'Space Mono', 'Cousine', 'Anonymous Pro'
        ];

        // Simple PRNG for deterministic generation based on a seed
        function mulberry32(a) {
            return function() {
                var t = a += 0x6D2B79F5;
                t = Math.imul(t ^ t >>> 15, t | 1);
                t ^= t + Math.imul(t ^ t >>> 7, t | 61);
                return ((t ^ t >>> 14) >>> 0) / 4294967296;
            }
        }

        const today = new Date();
        const dayOfYear = (Date.UTC(today.getFullYear(), today.getMonth(), today.getDate()) - Date.UTC(today.getFullYear(), 0, 0)) / 24 / 60 / 60 / 1000;
        const seed = dayOfYear + today.getFullYear();
        const random = mulberry32(seed);

        // Generate Theme
        const baseHue = Math.floor(random() * 360);
        const fontIndex = Math.floor(random() * MONOSPACE_FONTS.length);
        const selectedFont = MONOSPACE_FONTS[fontIndex];
        
        const dailyBuildHash = `#${(seed * 0x4A72E4C9).toString(16).toUpperCase().slice(0,8)}`;
        document.getElementById('daily-build').textContent = dailyBuildHash;

        const root = document.documentElement;
        const mainBgLightness = 12;
        root.style.setProperty('--font-main', `"${selectedFont}", Consolas, "Courier New", monospace`);
        root.style.setProperty('--bg-color', `hsl(${baseHue}, 15%, ${mainBgLightness - 2}%)`);
        root.style.setProperty('--main-pane-bg', `hsla(${baseHue}, 15%, ${mainBgLightness}%, 0.9)`);
        root.style.setProperty('--minimap-bg', `hsl(${baseHue}, 15%, ${mainBgLightness - 3}%)`);
        root.style.setProperty('--footer-bg', `hsl(${baseHue}, 15%, ${mainBgLightness - 3}%)`);
        root.style.setProperty('--text-color', `hsl(${baseHue}, 20%, 85%)`);
        root.style.setProperty('--comment-color', `hsl(${(baseHue + 90) % 360}, 30%, 55%)`);
        root.style.setProperty('--keyword-color', `hsl(${(baseHue + 180) % 360}, 50%, 65%)`);
        root.style.setProperty('--class-name-color', `hsl(${(baseHue + 150) % 360}, 70%, 60%)`);
        root.style.setProperty('--property-name-color', `hsl(${(baseHue + 210) % 360}, 70%, 75%)`);
        root.style.setProperty('--string-color', `hsl(${(baseHue + 30) % 360}, 45%, 65%)`);
        root.style.setProperty('--link-hover-border', `hsl(${(baseHue + 150) % 360}, 70%, 60%)`);
        root.style.setProperty('--modal-bg', `hsl(${baseHue}, 15%, 5%)`);
        
        const minimapBaseHue = (baseHue + 60) % 360;


        // --- 2. LOADER ANIMATION ---

        const loader = document.getElementById('loader');
        const loaderText = document.getElementById('loader-text');
        const loaderScroll = document.getElementById('loader-scroll');
        const loaderScrollContent = document.getElementById('loader-scroll-content');
        const siteWrapper = document.querySelector('.site-wrapper');

        function runLoader() {
            // Fill scroll area with abstract text
            let abstractCode = '';
            for (let i = 0; i < 200; i++) {
                abstractCode += (Math.random() + 1).toString(36).substring(2) + '\n';
            }
            loaderScrollContent.innerHTML = abstractCode;

            setTimeout(() => {
                loaderText.style.opacity = 0;
                loaderScroll.style.opacity = 0.2;
            }, 2000);

            setTimeout(() => {
                loader.style.opacity = 0;
                siteWrapper.style.opacity = 1;
                setTimeout(() => loader.style.display = 'none', 700);
            }, 3000);
        }
        runLoader();


        // --- 3. MINIMAP LOGIC ---

        const mainContent = document.getElementById('main-content');
        const minimapContainer = document.getElementById('minimap-container');
        const minimapSectionsContainer = document.getElementById('minimap-sections');
        const viewportIndicator = document.getElementById('viewport-indicator');
        
        const contentSections = Array.from(document.querySelectorAll('.project-block, #page-header'));
        const minimapSections = [];

        function drawMinimapPattern(canvas, type, color) {
            const ctx = canvas.getContext('2d');
            const w = canvas.width = canvas.clientWidth;
            const h = canvas.height = canvas.clientHeight;
            ctx.clearRect(0, 0, w, h);
            ctx.fillStyle = color;
            ctx.strokeStyle = color;

            switch(type) {
                case 'header':
                    ctx.fillRect(0, 0, w, h);
                    break;
                case 'glglstats': // Sound wave
                    ctx.beginPath();
                    for(let x = 0; x < w; x++) {
                        const y = h/2 + Math.sin(x * 0.1) * h * 0.3;
                        ctx.lineTo(x, y);
                    }
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    break;
                case 'ahuzat-dibuk': // Heatmap
                     for(let i=0; i<w; i+=10) {
                        for(let j=0; j<h; j+=10) {
                            ctx.globalAlpha = Math.random();
                            ctx.fillRect(i, j, 10, 10);
                        }
                    }
                    ctx.globalAlpha = 1;
                    break;
                case '2d-orienting': // Polygon
                    ctx.beginPath();
                    ctx.moveTo(w * 0.1, h * 0.8);
                    ctx.lineTo(w * 0.3, h * 0.2);
                    ctx.lineTo(w * 0.9, h * 0.4);
                    ctx.lineTo(w * 0.7, h * 0.9);
                    ctx.closePath();
                    ctx.fill();
                    break;
                case 'turing-jest': // Quotes
                    ctx.font = `${h/3}px '${selectedFont}'`;
                    ctx.textAlign = 'center';
                    ctx.fillText('?', w*0.25, h*0.4);
                    ctx.fillText('"', w*0.75, h*0.7);
                    break;
                case 'rhymes': // Squiggly lines
                    ctx.beginPath();
                    for(let x=0; x<w; x++) ctx.lineTo(x, h*0.3 + Math.sin(x*0.2 + 2)*h*0.1);
                    ctx.moveTo(0,0);
                    for(let x=0; x<w; x++) ctx.lineTo(x, h*0.7 + Math.sin(x*0.2)*h*0.1);
                    ctx.lineWidth = 1;
                    ctx.stroke();
                    break;
                case 'portfolio': // Spiral
                    ctx.beginPath();
                    ctx.moveTo(w/2, h/2);
                    for (let i = 0; i < 150; i++) {
                        const angle = 0.1 * i;
                        const x = w/2 + (1 + angle) * Math.cos(angle);
                        const y = h/2 + (1 + angle) * Math.sin(angle);
                        ctx.lineTo(x, y);
                    }
                    ctx.lineWidth = 1;
                    ctx.stroke();
                    break;
                case 'links': // Simple block for icon container
                     ctx.fillRect(0, 0, w, h);
                     break;
                default:
                    ctx.fillRect(0, 0, w, h);
            }
        }
        
        function setupMinimap() {
            minimapSectionsContainer.innerHTML = '';
            const totalHeight = mainContent.scrollHeight;

            contentSections.forEach((section, index) => {
                const minimapSection = document.createElement('div');
                minimapSection.className = 'minimap-section';
                minimapSection.dataset.targetId = section.id;
                
                const sectionId = section.id.replace('project-','').replace('page-','');
                const hue = (minimapBaseHue + index * 45) % 360;
                const color = `hsl(${hue}, 60%, 50%)`;
                minimapSection.style.backgroundColor = `hsl(${hue}, 60%, 20%)`;
                
                if (sectionId === 'links') {
                    minimapSection.innerHTML = `
                        <div class="icon-container">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg>
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"></path></svg>
                        </div>
                    `;
                } else {
                    const canvas = document.createElement('canvas');
                    minimapSection.appendChild(canvas);
                    // Defer drawing until it's in the DOM to get dimensions
                    setTimeout(() => drawMinimapPattern(canvas, sectionId, color), 0);
                }

                const top = section.offsetTop / totalHeight * 100;
                const height = section.offsetHeight / totalHeight * 100;
                minimapSection.style.top = `${top}%`;
                minimapSection.style.height = `${height}%`;

                minimapSectionsContainer.appendChild(minimapSection);
                minimapSections.push(minimapSection);
                
                // Add hover listeners
                minimapSection.addEventListener('mouseenter', () => {
                    const target = document.querySelector(`#${minimapSection.dataset.targetId} .project-title`);
                    if (target) target.style.textShadow = `0 0 10px ${color}`;
                });
                minimapSection.addEventListener('mouseleave', () => {
                    const target = document.querySelector(`#${minimapSection.dataset.targetId} .project-title`);
                     if (target) target.style.textShadow = `none`;
                });
            });
        }

        function updateMinimap() {
            const { scrollHeight, clientHeight, scrollTop } = mainContent;
            const scrollableHeight = scrollHeight - clientHeight;
            
            const indicatorHeight = (clientHeight / scrollHeight) * 100;
            const indicatorTop = (scrollTop / scrollHeight) * 100;
            
            viewportIndicator.style.height = `${indicatorHeight}%`;
            viewportIndicator.style.top = `${indicatorTop}%`;

            // Adjust section positions and sizes if needed on resize
            const totalHeight = mainContent.scrollHeight;
            contentSections.forEach((section, index) => {
                const minimapSection = minimapSections[index];
                if(minimapSection) {
                    const top = section.offsetTop / totalHeight * 100;
                    const height = section.offsetHeight / totalHeight * 100;
                    minimapSection.style.top = `${top}%`;
                    minimapSection.style.height = `${height}%`;
                }
            });
        }

        mainContent.addEventListener('scroll', updateMinimap);
        window.addEventListener('resize', () => {
             // Redraw everything on resize
            setupMinimap();
            updateMinimap();
            // Re-init background anims if needed
            initBackgroundAnims();
        });

        // Minimap click/drag scrolling
        let isDragging = false;
        minimapContainer.addEventListener('click', (e) => {
            if (e.target === viewportIndicator) return;
            const rect = minimapContainer.getBoundingClientRect();
            const clickY = e.clientY - rect.top;
            const ratio = clickY / rect.height;
            mainContent.scrollTop = ratio * mainContent.scrollHeight - (mainContent.clientHeight / 2);
        });

        viewportIndicator.addEventListener('mousedown', (e) => {
            isDragging = true;
            viewportIndicator.style.cursor = "grabbing";
            document.body.style.userSelect = 'none'; // Prevent text selection
        });
        
        window.addEventListener('mouseup', () => {
            isDragging = false;
            viewportIndicator.style.cursor = "grab";
            document.body.style.userSelect = 'auto';
        });

        window.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            const rect = minimapContainer.getBoundingClientRect();
            let clickY = e.clientY - rect.top;
            // Clamp value
            clickY = Math.max(0, Math.min(rect.height, clickY));

            const ratio = clickY / rect.height;
            mainContent.scrollTop = ratio * mainContent.scrollHeight - (viewportIndicator.offsetHeight/2 / rect.height * mainContent.scrollHeight);
        });
        
        setupMinimap();
        updateMinimap();


        // --- 4. CONTENT INTERACTIVITY ---

        // Video Modal
        const videoModal = document.getElementById('video-modal');
        const videoIframe = document.getElementById('video-iframe');
        document.querySelectorAll('a[data-video-id]').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const videoId = e.currentTarget.dataset.videoId;
                videoIframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`;
                videoModal.classList.add('visible');
            });
        });

        function closeModal() {
            videoIframe.src = "";
            videoModal.classList.remove('visible');
        }
        videoModal.querySelector('.modal-close').addEventListener('click', closeModal);
        videoModal.addEventListener('click', (e) => {
            if (e.target === videoModal) closeModal();
        });

        // Background Visualizations
        function initBackgroundAnims() {
            // GlglStats: Sound wave
            const glglCanvas = document.querySelector('#viz-glglstats canvas');
            if(glglCanvas) {
                const glglCtx = glglCanvas.getContext('2d');
                let time = 0;
                function animateGlgl() {
                    const w = glglCanvas.width = glglCanvas.clientWidth;
                    const h = glglCanvas.height = glglCanvas.clientHeight;
                    glglCtx.clearRect(0,0,w,h);
                    glglCtx.strokeStyle = getComputedStyle(root).getPropertyValue('--property-name-color');
                    glglCtx.lineWidth = 2;
                    glglCtx.beginPath();
                    for(let x = 0; x < w; x++) {
                        const y = h/2 + Math.sin(x * 0.05 + time) * h * 0.2 * Math.sin(time*0.5);
                        glglCtx.lineTo(x, y);
                    }
                    glglCtx.stroke();
                    time += 0.02;
                    requestAnimationFrame(animateGlgl);
                }
                animateGlgl();
            }

            // Ahuzat Dibuk: Heatmap
            const ahuzatCanvas = document.querySelector('#viz-ahuzat-dibuk canvas');
            if (ahuzatCanvas) {
                const ahuzatCtx = ahuzatCanvas.getContext('2d');
                const gridSize = 20;
                let grid = [];
                function animateAhuzat() {
                    const w = ahuzatCanvas.width = ahuzatCanvas.clientWidth;
                    const h = ahuzatCanvas.height = ahuzatCanvas.clientHeight;
                    const cols = Math.ceil(w/gridSize);
                    const rows = Math.ceil(h/gridSize);
                    
                    if(grid.length === 0) { // init grid
                        for(let i=0; i<cols*rows; i++) grid.push(random());
                    }
                    
                    // slowly evolve grid
                    const rIndex = Math.floor(random() * grid.length);
                    grid[rIndex] = (grid[rIndex] + (random() - 0.5) * 0.2 + 1) % 1;

                    ahuzatCtx.clearRect(0,0,w,h);
                    const baseColor = getComputedStyle(root).getPropertyValue('--string-color');
                    for(let r=0; r<rows; r++) {
                        for(let c=0; c<cols; c++) {
                            ahuzatCtx.globalAlpha = grid[r*cols + c] * 0.5 + 0.1;
                            ahuzatCtx.fillStyle = baseColor;
                            ahuzatCtx.fillRect(c*gridSize, r*gridSize, gridSize, gridSize);
                        }
                    }
                    ahuzatCtx.globalAlpha = 1.0;
                    requestAnimationFrame(animateAhuzat);
                }
                // Rate-limit this animation
                setInterval(animateAhuzat, 100);
            }
        }
        initBackgroundAnims();
        

        // --- 5. FOOTER UPTIME COUNTER ---

        const uptimeEl = document.getElementById('footer-right');
        const targetDate = new Date('2025-08-02T01:12:04Z').getTime();

        function updateUptime() {
            const now = new Date().getTime();
            const diff = targetDate > now ? targetDate - now : now - targetDate;
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            const prefix = targetDate > now ? "> T-Minus: " : "> Uptime: ";
            uptimeEl.textContent = `${prefix}${days}d ${String(hours).padStart(2,'0')}h ${String(minutes).padStart(2,'0')}m ${String(seconds).padStart(2,'0')}s`;
        }

        setInterval(updateUptime, 1000);
        updateUptime();

    });
    </script>
<!-- Add this block to embed the like button -->
    <script src="/static/js/like_button.js"></script>
    <script>
        LikeButton.init({
          pageId: "20250802",
          position: "bottom-right", // Options: bottom-right, bottom-left, top-right, top-left
        });
    </script>

</body>
</html>