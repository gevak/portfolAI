<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geva Kipper - Portfolio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,700;1,300&family=Roboto+Mono&display=swap" rel="stylesheet">
    <style>
        /* --- General Setup & Theming --- */
        :root {
            --color-bg: #212121; /* Slightly lighter charcoal for texture */
            --color-text: #E0E0E0;
            --font-main: 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            --font-mono: 'Roboto Mono', monospace;

            --line-blue: #00A3FF;       /* Electric Blue */
            --line-magenta: #F500FF;    /* Vivid Magenta */
            --line-green: #00FF7F;      /* Luminous Green */
            --line-orange: #FF8C00;     /* Bright Orange */

            --glow-color-blue: rgba(0, 163, 255, 0.7);
            --glow-color-magenta: rgba(245, 0, 255, 0.7);
            --glow-color-green: rgba(0, 255, 127, 0.7);
            --glow-color-orange: rgba(255, 140, 0, 0.7);
        }

        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: var(--font-main);
            color: var(--color-text);
            background-color: var(--color-bg);
            /* Subtle slate/noise texture */
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj48ZmlsdGVyIGlkPSJub2lzZSI+PGZlVHVyYnVsZW5jZSB0eXBlPSJmcmFjdGFsTm9pc2UiIGJhc2VGcmVxdWVuY3k9IjAuODUiIG51bU9jdGF2ZXM9IjEwIiBzdGl0Y2hUaWxlcz0ic3RpdGNoIi8+PC9maWx0ZXI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsdGVyPSJ1cmwoI25vaXNlKSIgb3BhY2l0eT0iMC4wNiIvPjwvc3ZnPg==');
        }

        /* --- Fixed UI Elements --- */
        #header {
            position: fixed;
            top: 2.5rem;
            left: 2.5rem;
            z-index: 100;
            color: white;
            pointer-events: none;
        }

        #header h1 {
            margin: 0;
            font-size: 2rem;
            font-weight: 700;
        }

        #header p {
            margin: 0.25rem 0 0 0;
            font-size: 1rem;
            font-weight: 300;
            max-width: 300px;
        }
        
        #header p.ai-notice {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            font-style: italic;
            font-weight: 300;
            color: #ccc;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.3), 0 0 10px rgba(255, 255, 255, 0.2);
        }
        
        #footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 2.5rem;
            box-sizing: border-box;
            background: linear-gradient(to top, rgba(0,0,0,0.3), transparent);
            font-size: 0.8rem;
            color: #999;
            z-index: 100;
            pointer-events: none;
        }

        #footer-right {
           text-align: right;
        }

        #stopwatch {
            font-family: var(--font-mono);
            color: var(--color-text);
        }

        /* --- Map Container --- */
        #map-container {
            width: 100%;
            height: 100%;
            cursor: grab;
        }
        #map-container.grabbing {
             cursor: grabbing;
        }

        /* --- SVG Map Styles --- */
        .subway-map {
            width: 100%;
            height: 100%;
            font-family: var(--font-main);
        }

        .line {
            fill: none;
            stroke-width: 8px;
            stroke-linecap: round;
            stroke-linejoin: round;
            transition: all 0.3s ease;
        }

        .station-group:hover .line, body.line-hover .line {
            stroke-width: 10px;
        }

        #line-blue { stroke: var(--line-blue); }
        #line-magenta { stroke: var(--line-magenta); }
        #line-green { stroke: var(--line-green); }
        #line-orange { stroke: var(--line-orange); }

        .station-group:hover #line-blue, body.line-hover-blue #line-blue { filter: drop-shadow(0 0 10px var(--glow-color-blue)); }
        .station-group:hover #line-magenta, body.line-hover-magenta #line-magenta { filter: drop-shadow(0 0 10px var(--glow-color-magenta)); }
        .station-group:hover #line-green, body.line-hover-green #line-green { filter: drop-shadow(0 0 10px var(--glow-color-green)); }
        .station-group:hover #line-orange, body.line-hover-orange #line-orange { filter: drop-shadow(0 0 10px var(--glow-color-orange)); }

        .station-marker {
            fill: var(--color-bg);
            stroke-width: 4px;
            transition: all 0.3s ease;
        }
        
        .station-marker-interchange {
            stroke-width: 5px;
            stroke: white;
            r: 14;
        }
        
        .station-group {
            cursor: pointer;
        }
        
        .station-group:hover .station-marker {
            transform: scale(1.2);
            transform-origin: center center;
            filter: drop-shadow(0 0 12px var(--glow-color));
        }

        .station-label {
            fill: white;
            font-size: 16px;
            font-weight: 400;
            text-anchor: middle;
            pointer-events: none;
            transition: all 0.3s ease;
        }
        
        .station-group:hover .station-label {
            transform: scale(1.1);
            transform-origin: center center;
            font-weight: 700;
            text-shadow: 0 0 5px rgba(255,255,255,0.7);
        }
        
        /* --- Info Card --- */
        #info-card {
            position: fixed;
            top: 0;
            right: 0;
            width: 380px;
            max-width: 90vw;
            height: 100%;
            background-color: rgba(10, 10, 10, 0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transform: translateX(100%);
            transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 200;
            box-shadow: -5px 0 25px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            color: white;
        }

        #info-card.visible {
            transform: translateX(0);
        }

        #card-content {
            padding: 2.5rem;
            overflow-y: auto;
        }
        
        #card-content h2 {
            margin: 0 0 1rem 0;
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        #card-content p {
            line-height: 1.6;
            font-weight: 300;
            margin: 0 0 2rem 0;
        }

        #card-content h3 {
            border-top: 1px solid #444;
            padding-top: 1.5rem;
            margin-top: 1.5rem;
            font-size: 1.1rem;
            font-weight: 400;
            color: #ccc;
        }
        
        .connections-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .connections-list li a {
            display: flex;
            align-items: center;
            padding: 0.75rem 0;
            color: #ddd;
            text-decoration: none;
            transition: background-color 0.2s, color 0.2s;
            border-radius: 4px;
        }

        .connections-list li a:hover {
            color: white;
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .connections-list .icon {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            fill: currentColor;
            opacity: 0.8;
        }

        #close-card {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 40px;
            height: 40px;
            font-size: 1.5rem;
            color: #888;
            background: none;
            border: none;
            cursor: pointer;
            transition: color 0.2s;
            line-height: 40px;
            text-align: center;
        }

        #close-card:hover {
            color: white;
        }

        .map-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 150;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        .map-overlay.visible {
            opacity: 1;
            pointer-events: auto;
        }
    </style>
</head>
<body>

    <header id="header">
        <h1>Geva Kipper</h1>
        <p>Currently building the future of search at Google.</p>
        <p class="ai-notice">
            <em>This site's design is regenerated daily by an AI, its layout is ever-changing.</em>
        </p>
    </header>

    <div id="map-container">
        <svg id="subway-map" class="subway-map" viewBox="0 0 1600 900" preserveAspectRatio="xMidYMid meet">
            <!-- Line Definitions -->
            <g>
                <!-- Green Line: Core CS/Web -->
                <path id="line-green" class="line" d="M 100,550 Q 200,550 250,500 T 400,450 C 450,425 475,425 500,450 T 600,450 C 650,425 725,400 750,450 T 900,500 L 1050,500"/>
                <!-- Blue Line: Python/Data -->
                <path id="line-blue" class="line" d="M 400,100 L 400,300 Q 400,450 500,450 Q 600,450 600,600 V 800"/>
                <!-- Magenta Line: LLM/AI -->
                <path id="line-magenta" class="line" d="M 1200,100 V 300 Q 1200,450 1100,450 C 1050,425 950,425 900,450 C 850,425 800,475 750,450 C 700,500 700,650 750,700 L 750,800 "/>
                <!-- Orange Line: Social/Contact (Circular) -->
                <path id="line-orange" class="line" d="M 800 450 A 100 100 0 1 0 799.9 450 Z" />
            </g>

            <!-- Station Groups: The order determines z-index (last is on top) -->

            <!-- Blue Line Stations -->
            <g id="ahuzat-dibuk" class="station-group" data-line="blue" style="--glow-color: var(--glow-color-blue);">
                <circle class="station-marker" cx="600" cy="700" r="12" stroke="var(--line-blue)"/>
                <text class="station-label" x="600" y="735">Ahuzat Dibuk</text>
            </g>
            
            <!-- Magenta Line Stations -->
            <g id="rhymes-of-israel" class="station-group" data-line="magenta" style="--glow-color: var(--glow-color-magenta);">
                <circle class="station-marker" cx="1200" cy="200" r="12" stroke="var(--line-magenta)"/>
                <text class="station-label" x="1200" y="165">Rhymes of Israel</text>
            </g>

            <!-- Green Line Stations -->
            <g id="2d-part-orienting" class="station-group" data-line="green" style="--glow-color: var(--glow-color-green);">
                <circle class="station-marker" cx="150" cy="550" r="12" stroke="var(--line-green)"/>
                <text class="station-label" x="150" y="585">2D Part Orienting</text>
            </g>
            <g id="portfolio-website" class="station-group" data-line="green" style="--glow-color: var(--glow-color-green);">
                <circle class="station-marker" cx="1000" cy="500" r="12" stroke="var(--line-green)"/>
                <text class="station-label" x="1000" y="465">Portfolio Website</text>
            </g>

            <!-- Interchange Stations -->
            <g id="glglstats" class="station-group" data-line="blue-green" style="--glow-color: var(--glow-color-blue);">
                <circle class="station-marker station-marker-interchange" cx="400" cy="450" r="14" stroke="white" />
                <circle class="station-marker" cx="400" cy="450" r="9" stroke-width="0" fill="var(--line-blue)"  />
                <text class="station-label" x="400" y="415">GlglStats</text>
            </g>
             <g id="the-turing-jest" class="station-group" data-line="magenta-green" style="--glow-color: var(--glow-color-magenta);">
                <circle class="station-marker station-marker-interchange" cx="750" cy="450" r="14" stroke="white" />
                <circle class="station-marker" cx="750" cy="450" r="9" stroke-width="0" fill="var(--line-magenta)"  />
                <text class="station-label" x="750" y="415">The Turing Jest</text>
            </g>

            <!-- Central Station -->
            <g id="central-station" class="station-group" data-line="orange" style="--glow-color: var(--glow-color-orange);">
                <circle class="station-marker" cx="800" cy="450" r="16" stroke="var(--line-orange)" stroke-width="6px" />
                <text class="station-label" x="800" y="455" font-size="18px">Central</text>
                <text class="station-label" x="800" y="475" font-size="18px">Station</text>
            </g>
        </svg>

    </div>

    <div id="map-overlay" class="map-overlay"></div>

    <div id="info-card">
        <button id="close-card" title="Close">&times;</button>
        <div id="card-content">
            <h2 id="card-title"></h2>
            <p id="card-description"></p>
            <h3 id="card-connections-title"></h3>
            <ul id="connections-list" class="connections-list">
                <!-- Links will be populated by JS -->
            </ul>
        </div>
    </div>

    <footer id="footer">
        <div id="footer-left">Design by a generative AI model.</div>
        <div id="footer-right">
            <span>Current Design Age: </span><span id="stopwatch">0:0:0</span>
        </div>
    </footer>
    
    <!-- Third-party library for SVG pan/zoom -->
    <script>
        !function(){function t(t,e){return"function"==typeof t?t.call(e):t}function e(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!0,!0,t),n}var n={init:function(i){var o=this,a=0,s=1,r=[],l=null,c=null,d=null,u=!1;i.setAttribute("transform","matrix(1,0,0,1,0,0)"),this.svg=i,this.defs=i.querySelector("defs")||document.createElementNS("http://www.w3.org/2000/svg","defs"),this.svg.appendChild(this.defs),this.state="none",this.svg.addEventListener("touchstart",function(t){o.handleMouseDown(t),o.svg.removeEventListener("mousedown",o.handleMouseDown)},!1),this.svg.addEventListener("mousedown",function(t){o.handleMouseDown(t)},!1),this.svg.addEventListener("touchmove",function(t){o.handleMouseMove(t),o.svg.removeEventListener("mousemove",o.handleMouseMove)},!1),this.svg.addEventListener("mousemove",function(t){o.handleMouseMove(t)},!1),this.svg.addEventListener("touchend",function(t){o.handleMouseUp(t),o.svg.removeEventListener("mouseup",o.handleMouseUp)},!1),this.svg.addEventListener("mouseup",function(t){o.handleMouseUp(t)},!1),this.svg.addEventListener("mouseleave",function(t){o.handleMouseUp(t)},!1),window.addEventListener("resize",function(){o.resize()}),this.viewBox={x:0,y:0,w:this.svg.clientWidth,h:this.svg.clientHeight},this.composition=document.createElementNS("http://www.w3.org/2000/svg","g"),this.composition.setAttribute("transform","matrix(1,0,0,1,0,0)"),i.appendChild(this.composition);for(var h,g=0;g<i.children.length-2;g++){h=i.children[g],h!=this.defs&&h!=this.composition&&this.composition.appendChild(h)}this.recalculateViewBox(),this.options={panEnabled:!0,dragEnabled:!0,zoomEnabled:!0,zoomScaleSensitivity:.02,minZoom:t(this.options.minZoom,i,i),maxZoom:t(this.options.maxZoom,i,i),beforePan:null,onPan:null,beforeZoom:null,onZoom:null,onZoomIn:null,onZoomOut:null,onClick:null,onViewBoxUpdate:null},this.reset(),this.svg.dispatchEvent(e(this,"init"));var p=this.options.events;for(var g in p)i.addEventListener(g,p[g]);this.update=function(t){this.composition.setAttribute("transform","matrix("+s+",0,0,"+s+","+a.x+","+a.y+")"),this.svg.setAttribute("viewBox",this.viewBox.x+" "+this.viewBox.y+" "+this.viewBox.w+" "+this.viewBox.h),null!=t&&this.svg.dispatchEvent(e(this,t))},this.pan=function(t){if(!1!==this.options.panEnabled&&(!1!==this.options.beforePan(l,t)&&null!=l)){a={x:this.composition.getCTM().e,y:this.composition.getCTM().f};var e=this.composition.getCTM();e.e=a.x+(t.x-l.x),e.f=a.y+(t.y-l.y),this.composition.setAttribute("transform","matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")"),l=t,this.svg.dispatchEvent(this.events.pan)}},this.zoom=function(e,n){if(!1!==this.options.zoomEnabled){var i=t(this.options.minZoom,this.svg,this.svg),o=t(this.options.maxZoom,this.svg,this.svg);if(i<=s*n&&s*n<=o){var r=this.composition.getCTM();r.a==s&&(r.d=s);var l=this.svg.createSVGPoint();l.x=e.x,l.y=e.y,l=l.matrixTransform(this.composition.getCTM().inverse());var c=this.svg.createSVGMatrix().translate(l.x,l.y).scale(n).translate(-l.x,-l.y);r=r.multiply(c),this.composition.setAttribute("transform","matrix("+r.a+","+r.b+","+r.c+","+r.d+","+r.e+","+r.f+")"),this.composition.getCTM().a<s&&this.svg.dispatchEvent(this.events.zoomOut),this.composition.getCTM().a>s&&this.svg.dispatchEvent(this.events.zoomIn),this.svg.dispatchEvent(this.events.zoom),a={x:this.composition.getCTM().e,y:this.composition.getCTM().f},s=this.composition.getCTM().a}}},this.reset=function(){a={x:this.composition.getCTM().e,y:this.composition.getCTM().f},s=this.composition.getCTM().a,s=t(this.options.minZoom,this.svg,this.svg),a.x=0,a.y=0,this.update()},this.recalculateViewBox=function(){var e=this.composition.getBBox();this.viewBox={x:e.x,y:e.y,w:e.width,h:e.height},t(this.options.onViewBoxUpdate,this.svg,this.viewBox)},this.getRelativePoint=function(t){return{x:t.x-this.viewBox.x,y:t.y-this.viewBox.y}},this.handleMouseDown=function(t){if(this.options.dragEnabled&&(u=!0,"touchstart"==t.type)){for(var e=0;e<t.touches.length;e++)r[e]=t.touches[e];2===r.length&&this.state==this.states.none?(d=Math.sqrt(Math.pow(r[0].pageX-r[1].pageX,2)+Math.pow(r[0].pageY-r[1].pageY,2)),this.state="zoom"):1===r.length&&(l={x:r[0].pageX,y:r[0].pageY},this.state="pan",c=new Date)}else l={x:t.pageX,y:t.pageY},this.state="pan",c=new Date},this.handleMouseMove=function(t){if(u){var e,n;if("touchmove"==t.type){for(e=0;e<t.touches.length;e++)r[e]=t.touches[e];2==r.length&&"zoom"==this.state?(n=Math.sqrt(Math.pow(r[0].pageX-r[1].pageX,2)+Math.pow(r[0].pageY-r[1].pageY,2)),this.zoom({x:(r[0].pageX+r[1].pageX)/2,y:(r[0].pageY+r[1].pageY)/2},n/d),d=n):1==r.length&&"pan"==this.state&&(n={x:r[0].pageX,y:r[0].pageY},this.pan(n))}else"pan"==this.state&&(n={x:t.pageX,y:t.pageY},this.pan(n))}},this.handleMouseUp=function(t){if(u){u=!1;var e=new Date,n=e.getTime()-c.getTime(),i=Math.sqrt(Math.pow(l.x-t.pageX,2)+Math.pow(l.y-t.pageY,2));n<.3&&i<10&&this.options.onClick(t),this.state="none"}},this.resize=function(){this.viewBox.w=this.svg.clientWidth,this.viewBox.h=this.svg.clientHeight,t(this.options.onViewBoxUpdate,this.svg,this.viewBox),this.update("resize")}},this.panBy=function(e){a.x+=e.x,a.y+=e.y,this.update()},this.zoomBy=function(e){s+=e,s<t(this.options.minZoom,this.svg,this.svg)&&(s=t(this.options.minZoom,this.svg,this.svg)),s>t(this.options.maxZoom,this.svg,this.svg)&&(s=t(this.options.maxZoom,this.svg,this.svg)),this.update()},this.zoomAt=function(e,n){this.zoom({x:e.x,y:e.y},n)}},svgPanZoom=function(t,e){var i=document.querySelector(t);return i?(n.options=e,n.init(i),n):void 0}}();
    </script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- Data for Stations & Info Card ---
        const projectData = {
            'glglstats': {
                title: 'GlglStats',
                description: 'An analytical tool for Israeli army radio (Galgalatz) playlists. It features a Python backend for data scraping and analysis, with a web-based front-end for interactive data visualization, revealing trends in Israeli music.',
                connections: [
                    { type: 'website', url: 'https://glglstats.geekip.dev', text: 'Project Website' },
                    { type: 'youtube', url: 'https://www.youtube.com/watch?v=jrKAtOsj1Lo', text: 'Conference Presentation' }
                ]
            },
            'ahuzat-dibuk': {
                title: 'Ahuzat Dibuk',
                description: 'A data-journalism project that analyzed over 2 million parking tickets in Tel Aviv. The investigation, which I led, uncovered patterns of selective enforcement and was featured in major Israeli news outlets.',
                connections: [
                    { type: 'facebook', url: 'https://www.facebook.com/groups/secrettelaviv/posts/10159636301195943', text: 'Original Publication Post' },
                    { type: 'news', url: 'https://13tv.co.il/item/news/domestic/internal/parking-902956407/', text: 'Channel 13 News Coverage' },
                    { type: 'news', url: 'https://www.mako.co.il/nexter-news/Article-ae43964b891bf71027.htm', text: 'Mako News Article' }
                ]
            },
            'the-turing-jest': {
                title: 'The Turing Jest',
                description: 'Can you tell the difference between human and AI? This web-based game challenges you to distinguish between human-written and AI-generated jokes. It serves as a fun, interactive exploration of modern NLP capabilities.',
                connections: [
                     { type: 'website', url: 'https://jest.geekip.dev', text: 'Play The Turing Jest' }
                ]
            },
            'rhymes-of-israel': {
                title: 'Rhymes of Israel',
                description: 'A Chrome extension that finds Hebrew rhymes for any given word. The tool uses natural language processing techniques to understand Hebrew phonetics and word structures, providing a valuable resource for poets and songwriters.',
                connections: [
                    { type: 'website', url: 'https://chromewebstore.google.com/detail/eainginjgdkpgolpjniijdihfbeeeklb', text: 'View in Chrome Web Store' }
                ]
            },
            '2d-part-orienting': {
                title: '2D Part Orienting',
                description: 'Academic research in computational geometry at Tel-Aviv University. This project focused on developing and implementing algorithms to determine all stable resting positions of a 2D polygonal part under gravity.',
                connections: [
                    { type: 'website', url: 'https://www.cgl.cs.tau.ac.il/projects/2d-part-orienting/', text: 'Project Page & Paper' },
                    { type: 'code', url: 'https://www.cgl.cs.tau.ac.il/projects/2d-part-orienting/', text: 'Source Code' }
                ]
            },
            'portfolio-website': {
                title: 'This Portfolio Website',
                description: 'You are here! This entire site is a single HTML file with no external dependencies (besides fonts). It uses inline SVG for the map, vanilla JavaScript for interactivity, and a self-contained pan-zoom library to create a unique, explorable portfolio experience.',
                connections: [
                    { type: 'website', url: 'https://geekip.dev', text: 'Homepage' },
                    { type: 'code', url: 'https://github.com/gevak/portfolio', text: 'Source Code on GitHub'}
                ]
            },
            'central-station': {
                title: 'Connect',
                description: 'This is my central contact hub. Find my code on GitHub, connect with me professionally on LinkedIn, or see what I\'m up to on Facebook.',
                connections: [
                    { type: 'github', url: 'https://github.com/gevak', text: 'GitHub Profile' },
                    { type: 'linkedin', url: 'https://linkedin.com/in/gevakip', text: 'LinkedIn Profile' },
                    { type: 'facebook', url: 'https://facebook.com/geva.kipper', text: 'Facebook Profile' }
                ]
            }
        };

        const icons = {
            website: `<svg class="icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1h-2v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>`,
            youtube: `<svg class="icon" viewBox="0 0 24 24"><path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2 M10,16.5V7.5L16,12L10,16.5Z"/></svg>`,
            news: `<svg class="icon" viewBox="0 0 24 24"><path d="M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM8 17H6v-5h2v5zm4 0h-2v-5h2v5zm4 0h-2v-5h2v5zm0-7H6V6h12v4z"/></svg>`,
            facebook: `<svg class="icon" viewBox="0 0 24 24"><path d="M12 2.04C6.5 2.04 2 6.53 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.85C10.44 7.32 11.93 5.96 14.22 5.96C15.31 5.96 16.45 6.15 16.45 6.15V8.62H15.19C13.95 8.62 13.56 9.39 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96A10 10 0 0 0 12 2.04Z"/></svg>`,
            code: `<svg class="icon" viewBox="0 0 24 24"><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/></svg>`,
            github: `<svg class="icon" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.09.68-.22.68-.48v-1.7c-2.78.6-3.37-1.34-3.37-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.89 1.52 2.34 1.08 2.91.83.09-.65.35-1.08.63-1.34-2.22-.25-4.55-1.11-4.55-4.94 0-1.1.39-1.99 1.03-2.69a3.6 3.6 0 0 1 .1-2.64s.84-.27 2.75 1.02a9.58 9.58 0 0 1 5 0c1.91-1.29 2.75-1.02 2.75-1.02.55 1.37.2 2.4.1 2.64.64.7 1.03 1.6 1.03 2.69 0 3.84-2.34 4.68-4.57 4.93.36.31.68.92.68 1.85v2.74c0 .27.18.58.69.48A10 10 0 0 0 22 12 10 10 0 0 0 12 2Z"/></svg>`,
            linkedin: `<svg class="icon" viewBox="0 0 24 24"><path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-11 6H5v10h3V9M6.5 8a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3m11.5 2h-2.8c0 1.41-1.12 2.5-2.5 2.5S11.2 12.41 11.2 11h-2.8v8h2.8v-4.4c0-.9.7-1.6 1.6-1.6s1.6.7 1.6 1.6V19h2.8v-8Z"/></svg>`
        };

        // --- Stopwatch Timer ---
        const stopwatchEl = document.getElementById('stopwatch');
        const startDate = new Date('2025-09-11T01:03:19Z');

        function updateStopwatch() {
            const now = new Date();
            const diff = now - startDate;

            const h = Math.floor(diff / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((diff % (1000 * 60)) / 1000);

            stopwatchEl.textContent = `${h}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
        }
        setInterval(updateStopwatch, 1000);
        updateStopwatch();

        // --- SVG Pan-Zoom Initialization ---
        const panZoom = svgPanZoom('#subway-map', {
            zoomEnabled: true,
            panEnabled: true,
            controlIconsEnabled: false,
            minZoom: 0.75,
            maxZoom: 5,
            fit: true,
            center: true,
            zoomScaleSensitivity: 0.2,
            onPan: () => {
                document.getElementById('map-container').classList.add('grabbing');
            },
            onZoom: () => {
                document.getElementById('map-container').classList.add('grabbing');
            }
        });
        // Remove grabbing cursor after mouse up
        document.getElementById('map-container').addEventListener('mouseup', () => {
             document.getElementById('map-container').classList.remove('grabbing');
        });
        document.getElementById('map-container').addEventListener('touchend', () => {
             document.getElementById('map-container').classList.remove('grabbing');
        });

        
        // --- Info Card Logic ---
        const infoCard = document.getElementById('info-card');
        const cardTitle = document.getElementById('card-title');
        const cardDescription = document.getElementById('card-description');
        const cardConnectionsTitle = document.getElementById('card-connections-title');
        const connectionsList = document.getElementById('connections-list');
        const closeCardBtn = document.getElementById('close-card');
        const mapOverlay = document.getElementById('map-overlay');

        function showInfoCard(stationId) {
            const data = projectData[stationId];
            if (!data) return;

            cardTitle.textContent = data.title;
            cardDescription.textContent = data.description;
            
            if (data.title === 'Connect') {
                cardConnectionsTitle.textContent = "Outgoing Lines";
            } else {
                cardConnectionsTitle.textContent = "Connections";
            }

            connectionsList.innerHTML = '';
            data.connections.forEach(conn => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <a href="${conn.url}" target="_blank" rel="noopener noreferrer">
                        ${icons[conn.type]}
                        <span>${conn.text}</span>
                    </a>
                `;
                connectionsList.appendChild(li);
            });

            infoCard.classList.add('visible');
            mapOverlay.classList.add('visible');
        }

        function hideInfoCard() {
            infoCard.classList.remove('visible');
            mapOverlay.classList.remove('visible');
            panZoom.reset();
            panZoom.center();
        }

        closeCardBtn.addEventListener('click', hideInfoCard);
        mapOverlay.addEventListener('click', hideInfoCard);

        // --- Station Click & Hover Handlers ---
        document.querySelectorAll('.station-group').forEach(station => {
            station.addEventListener('click', (e) => {
                e.stopPropagation();
                const stationId = station.id;
                
                showInfoCard(stationId);

                // Smoothly zoom to the station
                const bbox = station.getBBox();
                const stationX = bbox.x + bbox.width / 2;
                const stationY = bbox.y + bbox.height / 2;

                panZoom.zoomAtPoint(2.5, { x: stationX, y: stationY });
            });

            // subtle line glow on station hover
            station.addEventListener('mouseenter', () => {
                const lines = station.dataset.line.split('-');
                lines.forEach(line => document.body.classList.add(`line-hover-${line}`));
            });
            station.addEventListener('mouseleave', () => {
                const lines = station.dataset.line.split('-');
                lines.forEach(line => document.body.classList.remove(`line-hover-${line}`));
            });
        });
    });
    </script>

<!-- Add this block to embed the like button -->
    <script src="/static/js/like_button.js"></script>
    <script>
        LikeButton.init({
          pageId: "20250911",
          position: "bottom-right", // Options: bottom-right, bottom-left, top-right, top-left
        });
    </script>

</body>
</html>