<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geva Kipper - The Digital Tree</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0A0F2D;
            --text-color: #EFEFEF;
            --subtle-text-color: #8892b0;
            --accent-color: #00ffff; /* Default, will be replaced by JS */
            --hex-bg-color: rgba(23, 31, 68, 0.5);
            --hex-bg-color-opaque: rgba(23, 31, 68, 1);
        }

        * {
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        .canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .content-wrapper {
            position: relative;
            z-index: 2;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- Header --- */
        .header-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .header-section h1 {
            font-size: 3rem;
            margin: 0;
            font-weight: 700;
        }

        .header-section .subtitle {
            font-size: 1.25rem;
            margin: 10px 0 30px 0;
            color: var(--subtle-text-color);
        }

        .header-section .ai-notice {
            font-family: 'Source Code Pro', monospace;
            font-size: 0.9rem;
            color: var(--accent-color);
            text-shadow: 0 0 8px var(--accent-color);
            margin: 0;
        }
        
        .scroll-indicator {
            position: absolute;
            bottom: 30px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: var(--accent-color);
            animation: pulse 2s infinite;
            box-shadow: 0 0 15px var(--accent-color);
        }

        @keyframes pulse {
            0% { transform: scale(0.9); opacity: 0.7; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(0.9); opacity: 0.7; }
        }

        /* --- Project Sections --- */
        .project-section {
            display: flex;
            position: relative;
            width: 100%;
            min-height: 450px;
            align-items: center;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .project-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        .project-section.align-left { justify-content: flex-start; }
        .project-section.align-right { justify-content: flex-end; }

        .hexagon-node {
            width: 45%;
            padding: 30px 40px;
            background-color: var(--hex-bg-color);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
            transition: background-color 0.3s, transform 0.3s;
        }

        .project-section.is-visible .hexagon-node {
            background-color: var(--hex-bg-color-opaque);
        }

        .hexagon-node h2 {
            font-size: 1.7rem;
            margin-top: 0;
            color: var(--text-color);
        }

        .hexagon-node p {
            color: var(--subtle-text-color);
            line-height: 1.6;
        }

        .project-buttons {
            margin-top: 25px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .project-buttons .btn {
            display: inline-block;
            padding: 10px 18px;
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            background-color: transparent;
            text-decoration: none;
            font-family: 'Source Code Pro', monospace;
            font-weight: 600;
            transition: background-color 0.3s, color 0.3s, box-shadow 0.3s;
        }

        .project-buttons .btn:hover {
            background-color: var(--accent-color);
            color: var(--bg-color);
            box-shadow: 0 0 15px var(--accent-color);
        }

        /* --- Footer --- */
        .footer-section {
            width: 100%;
            padding: 150px 0 50px 0;
            text-align: center;
            position: relative;
        }
        
        .social-links {
            position: absolute;
            bottom: 120px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 60px;
            z-index: 5;
        }

        .social-links a {
            color: var(--accent-color);
            text-decoration: none;
            transition: color 0.3s, filter 0.3s;
        }

        .social-links a:hover {
            color: #fff;
            filter: drop-shadow(0 0 10px #fff);
        }

        .social-links svg {
            width: 32px;
            height: 32px;
            fill: currentColor;
        }

        .footer-text {
            font-family: 'Source Code Pro', monospace;
            color: var(--subtle-text-color);
            font-size: 0.8rem;
        }

        @media (max-width: 768px) {
            .content-wrapper { padding: 0 20px; }
            .header-section h1 { font-size: 2.2rem; }
            .header-section .subtitle { font-size: 1rem; }
            .project-section { flex-direction: column; justify-content: center; min-height: auto; padding: 50px 0; }
            .project-section.align-left, .project-section.align-right { justify-content: center; }
            .hexagon-node { width: 95%; max-width: 400px; padding: 25px; }
        }
    </style>
</head>
<body>

    <div class="canvas-container">
        <canvas id="particle-canvas"></canvas>
        <canvas id="tree-canvas"></canvas>
    </div>

    <div class="content-wrapper">
        <header class="header-section">
            <h1>Geva Kipper</h1>
            <p class="subtitle">Software Engineer at Google, working on the future of search.</p>
            <p class="ai-notice"><code>This portfolio is procedurally generated and re-designed by an AI every 24 hours.</code></p>
            <div class="scroll-indicator"></div>
        </header>

        <main id="projects-container"></main>

        <footer class="footer-section">
             <div class="social-links">
                <a href="https://github.com/gevak" target="_blank" rel="noopener noreferrer" title="GitHub">
                    <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297 24 5.67 18.627.297 12 .297z"/></svg>
                </a>
                <a href="https://linkedin.com/in/gevakip" target="_blank" rel="noopener noreferrer" title="LinkedIn">
                    <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.225 0z"/></svg>
                </a>
                <a href="https://facebook.com/geva.kipper" target="_blank" rel="noopener noreferrer" title="Facebook">
                    <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23.998 12c0-6.627-5.373-12-12-12S0 5.373 0 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.61 22.954 23.998 17.99 23.998 12z"/></svg>
                </a>
            </div>
            <div class="footer-text">
                <p>Design generated by OpenAI's GPT-4 on a whim.</p>
                <p>Time since last universal reboot: <span id="stopwatch">[ 0000d : 00h : 00m : 00s ]</span></p>
            </div>
        </footer>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- PROJECT DATA ---
    const projects = [
        {
            id: 'glglstats',
            align: 'left',
            title: 'GlglStats',
            description: 'A Python project measuring the repetitiveness of Israeli pop-chart songs via LZ77 compression, with visualizations of repetition patterns.',
            buttons: [
                { text: 'View Project Site', url: 'https://glglstats.geekip.dev' },
                { text: 'Watch PyData Talk', url: 'https://www.youtube.com/watch?v=jrKAtOsj1Lo' }
            ]
        },
        {
            id: 'ahuzat-dibuk',
            align: 'right',
            title: 'Ahuzat Dibuk',
            description: 'Python scraping & data visualization project generating heat-maps of Tel-Aviv parking lot occupancy to aid residents.',
            buttons: [
                { text: 'News: 13tv.co.il', url: 'https://13tv.co.il/item/news/domestic/internal/parking-902956407/' },
                { text: 'News: Mako', url: 'https://www.mako.co.il/nexter-news/Article-ae43964b891bf71027.htm' },
                { text: 'Original Post', url: 'https://www.facebook.com/groups/secrettelaviv/posts/10159636301195943/' }
            ]
        },
        {
            id: '2d-part-orienting',
            align: 'left',
            title: '2D Part Orienting',
            description: "A C++ implementation of an efficient algorithm for constructing a 'push plan' to orient a polygon, contributed to an open-source geometry library.",
            buttons: [
                { text: 'View Info & Code', url: 'https://www.cgl.cs.tau.ac.il/projects/2d-part-orienting/' }
            ]
        },
        {
            id: 'the-turing-jest',
            align: 'right',
            title: 'The Turing Jest',
            description: 'An LLM arena where AI models compete at creating and explaining puns, with user-based ratings.',
            buttons: [
                { text: 'Visit The Arena', url: 'https://jest.geekip.dev' }
            ]
        },
        {
            id: 'rhymes-of-israel',
            align: 'left',
            title: 'Rhymes of Israel',
            description: 'A Chrome extension using an LLM to rewrite Israeli news headlines into comedic, highschool-yearbook-style rhymes.',
            buttons: [
                { text: 'Install Extension', url: 'https://chromewebstore.google.com/detail/rhymes-of-israel/eainginjgdkpgolpjniijdihfbeeeklb' }
            ]
        },
        {
            id: 'this-website',
            align: 'right',
            title: 'The Digital Tree',
            description: 'A meta-project; this very portfolio. A single-page, dynamically growing site, re-imagined daily by AI.',
            buttons: [
                { text: 'View Source Link', url: 'https://geekip.dev' }
            ]
        }
    ];

    // --- DYNAMIC CONTENT INJECTION ---
    const projectsContainer = document.getElementById('projects-container');
    projects.forEach(project => {
        const section = document.createElement('section');
        section.className = `project-section align-${project.align}`;
        section.id = `project-${project.id}`;

        let buttonsHTML = project.buttons.map(btn => 
            `<a href="${btn.url}" target="_blank" rel="noopener noreferrer" class="btn">${btn.text}</a>`
        ).join('');

        section.innerHTML = `
            <div class="hexagon-node">
                <h2>${project.title}</h2>
                <p>${project.description}</p>
                <div class="project-buttons">${buttonsHTML}</div>
            </div>
        `;
        projectsContainer.appendChild(section);
    });

    // --- DAILY ACCENT COLOR ---
    const setDailyAccentColor = () => {
        const vibrantColors = [
            '#33ff57', '#3357ff', '#ff33a1', '#ff8c33', '#a133ff', 
            '#33fff5', '#f5ff33', '#ff5733', '#00e5ff', '#ff007f'
        ];
        const dayOfYear = Math.floor((new Date() - new Date(new Date().getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
        const color = vibrantColors[dayOfYear % vibrantColors.length];
        document.documentElement.style.setProperty('--accent-color', color);
    };

    // --- STOPWATCH ---
    const setupStopwatch = () => {
        const stopwatchEl = document.getElementById('stopwatch');
        const rebootDate = new Date('2025-09-13T00:58:20');

        setInterval(() => {
            const now = new Date();
            let diff = now - rebootDate;
            
            const isNegative = diff < 0;
            if (isNegative) diff = -diff;

            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const m = Math.floor((diff / 1000 / 60) % 60);
            const s = Math.floor((diff / 1000) % 60);

            const pad = (num) => num.toString().padStart(2, '0');
            const sign = isNegative ? '-' : '';

            stopwatchEl.textContent = `${sign}[ ${d.toString().padStart(4, '0')}d : ${pad(h)}h : ${pad(m)}m : ${pad(s)}s ]`;
        }, 1000);
    };

    // --- PARTICLE CANVAS ---
    const particleCanvas = document.getElementById('particle-canvas');
    const pCtx = particleCanvas.getContext('2d');
    let particles = [];
    
    const setupParticleCanvas = () => {
        particleCanvas.width = window.innerWidth;
        particleCanvas.height = window.innerHeight;
        particles = [];
        const particleCount = Math.floor(particleCanvas.width * particleCanvas.height / 25000);
        for(let i = 0; i < particleCount; i++) {
            particles.push({
                x: Math.random() * particleCanvas.width,
                y: Math.random() * particleCanvas.height,
                vx: (Math.random() - 0.5) * 0.3,
                vy: (Math.random() - 0.5) * 0.3,
                size: Math.random() * 2 + 0.5
            });
        }
    };

    const drawParticles = () => {
        pCtx.clearRect(0, 0, particleCanvas.width, particleCanvas.height);
        pCtx.fillStyle = 'rgba(255, 255, 255, 0.4)';
        particles.forEach(p => {
            p.x += p.vx;
            p.y += p.vy;

            if (p.x < 0 || p.x > particleCanvas.width) p.vx *= -1;
            if (p.y < 0 || p.y > particleCanvas.height) p.vy *= -1;

            pCtx.beginPath();
            pCtx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
            pCtx.fill();
        });
        requestAnimationFrame(drawParticles);
    };
    
    // --- TREE CANVAS ---
    const treeCanvas = document.getElementById('tree-canvas');
    const tCtx = treeCanvas.getContext('2d');
    let projectNodesMeta = [];

    const setupTreeCanvas = () => {
        treeCanvas.width = window.innerWidth;
        treeCanvas.height = window.innerHeight;
        
        projectNodesMeta = projects.map(p => {
            const el = document.getElementById(`project-${p.id}`);
            const nodeEl = el.querySelector('.hexagon-node');
            const rect = el.getBoundingClientRect();
            const nodeRect = nodeEl.getBoundingClientRect();
            const triggerY = rect.top + window.scrollY;

            return {
                id: p.id,
                el: el,
                side: p.align,
                triggerY: triggerY,
                branchEndY: triggerY + nodeRect.height / 2,
                pulse: { active: false, start: 0, duration: 1000, maxRadius: 40}
            };
        });
    };

    let lastScrollY = window.scrollY;
    let isScrolling = false;
    
    const drawTree = (timestamp) => {
        isScrolling = false;
        const scrollY = window.scrollY;
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        const scrollProgress = Math.min(1, scrollY / (scrollHeight - clientHeight));
        
        const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--accent-color');
        
        tCtx.clearRect(0, 0, treeCanvas.width, treeCanvas.height);
        
        // Final zoom out effect
        const zoomStartProgress = 0.95;
        let scale = 1, panY = 0;
        if (scrollProgress > zoomStartProgress) {
            const zoomProgress = (scrollProgress - zoomStartProgress) / (1 - zoomStartProgress);
            scale = 1 - (zoomProgress * 0.15);
            panY = zoomProgress * 30;
        }
        
        tCtx.save();
        tCtx.translate(treeCanvas.width / 2, panY);
        tCtx.scale(scale, scale);
        
        // --- Draw logic ---
        tCtx.strokeStyle = accentColor;
        tCtx.shadowColor = accentColor;

        // Root pulse
        const pulseFactor = (Math.sin(timestamp / 500) + 1) / 2; // 0 to 1
        
        // Draw Root System
        const rootY = clientHeight - 60;
        tCtx.lineWidth = 1 + pulseFactor * 1.5;
        tCtx.shadowBlur = 5 + pulseFactor * 5;
        tCtx.beginPath();
        tCtx.moveTo(0, rootY);
        tCtx.bezierCurveTo(-20, rootY + 20, -40, rootY - 10, -60, rootY + 30);
        tCtx.moveTo(0, rootY);
        tCtx.bezierCurveTo(20, rootY + 20, 40, rootY - 10, 60, rootY + 30);
        tCtx.moveTo(0, rootY);
        tCtx.lineTo(0, rootY - 20);
        tCtx.stroke();

        // Draw Trunk
        const trunkStart = rootY - 20;
        const trunkEnd = 0;
        const currentTrunkLength = (trunkStart - trunkEnd) * scrollProgress;
        const currentTrunkY = trunkStart - currentTrunkLength;
        tCtx.lineWidth = 2;
        tCtx.shadowBlur = 10;
        tCtx.beginPath();
        tCtx.moveTo(0, trunkStart);
        tCtx.lineTo(0, currentTrunkY);
        tCtx.stroke();

        // Draw Branches & Pulses
        projectNodesMeta.forEach(node => {
            const branchStartY = node.triggerY - scrollY + 40; // Adjusted for better visual alignment
            
            // Branch growth animation
            const viewBottom = scrollY + clientHeight;
            const animStart = node.triggerY - clientHeight * 0.5;
            const animEnd = node.triggerY;
            
            if (viewBottom > node.triggerY) {
                const branchProgress = Math.min(1, (scrollY - animStart) / (animEnd - animStart));
                if (branchProgress > 0) {
                    const branchEndX = (node.side === 'left' ? -1 : 1) * treeCanvas.width * 0.27;
                    const controlX = branchEndX * 0.3;

                    tCtx.beginPath();
                    tCtx.moveTo(0, branchStartY);
                    tCtx.bezierCurveTo(
                        controlX * branchProgress, branchStartY,
                        branchEndX * branchProgress, branchStartY,
                        branchEndX * branchProgress, branchStartY
                    );

                    tCtx.lineWidth = 1.5;
                    tCtx.shadowBlur = 8;
                    tCtx.stroke();
                }
            }
            
            // Pulse animation
            if (node.pulse.active) {
                const elapsed = timestamp - node.pulse.start;
                if (elapsed < node.pulse.duration) {
                    const pulseProgress = elapsed / node.pulse.duration;
                    const radius = pulseProgress * node.pulse.maxRadius;
                    const opacity = 1 - pulseProgress;
                    
                    const branchEndX = (node.side === 'left' ? -1 : 1) * treeCanvas.width * 0.27;
                    
                    tCtx.beginPath();
                    tCtx.arc(branchEndX, branchStartY, radius, 0, Math.PI * 2);
                    tCtx.strokeStyle = `rgba(${parseInt(accentColor.slice(1,3), 16)}, ${parseInt(accentColor.slice(3,5), 16)}, ${parseInt(accentColor.slice(5,7), 16)}, ${opacity})`;
                    tCtx.lineWidth = 2;
                    tCtx.stroke();
                } else {
                    node.pulse.active = false;
                }
            }
        });
        
        tCtx.restore();
    };

    window.addEventListener('scroll', () => {
        if (!isScrolling) {
            isScrolling = true;
            requestAnimationFrame(drawTree);
        }
    });

    // --- INTERSECTION OBSERVER for content fade-in and branch pulse ---
    const observer = new IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('is-visible');
                const meta = projectNodesMeta.find(m => m.el === entry.target);
                if (meta && !meta.pulse.active) {
                    meta.pulse.active = true;
                    meta.pulse.start = performance.now();
                }
                // obs.unobserve(entry.target); // Optional: keep observing for re-animation
            } else {
                 entry.target.classList.remove('is-visible'); // Optional: for re-animation on scroll up
            }
        });
    }, { threshold: 0.3 });

    // --- ON RESIZE ---
    window.addEventListener('resize', () => {
        setupParticleCanvas();
        setupTreeCanvas();
        requestAnimationFrame(drawTree);
    });

    // --- INITIALIZATION ---
    setDailyAccentColor();
    setupStopwatch();
    
    // Canvas setup
    setupParticleCanvas();
    requestAnimationFrame(drawParticles);
    
    // Tree setup needs to wait for layout
    setTimeout(() => {
        setupTreeCanvas();
        requestAnimationFrame(drawTree);
        // Start observing projects
        document.querySelectorAll('.project-section').forEach(section => observer.observe(section));
    }, 100);
});
</script>

<!-- Add this block to embed the like button -->
    <script src="/static/js/like_button.js"></script>
    <script>
        LikeButton.init({
          pageId: "20250913",
          position: "bottom-right", // Options: bottom-right, bottom-left, top-right, top-left
        });
    </script>

</body>
</html>