<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Geva Kipper — Interactive Storybook Portfolio</title>
  <meta name="description" content="An interactive storybook portfolio: choose your own path through projects, with multiple endings—single page, no navigation." />

  <style>
    :root{
      --bg: #0b0d12;
      --paper: rgba(255,255,255,0.06);
      --paper2: rgba(255,255,255,0.085);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.68);
      --muted2: rgba(255,255,255,0.55);
      --line: rgba(255,255,255,0.12);
      --shadow: 0 18px 60px rgba(0,0,0,0.35);
      --shadow2: 0 10px 30px rgba(0,0,0,0.35);
      --radius: 18px;
      --radius2: 14px;
      --max: 1080px;
      --accent: #7ad7ff; /* set by daily theme JS */
      --accent2: rgba(122, 215, 255, 0.26);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --serif: ui-serif, "Iowan Old Style", "Palatino Linotype", Palatino, Garamond, Georgia, serif;
    }

    /* Base */
    html, body { height: 100%; }
    body{
      margin:0;
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(1000px 700px at 20% -10%, rgba(255,255,255,0.07), transparent 50%),
        radial-gradient(900px 650px at 90% 10%, rgba(255,255,255,0.05), transparent 55%),
        radial-gradient(1200px 900px at 70% 110%, rgba(255,255,255,0.05), transparent 55%),
        linear-gradient(180deg, #080a10 0%, #0b0d12 45%, #070910 100%);
      overflow-x:hidden;
    }

    a{ color: var(--text); text-decoration: none; }
    a:hover{ text-decoration: underline; text-decoration-color: rgba(255,255,255,0.35); }
    *{ box-sizing:border-box; }
    button, .chip, .node-btn{
      font: inherit;
      color: inherit;
    }
    :focus-visible{
      outline: 2px solid rgba(255,255,255,0.75);
      outline-offset: 3px;
      border-radius: 12px;
    }

    .wrap{
      width: min(var(--max), calc(100% - 48px));
      margin: 0 auto;
      padding: 30px 0 56px;
    }

    .top-nav{
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap: 18px;
      padding: 18px 0 0;
      width: min(var(--max), calc(100% - 48px));
      margin: 0 auto;
      opacity: 0.95;
    }
    .top-nav .mini{
      display:flex; align-items:center; gap: 10px;
      color: var(--muted);
      font-size: 13px;
      letter-spacing: 0.02em;
    }
    .pill{
      display:inline-flex; align-items:center; gap: 10px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.04);
      padding: 10px 12px;
      border-radius: 999px;
      box-shadow: 0 8px 22px rgba(0,0,0,0.15);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .pill .dot{
      width: 8px; height: 8px; border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 0 0 5px var(--accent2);
    }
    .pill .kbd{
      font-family: var(--mono);
      font-size: 12px;
      color: var(--muted);
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.03);
    }

    /* Hero / Cover */
    header.hero{
      padding: 26px 0 8px;
    }
    .hero-card{
      border: 1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border-radius: calc(var(--radius) + 6px);
      padding: 28px 26px;
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
    }
    .hero-card::before{
      content:"";
      position:absolute; inset:-120px -120px auto -120px;
      height: 260px;
      background: radial-gradient(closest-side, rgba(255,255,255,0.08), transparent 68%);
      transform: translateX(30%);
      pointer-events:none;
    }
    .title{
      font-family: var(--serif);
      font-weight: 650;
      letter-spacing: -0.02em;
      font-size: clamp(36px, 5vw, 54px);
      margin: 0 0 8px;
      line-height: 1.05;
    }
    .lede{
      margin: 0;
      color: rgba(255,255,255,0.84);
      font-size: clamp(15px, 1.5vw, 18px);
      line-height: 1.6;
      max-width: 72ch;
    }
    .sub{
      margin: 12px 0 0;
      color: var(--muted);
      font-size: 14px;
      letter-spacing: 0.01em;
      max-width: 72ch;
    }
    .hero-row{
      display:flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-top: 18px;
    }

    /* Daily remix badge: tasteful shimmer */
    .badge{
      position: relative;
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.04);
      box-shadow: 0 10px 25px rgba(0,0,0,0.22);
      overflow: hidden;
      user-select:none;
      white-space: nowrap;
    }
    .badge strong{
      font-weight: 600;
      letter-spacing: 0.02em;
      font-size: 12px;
      text-transform: uppercase;
    }
    .badge span{
      color: var(--muted);
      font-size: 12.5px;
    }
    .badge::after{
      content:"";
      position:absolute;
      inset:0;
      background:
        linear-gradient(120deg,
          transparent 0%,
          rgba(255,255,255,0.0) 38%,
          rgba(255,255,255,0.14) 45%,
          rgba(255,255,255,0.0) 56%,
          transparent 100%);
      transform: translateX(-110%);
      animation: shimmer 7.2s ease-in-out infinite;
      pointer-events:none;
      opacity: 0.9;
    }
    @keyframes shimmer{
      0%, 55%{ transform: translateX(-110%); }
      75%{ transform: translateX(110%); }
      100%{ transform: translateX(110%); }
    }

    /* Decision Compass */
    section.compass{
      padding: 20px 0 8px;
    }
    .compass-card{
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.035);
      border-radius: var(--radius);
      padding: 18px 16px 16px;
      box-shadow: var(--shadow2);
      overflow: hidden;
    }
    .compass-head{
      display:flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 10px;
    }
    .compass-head h2{
      margin: 0;
      font-size: 15px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.82);
    }
    .compass-head p{
      margin: 0;
      font-size: 13px;
      color: var(--muted);
    }

    .compass-ui{
      position: relative;
      border-radius: var(--radius2);
      border: 1px solid rgba(255,255,255,0.10);
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.015));
      padding: 14px;
      overflow:hidden;
      min-height: 230px;
    }

    svg#map{
      width: 100%;
      height: 260px;
      display:block;
    }
    .map-line{
      stroke: rgba(255,255,255,0.22);
      stroke-width: 1.2;
      vector-effect: non-scaling-stroke;
    }
    .map-node circle{
      fill: rgba(255,255,255,0.04);
      stroke: rgba(255,255,255,0.24);
      stroke-width: 1.2;
      transition: 220ms ease;
    }
    .map-node text{
      font-size: 12.5px;
      fill: rgba(255,255,255,0.86);
      letter-spacing: 0.01em;
    }
    .map-node .hint{
      font-size: 11px;
      fill: rgba(255,255,255,0.55);
    }

    /* Active/dim states */
    .map.dim .map-node{ opacity: 0.35; }
    .map.dim .map-line{ opacity: 0.25; }
    .map-node.active{ opacity: 1 !important; }
    .map-node.active circle{
      fill: color-mix(in srgb, var(--accent) 15%, rgba(255,255,255,0.05));
      stroke: color-mix(in srgb, var(--accent) 70%, rgba(255,255,255,0.25));
      box-shadow: 0 0 0 8px var(--accent2);
    }
    .map-line.active{
      stroke: color-mix(in srgb, var(--accent) 70%, rgba(255,255,255,0.2));
      opacity: 0.95 !important;
    }

    .map-node button.node-btn{
      all: unset;
      cursor: pointer;
    }
    .map-node button.node-btn:focus-visible{
      outline: 2px solid rgba(255,255,255,0.75);
      outline-offset: 6px;
      border-radius: 999px;
    }

    .compass-actions{
      display:flex;
      justify-content: space-between;
      gap: 12px;
      margin-top: 12px;
      flex-wrap: wrap;
    }
    .btn{
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(255,255,255,0.04);
      padding: 10px 12px;
      border-radius: 12px;
      cursor: pointer;
      display:inline-flex;
      align-items:center;
      gap: 10px;
      transition: transform 150ms ease, background 150ms ease, border-color 150ms ease;
      user-select:none;
    }
    .btn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,0.06);
      border-color: rgba(255,255,255,0.22);
      text-decoration:none;
    }
    .btn.primary{
      border-color: color-mix(in srgb, var(--accent) 65%, rgba(255,255,255,0.18));
      background: color-mix(in srgb, var(--accent) 18%, rgba(255,255,255,0.04));
    }
    .btn .mini{
      font-family: var(--mono);
      font-size: 12px;
      color: var(--muted);
    }

    /* Chapter cards */
    main{
      padding: 18px 0 18px;
    }
    .chapters{
      display: grid;
      grid-template-columns: 1fr;
      gap: 14px;
      padding: 8px 0;
    }

    .chapter{
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.03);
      border-radius: calc(var(--radius) + 2px);
      overflow: hidden;
      box-shadow: var(--shadow2);
    }

    /* 3D Flip (desktop) */
    .flip{
      position: relative;
      perspective: 1200px;
    }
    .flip-inner{
      position: relative;
      transform-style: preserve-3d;
      transition: transform 520ms cubic-bezier(.2,.9,.2,1);
      will-change: transform;
    }
    .chapter[data-open="true"] .flip-inner{
      transform: rotateY(180deg);
    }
    .face{
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      padding: 18px 18px 14px;
      min-height: 260px;
    }
    .front{
      background:
        linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
    }
    .back{
      position: absolute;
      inset:0;
      transform: rotateY(180deg);
      background:
        linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.025));
    }

    .chapter-head{
      display:flex;
      align-items:flex-start;
      justify-content: space-between;
      gap: 12px;
    }
    .chapter h3{
      margin: 0 0 6px;
      font-family: var(--serif);
      letter-spacing: -0.01em;
      font-size: 22px;
      line-height: 1.15;
    }
    .chapter .label{
      margin-top: 2px;
      font-size: 12px;
      color: var(--muted2);
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }
    .chapter p{
      margin: 10px 0 0;
      color: rgba(255,255,255,0.80);
      line-height: 1.62;
      max-width: 90ch;
    }
    .tags{
      margin-top: 12px;
      display:flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.03);
      color: rgba(255,255,255,0.78);
      font-size: 12.5px;
      user-select:none;
    }
    .chip .pin{
      width: 8px; height: 8px; border-radius: 2px;
      background: var(--accent);
      opacity: 0.85;
    }

    .chapter-actions{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 14px;
    }
    .chapter-actions .btn{
      padding: 10px 12px;
      border-radius: 12px;
    }
    .links{
      display:flex; flex-direction: column; gap: 10px;
      margin-top: 12px;
    }
    .links a{
      display:inline-flex;
      align-items:center;
      justify-content: space-between;
      gap: 16px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.03);
      padding: 10px 12px;
      border-radius: 12px;
      text-decoration:none;
    }
    .links a:hover{
      border-color: rgba(255,255,255,0.22);
      background: rgba(255,255,255,0.05);
      text-decoration:none;
    }
    .links a .right{
      font-family: var(--mono);
      color: var(--muted);
      font-size: 12px;
      white-space: nowrap;
      opacity: 0.9;
    }

    /* Video thumbnail panel */
    .media{
      margin-top: 14px;
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 14px;
      overflow:hidden;
      background: rgba(255,255,255,0.02);
    }
    .thumb{
      position: relative;
      display:block;
      aspect-ratio: 16 / 9;
      background:
        radial-gradient(700px 280px at 30% 20%, rgba(255,255,255,0.07), transparent 60%),
        linear-gradient(135deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)),
        linear-gradient(180deg, rgba(0,0,0,0.2), rgba(0,0,0,0.35));
      cursor: pointer;
    }
    .thumb::before{
      content:"";
      position:absolute;
      inset:0;
      background-image:
        linear-gradient(90deg, rgba(255,255,255,0.06) 1px, transparent 1px),
        linear-gradient(0deg, rgba(255,255,255,0.04) 1px, transparent 1px);
      background-size: 48px 48px, 48px 48px;
      opacity: 0.20;
      pointer-events:none;
    }
    .play{
      position:absolute;
      left: 18px; bottom: 18px;
      display:flex;
      align-items:center;
      gap: 10px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(0,0,0,0.25);
      padding: 10px 12px;
      border-radius: 999px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .play .tri{
      width: 0; height: 0;
      border-left: 10px solid rgba(255,255,255,0.86);
      border-top: 7px solid transparent;
      border-bottom: 7px solid transparent;
      opacity: 0.9;
    }
    .play .cap{
      font-size: 13px;
      color: rgba(255,255,255,0.86);
    }
    .media figcaption{
      padding: 10px 12px 12px;
      color: var(--muted);
      font-size: 13px;
      border-top: 1px solid rgba(255,255,255,0.10);
    }

    /* Chapter choice prompt */
    .choice{
      margin-top: 14px;
      padding-top: 12px;
      border-top: 1px solid rgba(255,255,255,0.10);
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }
    .choice .prompt{
      color: var(--muted);
      font-size: 13px;
    }
    .choice .mini-actions{
      display:flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .btn.tiny{
      padding: 8px 10px;
      border-radius: 999px;
      font-size: 12.5px;
    }

    /* Endings */
    section.endings{
      padding: 18px 0 0;
    }
    .ending{
      border: 1px solid rgba(255,255,255,0.14);
      background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.025));
      border-radius: var(--radius);
      padding: 18px 18px 16px;
      box-shadow: var(--shadow2);
      display:none;
    }
    .ending[data-show="true"]{ display:block; }
    .ending h4{
      margin: 0 0 8px;
      font-family: var(--serif);
      font-size: 22px;
      letter-spacing: -0.01em;
    }
    .ending .reached{
      color: var(--muted2);
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      margin-bottom: 6px;
    }
    .ending p{
      margin: 0;
      color: rgba(255,255,255,0.82);
      line-height: 1.68;
      max-width: 95ch;
    }
    .ending .ending-actions{
      margin-top: 14px;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    /* Epilogue contact card */
    .contact-row{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-top: 12px;
    }
    .big-link{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 14px;
      border-radius: 14px;
      padding: 14px 14px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.03);
      text-decoration:none;
    }
    .big-link:hover{
      border-color: rgba(255,255,255,0.22);
      background: rgba(255,255,255,0.05);
      text-decoration:none;
    }
    .big-link .left{
      display:flex; align-items:center; gap: 12px;
      min-width: 0;
    }
    .icon{
      width: 34px; height: 34px;
      border-radius: 12px;
      display:grid; place-items:center;
      border: 1px solid rgba(255,255,255,0.14);
      background: color-mix(in srgb, var(--accent) 12%, rgba(255,255,255,0.03));
      flex: 0 0 auto;
    }
    .big-link .text{
      display:flex; flex-direction:column; gap: 2px;
      min-width: 0;
    }
    .big-link .text strong{
      font-weight: 600;
      font-size: 14px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .big-link .text span{
      font-size: 12.5px;
      color: var(--muted);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .big-link .right{
      font-family: var(--mono);
      font-size: 12px;
      color: var(--muted);
      opacity: 0.9;
      flex: 0 0 auto;
    }

    .shortcut{
      margin-top: 14px;
      padding-top: 12px;
      border-top: 1px solid rgba(255,255,255,0.10);
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }
    .shortcut .prompt{ color: var(--muted); font-size: 13px; }
    .shortcut .mini-actions{ display:flex; gap: 8px; flex-wrap: wrap; }

    /* Footer colophon */
    footer{
      padding: 22px 0 34px;
      color: var(--muted);
    }
    .colophon{
      width: min(var(--max), calc(100% - 48px));
      margin: 0 auto;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 14px;
      flex-wrap: wrap;
      border-top: 1px solid rgba(255,255,255,0.10);
      padding-top: 18px;
    }
    .credit{
      font-size: 13px;
      color: var(--muted);
    }
    .stopwatch{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.03);
      padding: 10px 12px;
      border-radius: 999px;
      color: rgba(255,255,255,0.82);
    }
    .stopwatch .label{
      font-size: 12.5px;
      color: var(--muted);
      letter-spacing: 0.01em;
    }
    .stopwatch .time{
      font-family: var(--mono);
      font-variant-numeric: tabular-nums;
      letter-spacing: 0.02em;
    }

    /* Lightbox */
    .lightbox{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.68);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      display:none;
      z-index: 999;
      padding: 24px;
    }
    .lightbox[data-open="true"]{ display:grid; place-items:center; }
    .lightbox .panel{
      width: min(980px, 100%);
      border-radius: 18px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(10,12,18,0.75);
      box-shadow: 0 30px 100px rgba(0,0,0,0.6);
    }
    .lightbox .bar{
      display:flex;
      align-items:center;
      justify-content: space-between;
      padding: 10px 12px;
      border-bottom: 1px solid rgba(255,255,255,0.12);
      color: rgba(255,255,255,0.86);
      background: rgba(255,255,255,0.03);
    }
    .lightbox .bar .cap{
      font-size: 13px;
      color: var(--muted);
    }
    .lightbox iframe{
      width: 100%;
      aspect-ratio: 16 / 9;
      border: 0;
      display:block;
      background: #000;
    }

    /* Mobile adjustments: accordion instead of 3D flip */
    @media (max-width: 740px){
      .wrap{ width: min(var(--max), calc(100% - 28px)); }
      .top-nav{ width: min(var(--max), calc(100% - 28px)); }
      .hero-card{ padding: 22px 18px; }
      .compass-head{ flex-direction: column; align-items:flex-start; gap: 6px; }
      svg#map{ height: 300px; }

      .flip{ perspective: none; }
      .flip-inner{ transform: none !important; transition: none; }
      .back{ position: static; transform: none; }
      .face{ min-height: unset; }
      .back{ display:none; }
      .chapter[data-open="true"] .back{ display:block; }
      .chapter[data-open="true"] .front{ border-bottom: 1px solid rgba(255,255,255,0.10); }

      .contact-row{ grid-template-columns: 1fr; }
      .colophon{ justify-content: center; }
      .stopwatch{ width: 100%; justify-content:center; }
    }

    @media (prefers-reduced-motion: reduce){
      *{ scroll-behavior: auto !important; }
      .flip-inner{ transition: none !important; }
      .badge::after{ animation: none !important; }
    }

    /* Utility */
    .sr-only{
      position:absolute; width:1px; height:1px; padding:0; margin:-1px;
      overflow:hidden; clip: rect(0,0,0,0); border:0;
    }
    .sep{ height: 10px; }
  </style>
</head>

<body>
  <div class="top-nav" aria-label="Top utilities">
    <div class="mini pill" title="Living site">
      <span class="dot" aria-hidden="true"></span>
      <span>Single-page interactive storybook</span>
      <span class="kbd">no navigation</span>
    </div>
    <a class="btn" href="#compass" aria-label="Jump to Decision Compass">
      Jump to Compass <span class="mini">↓</span>
    </a>
  </div>

  <div class="wrap">
    <!-- HERO / COVER -->
    <header class="hero" id="top">
      <div class="hero-card">
        <h1 class="title">Geva Kipper</h1>
        <p class="lede">Software engineer at Google, building and refining large-scale systems that turn complex data into reliable products.</p>
        <p class="sub">This portfolio is re-designed each day by AI—ever-changing by design.</p>

        <div class="hero-row">
          <div class="badge" role="note" aria-label="Daily remix badge">
            <strong>Daily Remix</strong>
            <span id="dailyThemeLabel">Theme generated for today</span>
          </div>

          <div class="pill mini" aria-label="Controls tip">
            <span>Choose a path below, then follow the chapter prompts</span>
          </div>
        </div>
      </div>
    </header>

    <!-- DECISION COMPASS -->
    <section class="compass" id="compass" aria-label="Decision Compass">
      <div class="compass-card">
        <div class="compass-head">
          <h2>Decision Compass</h2>
          <p>Pick an interpretation. The story ends differently depending on your choices.</p>
        </div>

        <div class="compass-ui">
          <svg id="map" class="map" viewBox="0 0 980 260" role="img" aria-label="Branching map of career paths">
            <!-- lines from center (490,130) -->
            <g id="lines">
              <line id="line-data" class="map-line" x1="490" y1="130" x2="160" y2="70"/>
              <line id="line-geo" class="map-line" x1="490" y1="130" x2="820" y2="65"/>
              <line id="line-llm" class="map-line" x1="490" y1="130" x2="830" y2="195"/>
              <line id="line-civic" class="map-line" x1="490" y1="130" x2="170" y2="200"/>
              <line id="line-meta" class="map-line" x1="490" y1="130" x2="490" y2="240"/>
            </g>

            <!-- center node -->
            <g class="map-node" id="node-center" aria-hidden="true">
              <circle cx="490" cy="130" r="18"></circle>
              <text x="490" y="105" text-anchor="middle">You</text>
              <text class="hint" x="490" y="155" text-anchor="middle">choose a path</text>
            </g>

            <!-- nodes -->
            <g class="map-node" id="node-data">
              <button class="node-btn" type="button" aria-label="Choose Data and Visualization path" data-path="data" data-target="glglstats" data-ending="ending-data"></button>
              <circle cx="160" cy="70" r="20"></circle>
              <text x="160" y="45" text-anchor="middle">Data &amp; Visualization</text>
              <text class="hint" x="160" y="92" text-anchor="middle">patterns, narrative</text>
            </g>

            <g class="map-node" id="node-geo">
              <button class="node-btn" type="button" aria-label="Choose Algorithms and Geometry path" data-path="geo" data-target="part-orienting" data-ending="ending-geo"></button>
              <circle cx="820" cy="65" r="20"></circle>
              <text x="820" y="40" text-anchor="middle">Algorithms &amp; Geometry</text>
              <text class="hint" x="820" y="87" text-anchor="middle">proof, efficiency</text>
            </g>

            <g class="map-node" id="node-llm">
              <button class="node-btn" type="button" aria-label="Choose LLMs and Play path" data-path="llm" data-target="turing-jest" data-ending="ending-llm"></button>
              <circle cx="830" cy="195" r="20"></circle>
              <text x="830" y="170" text-anchor="middle">LLMs &amp; Play</text>
              <text class="hint" x="830" y="217" text-anchor="middle">humor, interfaces</text>
            </g>

            <g class="map-node" id="node-civic">
              <button class="node-btn" type="button" aria-label="Choose Civic Tech path" data-path="civic" data-target="ahuzat-dibuk" data-ending="ending-civic"></button>
              <circle cx="170" cy="200" r="20"></circle>
              <text x="170" y="175" text-anchor="middle">Civic Tech</text>
              <text class="hint" x="170" y="222" text-anchor="middle">public impact</text>
            </g>

            <g class="map-node" id="node-meta">
              <button class="node-btn" type="button" aria-label="Choose Meta / Web Craft path" data-path="meta" data-target="portfolio-meta" data-ending="ending-meta"></button>
              <circle cx="490" cy="240" r="20"></circle>
              <text x="490" y="215" text-anchor="middle">Meta / Web Craft</text>
              <text class="hint" x="490" y="262" text-anchor="middle">systems as stories</text>
            </g>
          </svg>
        </div>

        <div class="compass-actions">
          <button class="btn primary" type="button" id="restartBtn" aria-label="Restart your adventure and re-center the branching map">
            Restart your adventure <span class="mini">↺</span>
          </button>
          <a class="btn" href="#chapters" aria-label="Scroll to chapters">
            Or scroll the book <span class="mini">↓</span>
          </a>
        </div>
      </div>
    </section>

    <!-- CHAPTERS -->
    <main id="chapters" aria-label="Chapters">
      <div class="chapters">

        <!-- 1) GlglStats -->
        <article class="chapter flip" id="glglstats" data-chapter="glglstats" data-open="false" aria-label="Chapter: GlglStats">
          <div class="flip-inner">
            <section class="face front">
              <div class="chapter-head">
                <div>
                  <div class="label">Chapter 1 — music-data chapter</div>
                  <h3>GlglStats</h3>
                </div>
                <span class="chip" title="Accent marker"><span class="pin"></span>Music × Data</span>
              </div>

              <p><strong>Hook:</strong> Can you measure “how repetitive” a pop hit feels—without listening?</p>
              <p>Python project measuring repetitiveness of Israeli pop-chart songs using LZ77 compression, plus visualizations of repetition patterns across famous songs.</p>

              <div class="tags" aria-label="Tags">
                <span class="chip"><span class="pin"></span>Python</span>
                <span class="chip"><span class="pin"></span>Compression (LZ77)</span>
                <span class="chip"><span class="pin"></span>Visualization</span>
                <span class="chip"><span class="pin"></span>Music data</span>
              </div>

              <div class="chapter-actions">
                <button class="btn primary" type="button" data-action="choose" data-open="true">Choose this chapter</button>
                <a class="btn" href="https://glglstats.geekip.dev" target="_blank" rel="noopener">Visit project <span class="mini">↗</span></a>
              </div>

              <div class="choice" aria-label="Next chapter choices">
                <div class="prompt">Chapter choice: where next?</div>
                <div class="mini-actions">
                  <button class="btn tiny" type="button" data-action="goto" data-target="ahuzat-dibuk" data-path="data">Follow the data into the city</button>
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-data" data-path="data">End this arc</button>
                </div>
              </div>
            </section>

            <section class="face back" aria-label="GlglStats details">
              <div class="chapter-head">
                <div>
                  <div class="label">On the back of the page</div>
                  <h3>GlglStats — Details</h3>
                </div>
                <button class="btn" type="button" data-action="choose" data-open="false" aria-label="Close chapter">Close <span class="mini">⨯</span></button>
              </div>

              <p><strong>What it is:</strong> A reproducible pipeline that computes repetitiveness via LZ77-style compression signals, then visualizes repetition structures—turning “earworms” into plots.</p>

              <div class="links" aria-label="Links">
                <a href="https://glglstats.geekip.dev" target="_blank" rel="noopener">
                  <span>GlglStats website</span><span class="right">glglstats.geekip.dev ↗</span>
                </a>
              </div>

              <figure class="media" aria-label="PyData TLV talk video">
                <a class="thumb" href="#"
                   data-action="lightbox"
                   data-video="https://www.youtube.com/embed/jrKAtOsj1Lo?autoplay=1"
                   aria-label="Open video in lightbox: PyData TLV talk">
                  <div class="play">
                    <span class="tri" aria-hidden="true"></span>
                    <span class="cap">Watch: PyData TLV talk</span>
                  </div>
                </a>
                <figcaption>PyData TLV talk</figcaption>
              </figure>

              <div class="choice" aria-label="Next chapter choices">
                <div class="prompt">Chapter choice: keep the thread alive.</div>
                <div class="mini-actions">
                  <button class="btn tiny" type="button" data-action="goto" data-target="ahuzat-dibuk" data-path="data">Civic heat maps</button>
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-data" data-path="data">Reach ending</button>
                </div>
              </div>
            </section>
          </div>
        </article>

        <!-- 2) Ahuzat Dibuk -->
        <article class="chapter flip" id="ahuzat-dibuk" data-chapter="ahuzat-dibuk" data-open="false" aria-label="Chapter: Ahuzat Dibuk">
          <div class="flip-inner">
            <section class="face front">
              <div class="chapter-head">
                <div>
                  <div class="label">Chapter 2 — civic scraping chapter</div>
                  <h3>Ahuzat Dibuk</h3>
                </div>
                <span class="chip"><span class="pin"></span>Civic Tech</span>
              </div>

              <p><strong>Hook:</strong> If the city won’t publish the truth, can you *derive* it?</p>
              <p>Python scraping + data visualization project tracking Tel-Aviv parking lot occupancy and generating resident-friendly heat maps.</p>

              <div class="tags">
                <span class="chip"><span class="pin"></span>Python</span>
                <span class="chip"><span class="pin"></span>Scraping</span>
                <span class="chip"><span class="pin"></span>Visualization</span>
                <span class="chip"><span class="pin"></span>Public utility</span>
              </div>

              <div class="chapter-actions">
                <button class="btn primary" type="button" data-action="choose" data-open="true">Choose this chapter</button>
                <button class="btn" type="button" data-action="goto" data-target="ending-civic" data-path="civic">Aim for an ending <span class="mini">→</span></button>
              </div>

              <div class="choice">
                <div class="prompt">Chapter choice: which lens?</div>
                <div class="mini-actions">
                  <button class="btn tiny" type="button" data-action="goto" data-target="glglstats" data-path="data">Back to music-data</button>
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-civic" data-path="civic">End: civic arc</button>
                </div>
              </div>
            </section>

            <section class="face back" aria-label="Ahuzat Dibuk details">
              <div class="chapter-head">
                <div>
                  <div class="label">On the back of the page</div>
                  <h3>Ahuzat Dibuk — Details</h3>
                </div>
                <button class="btn" type="button" data-action="choose" data-open="false" aria-label="Close chapter">Close <span class="mini">⨯</span></button>
              </div>

              <p><strong>What it is:</strong> Automated collection + aggregation of occupancy signals, then heat maps optimized for real people making real decisions (where to park, when to try).</p>

              <div class="links" aria-label="Press links">
                <a href="https://13tv.co.il/item/news/domestic/internal/parking-902956407/" target="_blank" rel="noopener">
                  <span>Press: 13tv coverage</span><span class="right">13tv.co.il ↗</span>
                </a>
                <a href="https://www.mako.co.il/nexter-news/Article-ae43964b891bf71027.htm" target="_blank" rel="noopener">
                  <span>Press: mako (Nexter)</span><span class="right">mako.co.il ↗</span>
                </a>
                <a href="https://www.facebook.com/groups/secrettelaviv/posts/10159636301195943/" target="_blank" rel="noopener">
                  <span>Original Facebook post</span><span class="right">facebook.com ↗</span>
                </a>
              </div>

              <div class="choice" aria-label="Next chapter choices">
                <div class="prompt">Chapter choice: continue, or conclude.</div>
                <div class="mini-actions">
                  <button class="btn tiny" type="button" data-action="goto" data-target="portfolio-meta" data-path="meta">How the site frames the story</button>
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-civic" data-path="civic">Reach ending</button>
                </div>
              </div>
            </section>
          </div>
        </article>

        <!-- 3) 2D Part Orienting -->
        <article class="chapter flip" id="part-orienting" data-chapter="part-orienting" data-open="false" aria-label="Chapter: 2D Part Orienting">
          <div class="flip-inner">
            <section class="face front">
              <div class="chapter-head">
                <div>
                  <div class="label">Chapter 3 — geometry/algorithms chapter</div>
                  <h3>2D Part Orienting</h3>
                </div>
                <span class="chip"><span class="pin"></span>Computational Geometry</span>
              </div>

              <p><strong>Hook:</strong> In the right model, “moving a shape” becomes “proving a plan exists.”</p>
              <p>C++ implementation in an open-source computational geometry library of an efficient algorithm constructing a push plan to orient a polygon.</p>

              <div class="tags">
                <span class="chip"><span class="pin"></span>C++</span>
                <span class="chip"><span class="pin"></span>Algorithms</span>
                <span class="chip"><span class="pin"></span>Geometry</span>
                <span class="chip"><span class="pin"></span>Open source</span>
              </div>

              <div class="chapter-actions">
                <button class="btn primary" type="button" data-action="choose" data-open="true">Choose this chapter</button>
                <a class="btn" href="https://www.cgl.cs.tau.ac.il/projects/2d-part-orienting/" target="_blank" rel="noopener">
                  Read more <span class="mini">↗</span>
                </a>
              </div>

              <div class="choice">
                <div class="prompt">Chapter choice: what do you value next?</div>
                <div class="mini-actions">
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-geo" data-path="geo">End: geometry arc</button>
                  <button class="btn tiny" type="button" data-action="goto" data-target="turing-jest" data-path="llm">Switch to playful LLMs</button>
                </div>
              </div>
            </section>

            <section class="face back" aria-label="2D Part Orienting details">
              <div class="chapter-head">
                <div>
                  <div class="label">On the back of the page</div>
                  <h3>2D Part Orienting — Details</h3>
                </div>
                <button class="btn" type="button" data-action="choose" data-open="false" aria-label="Close chapter">Close <span class="mini">⨯</span></button>
              </div>

              <p><strong>What it is:</strong> A precise implementation (C++) of an efficient push-planning algorithm that orients a polygon—bridging theory and practical library-quality code.</p>

              <div class="links">
                <a href="https://www.cgl.cs.tau.ac.il/projects/2d-part-orienting/" target="_blank" rel="noopener">
                  <span>TAU Computational Geometry Lab project page</span><span class="right">cgl.cs.tau.ac.il ↗</span>
                </a>
              </div>

              <div class="choice" aria-label="Next chapter choices">
                <div class="prompt">Chapter choice: continue, or conclude.</div>
                <div class="mini-actions">
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-geo" data-path="geo">Reach ending</button>
                  <button class="btn tiny" type="button" data-action="goto" data-target="portfolio-meta" data-path="meta">Meta: why endings exist</button>
                </div>
              </div>
            </section>
          </div>
        </article>

        <!-- 4) The Turing Jest -->
        <article class="chapter flip" id="turing-jest" data-chapter="turing-jest" data-open="false" aria-label="Chapter: The Turing Jest">
          <div class="flip-inner">
            <section class="face front">
              <div class="chapter-head">
                <div>
                  <div class="label">Chapter 4 — LLM arena chapter</div>
                  <h3>The Turing Jest</h3>
                </div>
                <span class="chip"><span class="pin"></span>LLM Arena</span>
              </div>

              <p><strong>Hook:</strong> What if model evaluation was a game of wit—with receipts?</p>
              <p>An LMSYS-like arena where LLMs compete at making and explaining puns, with user ratings.</p>

              <div class="tags">
                <span class="chip"><span class="pin"></span>LLMs</span>
                <span class="chip"><span class="pin"></span>Evaluation</span>
                <span class="chip"><span class="pin"></span>Humor</span>
                <span class="chip"><span class="pin"></span>Web app</span>
              </div>

              <div class="chapter-actions">
                <button class="btn primary" type="button" data-action="choose" data-open="true">Choose this chapter</button>
                <a class="btn" href="https://jest.geekip.dev" target="_blank" rel="noopener">
                  Enter the arena <span class="mini">↗</span>
                </a>
              </div>

              <div class="choice">
                <div class="prompt">Chapter choice: push further?</div>
                <div class="mini-actions">
                  <button class="btn tiny" type="button" data-action="goto" data-target="rhymes" data-path="llm">LLM in the browser</button>
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-llm" data-path="llm">End: LLM arc</button>
                </div>
              </div>
            </section>

            <section class="face back" aria-label="The Turing Jest details">
              <div class="chapter-head">
                <div>
                  <div class="label">On the back of the page</div>
                  <h3>The Turing Jest — Details</h3>
                </div>
                <button class="btn" type="button" data-action="choose" data-open="false" aria-label="Close chapter">Close <span class="mini">⨯</span></button>
              </div>

              <p><strong>What it is:</strong> A playful “arena” interface where models go head-to-head on pun generation and explanation, with users rating outputs—turning qualitative taste into structured feedback.</p>

              <div class="links">
                <a href="https://jest.geekip.dev" target="_blank" rel="noopener">
                  <span>The Turing Jest</span><span class="right">jest.geekip.dev ↗</span>
                </a>
              </div>

              <div class="choice" aria-label="Next chapter choices">
                <div class="prompt">Chapter choice: continue, or conclude.</div>
                <div class="mini-actions">
                  <button class="btn tiny" type="button" data-action="goto" data-target="rhymes" data-path="llm">Next: Rhymes</button>
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-llm" data-path="llm">Reach ending</button>
                </div>
              </div>
            </section>
          </div>
        </article>

        <!-- 5) Rhymes of Israel -->
        <article class="chapter flip" id="rhymes" data-chapter="rhymes" data-open="false" aria-label="Chapter: Rhymes of Israel">
          <div class="flip-inner">
            <section class="face front">
              <div class="chapter-head">
                <div>
                  <div class="label">Chapter 5 — browser mischief chapter</div>
                  <h3>Rhymes of Israel</h3>
                </div>
                <span class="chip"><span class="pin"></span>Browser Mischief</span>
              </div>

              <p><strong>Hook:</strong> If headlines are the daily script, what happens when you rewrite them into rhyme?</p>
              <p>Chrome extension using an LLM to rewrite Israeli news headlines into comedic rhymes in the style of a highschool yearbook.</p>

              <div class="tags">
                <span class="chip"><span class="pin"></span>Chrome Extension</span>
                <span class="chip"><span class="pin"></span>LLM</span>
                <span class="chip"><span class="pin"></span>UX</span>
                <span class="chip"><span class="pin"></span>Comedy</span>
              </div>

              <div class="chapter-actions">
                <button class="btn primary" type="button" data-action="choose" data-open="true">Choose this chapter</button>
                <a class="btn" href="https://chromewebstore.google.com/detail/eainginjgdkpgolpjniijdihfbeeeklb" target="_blank" rel="noopener">
                  Chrome Web Store <span class="mini">↗</span>
                </a>
              </div>

              <div class="choice">
                <div class="prompt">Chapter choice: what kind of creator is this?</div>
                <div class="mini-actions">
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-llm" data-path="llm">End: LLM arc</button>
                  <button class="btn tiny" type="button" data-action="goto" data-target="portfolio-meta" data-path="meta">Meta: storycraft</button>
                </div>
              </div>
            </section>

            <section class="face back" aria-label="Rhymes of Israel details">
              <div class="chapter-head">
                <div>
                  <div class="label">On the back of the page</div>
                  <h3>Rhymes of Israel — Details</h3>
                </div>
                <button class="btn" type="button" data-action="choose" data-open="false" aria-label="Close chapter">Close <span class="mini">⨯</span></button>
              </div>

              <p><strong>What it is:</strong> A lightweight browser experience that transforms the tone of news consumption—demonstrating LLM integration where latency, safety, and delight all matter.</p>

              <div class="links">
                <a href="https://chromewebstore.google.com/detail/eainginjgdkpgolpjniijdihfbeeeklb" target="_blank" rel="noopener">
                  <span>Install: Rhymes of Israel (Chrome Web Store)</span><span class="right">chromewebstore.google.com ↗</span>
                </a>
              </div>

              <div class="choice" aria-label="Next chapter choices">
                <div class="prompt">Chapter choice: continue, or conclude.</div>
                <div class="mini-actions">
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-llm" data-path="llm">Reach ending</button>
                  <button class="btn tiny" type="button" data-action="goto" data-target="links" data-path="meta">Epilogue & contact</button>
                </div>
              </div>
            </section>
          </div>
        </article>

        <!-- 6) Portfolio Website (Meta) -->
        <article class="chapter flip" id="portfolio-meta" data-chapter="portfolio-meta" data-open="false" aria-label="Chapter: Portfolio Website (Meta)">
          <div class="flip-inner">
            <section class="face front">
              <div class="chapter-head">
                <div>
                  <div class="label">Chapter 6 — the self-referential chapter</div>
                  <h3>Portfolio Website (Meta)</h3>
                </div>
                <span class="chip"><span class="pin"></span>Meta / Web Craft</span>
              </div>

              <p><strong>Hook:</strong> A portfolio site about building a portfolio site—crafted as an adventure with multiple endings.</p>
              <p>This page frames work as a set of interpretations: you choose the narrative thread, and the page commits to an ending.</p>

              <div class="tags">
                <span class="chip"><span class="pin"></span>Design system</span>
                <span class="chip"><span class="pin"></span>Interaction</span>
                <span class="chip"><span class="pin"></span>Storytelling</span>
                <span class="chip"><span class="pin"></span>Single-page</span>
              </div>

              <div class="chapter-actions">
                <button class="btn primary" type="button" data-action="choose" data-open="true">Choose this chapter</button>
                <a class="btn" href="https://geekip.dev" target="_blank" rel="noopener">
                  Self-reference link <span class="mini">↗</span>
                </a>
              </div>

              <div class="choice">
                <div class="prompt">Chapter choice: end the meta-story?</div>
                <div class="mini-actions">
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-meta" data-path="meta">End: meta arc</button>
                  <button class="btn tiny" type="button" data-action="goto" data-target="links" data-path="meta">Epilogue & contact</button>
                </div>
              </div>
            </section>

            <section class="face back" aria-label="Portfolio meta details">
              <div class="chapter-head">
                <div>
                  <div class="label">On the back of the page</div>
                  <h3>Portfolio Website (Meta) — Details</h3>
                </div>
                <button class="btn" type="button" data-action="choose" data-open="false" aria-label="Close chapter">Close <span class="mini">⨯</span></button>
              </div>

              <p><strong>What it is:</strong> A deliberate constraint: a single file, a single page, and multiple endings. The artifact and the message match—systems, choices, and consequences.</p>

              <div class="links">
                <a href="https://geekip.dev" target="_blank" rel="noopener">
                  <span>geekip.dev</span><span class="right">geekip.dev ↗</span>
                </a>
              </div>

              <div class="choice" aria-label="Next chapter choices">
                <div class="prompt">Chapter choice: conclude, or restart from the compass.</div>
                <div class="mini-actions">
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-meta" data-path="meta">Reach ending</button>
                  <button class="btn tiny" type="button" data-action="restart">Restart</button>
                </div>
              </div>
            </section>
          </div>
        </article>

        <!-- 7) Links / Contact -->
        <article class="chapter flip" id="links" data-chapter="links" data-open="false" aria-label="Chapter: Links / Contact">
          <div class="flip-inner">
            <section class="face front">
              <div class="chapter-head">
                <div>
                  <div class="label">Chapter 7 — epilogue</div>
                  <h3>Links / Contact</h3>
                </div>
                <span class="chip"><span class="pin"></span>Epilogue</span>
              </div>

              <p>Interested in collaboration—data, geometry, LLM tooling, or civic work? Reach out and let’s build something that reads well *and* runs well.</p>

              <div class="contact-row" aria-label="Social links">
                <a class="big-link" href="https://github.com/gevak" target="_blank" rel="noopener">
                  <div class="left">
                    <div class="icon" aria-hidden="true">
                      <!-- minimalist mark -->
                      <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <path d="M9 19c-4 1.5-4-2.5-6-3m12 6v-3.87c0-1.1.1-1.5-.52-2.18 2.85-.32 5.85-1.4 5.85-6.35 0-1.41-.5-2.56-1.32-3.46.13-.33.57-1.66-.13-3.46 0 0-1.07-.34-3.5 1.32a12.2 12.2 0 0 0-6.36 0C6.56 5.24 5.5 5.58 5.5 5.58c-.7 1.8-.26 3.13-.13 3.46A5.02 5.02 0 0 0 4.05 12c0 4.93 3 6.02 5.85 6.35-.5.45-.5 1.05-.52 1.78V22" stroke="rgba(255,255,255,0.82)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </div>
                    <div class="text">
                      <strong>github.com/gevak</strong>
                      <span>Code & projects</span>
                    </div>
                  </div>
                  <div class="right">↗</div>
                </a>

                <a class="big-link" href="https://linkedin.com/in/gevakip" target="_blank" rel="noopener">
                  <div class="left">
                    <div class="icon" aria-hidden="true">
                      <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <path d="M6.5 9.5V20M6.5 7a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3ZM10.5 20v-6a3.5 3.5 0 0 1 7 0v6" stroke="rgba(255,255,255,0.82)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </div>
                    <div class="text">
                      <strong>linkedin.com/in/gevakip</strong>
                      <span>Professional profile</span>
                    </div>
                  </div>
                  <div class="right">↗</div>
                </a>

                <a class="big-link" href="https://facebook.com/geva.kipper" target="_blank" rel="noopener">
                  <div class="left">
                    <div class="icon" aria-hidden="true">
                      <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <path d="M14 8h2V5h-2c-2.2 0-4 1.8-4 4v3H8v3h2v6h3v-6h2.3l.7-3H13V9c0-.6.4-1 1-1Z" stroke="rgba(255,255,255,0.82)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </div>
                    <div class="text">
                      <strong>facebook.com/geva.kipper</strong>
                      <span>Social</span>
                    </div>
                  </div>
                  <div class="right">↗</div>
                </a>
              </div>

              <div class="shortcut" aria-label="Jump to an ending shortcuts">
                <div class="prompt">Prefer shortcuts? Jump to an ending:</div>
                <div class="mini-actions">
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-data" data-path="data">Data Storyteller</button>
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-geo" data-path="geo">Geometry Tactician</button>
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-llm" data-path="llm">LLM Ringmaster</button>
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-civic" data-path="civic">Civic Cartographer</button>
                  <button class="btn tiny" type="button" data-action="goto" data-target="ending-meta" data-path="meta">Web Metanarrator</button>
                </div>
              </div>

              <div class="chapter-actions" style="margin-top:14px;">
                <button class="btn" type="button" data-action="restart">Restart your adventure <span class="mini">↺</span></button>
                <button class="btn primary" type="button" data-action="choose" data-open="true">Open epilogue notes</button>
              </div>
            </section>

            <section class="face back" aria-label="Links epilogue details">
              <div class="chapter-head">
                <div>
                  <div class="label">On the back of the page</div>
                  <h3>Epilogue Notes</h3>
                </div>
                <button class="btn" type="button" data-action="choose" data-open="false" aria-label="Close chapter">Close <span class="mini">⨯</span></button>
              </div>

              <p><strong>How to read this:</strong> You can scroll linearly, but the tiny “chapter choice” prompts deliberately reroute you. The portfolio is less a list and more a set of plausible narratives.</p>
              <p style="margin-top:10px; color: var(--muted);">If you want, pick a compass path again and let the page commit to a new ending.</p>

              <div class="choice" aria-label="Next chapter choices">
                <div class="prompt">Chapter choice: one more turn?</div>
                <div class="mini-actions">
                  <button class="btn tiny" type="button" data-action="goto" data-target="compass">Back to compass</button>
                  <button class="btn tiny" type="button" data-action="restart">Restart</button>
                </div>
              </div>
            </section>
          </div>
        </article>

      </div>
    </main>

    <!-- ENDINGS -->
    <section class="endings" aria-label="Endings">
      <div class="ending" id="ending-data" data-ending="ending-data" data-show="false" tabindex="-1">
        <div class="reached">You reached:</div>
        <h4>The Data Storyteller</h4>
        <p>You interpret the work as a pursuit of legible patterns: compression as a proxy for musical repetition, charts as arguments, and interfaces as a way to make conclusions shareable. The throughline is not “data for data’s sake,” but data as narrative—measured, visualized, and communicated with restraint.</p>
        <div class="ending-actions">
          <button class="btn primary" type="button" data-action="restart">Restart your adventure <span class="mini">↺</span></button>
          <button class="btn" type="button" data-action="goto" data-target="compass">Return to compass</button>
        </div>
      </div>

      <div class="ending" id="ending-geo" data-ending="ending-geo" data-show="false" tabindex="-1">
        <div class="reached">You reached:</div>
        <h4>The Geometry Tactician</h4>
        <p>You read the portfolio as a preference for crisp constraints and elegant guarantees: the kind of engineering where correctness is a first-class feature. The story is careful implementation—turning abstract algorithmic insight into code that others can rely on.</p>
        <div class="ending-actions">
          <button class="btn primary" type="button" data-action="restart">Restart your adventure <span class="mini">↺</span></button>
          <button class="btn" type="button" data-action="goto" data-target="compass">Return to compass</button>
        </div>
      </div>

      <div class="ending" id="ending-llm" data-ending="ending-llm" data-show="false" tabindex="-1">
        <div class="reached">You reached:</div>
        <h4>The LLM Ringmaster</h4>
        <p>You see an engineer who treats models as performers and products as stages: evaluation becomes an arena, humor becomes a benchmark, and browser surfaces become delivery mechanisms. The arc emphasizes playful rigor—building feedback loops where taste becomes data.</p>
        <div class="ending-actions">
          <button class="btn primary" type="button" data-action="restart">Restart your adventure <span class="mini">↺</span></button>
          <button class="btn" type="button" data-action="goto" data-target="compass">Return to compass</button>
        </div>
      </div>

      <div class="ending" id="ending-civic" data-ending="ending-civic" data-show="false" tabindex="-1">
        <div class="reached">You reached:</div>
        <h4>The Civic Cartographer</h4>
        <p>You interpret the work as civic leverage: collecting signals, producing maps, and shifting power toward residents. The plot here is pragmatic impact—tools that make a city more navigable by making hidden state visible.</p>
        <div class="ending-actions">
          <button class="btn primary" type="button" data-action="restart">Restart your adventure <span class="mini">↺</span></button>
          <button class="btn" type="button" data-action="goto" data-target="compass">Return to compass</button>
        </div>
      </div>

      <div class="ending" id="ending-meta" data-ending="ending-meta" data-show="false" tabindex="-1">
        <div class="reached">You reached:</div>
        <h4>The Web Metanarrator</h4>
        <p>You focus on framing: the craft of turning a list of projects into a coherent reading experience. The site admits its own construction, treats interaction as editorial choice, and uses “endings” as a clean way to summarize what the visitor decided to value.</p>
        <div class="ending-actions">
          <button class="btn primary" type="button" data-action="restart">Restart your adventure <span class="mini">↺</span></button>
          <button class="btn" type="button" data-action="goto" data-target="compass">Return to compass</button>
        </div>
      </div>
    </section>
  </div>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" data-open="false" role="dialog" aria-modal="true" aria-label="Video lightbox">
    <div class="panel">
      <div class="bar">
        <div class="cap" id="lightboxCap">Video</div>
        <button class="btn" type="button" id="closeLightbox" aria-label="Close video">Close <span class="mini">⨯</span></button>
      </div>
      <iframe id="lightboxFrame" allow="autoplay; encrypted-media; picture-in-picture" allowfullscreen title="Embedded video"></iframe>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="colophon">
      <div class="credit">Created by ChatGPT (OpenAI)</div>
      <div class="stopwatch" aria-label="Stopwatch showing time since 2025-12-13 01:05:54">
        <span class="label">Time since 2025-12-13 01:05:54</span>
        <span class="time" id="stopwatch">00:00:00</span>
      </div>
    </div>
  </footer>

  <script>
    (() => {
      // ---------- Daily "AI theme" (deterministic per day) ----------
      // Choose a tasteful accent based on local date. (Deterministic → "daily remix".)
      const today = new Date();
      const y = today.getFullYear(), m = today.getMonth()+1, d = today.getDate();
      const seed = (y * 10000 + m * 100 + d) >>> 0;

      // Simple LCG-ish hash
      function hash32(x){
        x ^= x << 13; x >>>= 0;
        x ^= x >>> 17; x >>>= 0;
        x ^= x << 5; x >>>= 0;
        return x >>> 0;
      }
      const h = hash32(seed);

      // HSL → hex for consistent subtle palette
      const hue = (h % 360);                 // 0..359
      const sat = 62;                        // restrained but alive
      const light = 62;                      // works on dark background
      function hslToHex(h, s, l) {
        s /= 100; l /= 100;
        const k = n => (n + h / 30) % 12;
        const a = s * Math.min(l, 1 - l);
        const f = n => l - a * Math.max(-1, Math.min(k(n) - 3, Math.min(9 - k(n), 1)));
        const toHex = x => Math.round(255 * x).toString(16).padStart(2, '0');
        return `#${toHex(f(0))}${toHex(f(8))}${toHex(f(4))}`;
      }
      const accent = hslToHex(hue, sat, light);
      const root = document.documentElement;
      root.style.setProperty('--accent', accent);
      root.style.setProperty('--accent2', `color-mix(in srgb, ${accent} 26%, transparent)`);

      const label = document.getElementById('dailyThemeLabel');
      if (label) label.textContent = `Theme for ${y}-${String(m).padStart(2,'0')}-${String(d).padStart(2,'0')}`;

      // ---------- Smooth scroll helper ----------
      const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      function scrollToEl(el){
        if (!el) return;
        el.scrollIntoView({ behavior: prefersReducedMotion ? 'auto' : 'smooth', block: 'start' });
      }

      // ---------- Decision Compass highlighting ----------
      const map = document.getElementById('map');
      const nodes = {
        data: document.getElementById('node-data'),
        geo: document.getElementById('node-geo'),
        llm: document.getElementById('node-llm'),
        civic: document.getElementById('node-civic'),
        meta: document.getElementById('node-meta')
      };
      const lines = {
        data: document.getElementById('line-data'),
        geo: document.getElementById('line-geo'),
        llm: document.getElementById('line-llm'),
        civic: document.getElementById('line-civic'),
        meta: document.getElementById('line-meta')
      };

      function clearMapFocus(){
        map.classList.remove('dim');
        Object.values(nodes).forEach(n => n?.classList.remove('active'));
        Object.values(lines).forEach(l => l?.classList.remove('active'));
      }

      function focusPath(path){
        if (!path || !nodes[path]) { clearMapFocus(); return; }
        map.classList.add('dim');
        // keep center visible
        document.getElementById('node-center')?.classList.add('active');
        nodes[path].classList.add('active');
        lines[path].classList.add('active');
      }

      // ---------- Chapter flipping / mobile accordion ----------
      function setChapterOpen(chapterEl, open){
        if (!chapterEl) return;
        chapterEl.setAttribute('data-open', open ? 'true' : 'false');
      }
      function openChapterById(id){
        const el = document.getElementById(id);
        if (!el) return null;
        setChapterOpen(el, true);
        return el;
      }
      function closeAllChapters(){
        document.querySelectorAll('.chapter[data-open="true"]').forEach(ch => setChapterOpen(ch, false));
      }

      // ---------- Endings control ----------
      function hideAllEndings(){
        document.querySelectorAll('.ending').forEach(e => e.setAttribute('data-show', 'false'));
      }
      function showEndingById(id){
        hideAllEndings();
        const el = document.getElementById(id);
        if (!el) return;
        el.setAttribute('data-show', 'true');
        // focus for a "real ending" feel
        setTimeout(() => { try { el.focus({preventScroll:true}); } catch {} }, 0);
        scrollToEl(el);
      }

      // ---------- Restart behavior ----------
      function restartAdventure(){
        clearMapFocus();
        closeAllChapters();
        hideAllEndings();
        scrollToEl(document.getElementById('compass'));
      }
      document.getElementById('restartBtn')?.addEventListener('click', restartAdventure);

      // ---------- Compass node clicks ----------
      // The <button> inside each node doesn't render visually inside SVG, but remains clickable via pointer events.
      // To ensure clickability, we listen on the node group and read dataset from the button.
      function nodeDataset(nodeGroup){
        const btn = nodeGroup.querySelector('button.node-btn');
        return btn ? btn.dataset : null;
      }

      Object.entries(nodes).forEach(([path, g]) => {
        if (!g) return;
        g.style.cursor = 'pointer';
        g.addEventListener('click', (ev) => {
          const ds = nodeDataset(g);
          if (!ds) return;
          focusPath(ds.path || path);

          // Jump to relevant chapter
          const targetId = ds.target;
          if (targetId){
            const chapterEl = openChapterById(targetId);
            scrollToEl(chapterEl);
          }
        });
        g.addEventListener('keydown', (ev) => {
          if (ev.key !== 'Enter' && ev.key !== ' ') return;
          ev.preventDefault();
          g.click();
        });
        // Make group keyboard-focusable
        g.setAttribute('tabindex', '0');
        g.setAttribute('role', 'button');
        g.setAttribute('aria-label', g.querySelector('text')?.textContent || `Choose ${path} path`);
      });

      // ---------- In-card controls (choose / goto / restart / lightbox) ----------
      document.addEventListener('click', (e) => {
        const btn = e.target.closest('[data-action]');
        if (!btn) return;

        const action = btn.getAttribute('data-action');

        if (action === 'choose'){
          const chapter = btn.closest('.chapter');
          const open = btn.getAttribute('data-open') === 'true';
          setChapterOpen(chapter, open);
          return;
        }

        if (action === 'restart'){
          restartAdventure();
          return;
        }

        if (action === 'goto'){
          const target = btn.getAttribute('data-target');
          const path = btn.getAttribute('data-path');

          if (path) focusPath(path);

          if (!target) return;

          // If the target is an ending panel
          if (target.startsWith('ending-')){
            showEndingById(target);
            return;
          }

          // Else: normal section/card
          const el = document.getElementById(target);
          if (!el) return;

          // If going to a chapter card, open it for continuity
          if (el.classList.contains('chapter')) setChapterOpen(el, true);
          scrollToEl(el);
          return;
        }

        if (action === 'lightbox'){
          e.preventDefault();
          const url = btn.getAttribute('data-video');
          if (!url) return;
          openLightbox(url, 'PyData TLV talk');
          return;
        }
      });

      // ---------- Lightbox ----------
      const lightbox = document.getElementById('lightbox');
      const frame = document.getElementById('lightboxFrame');
      const cap = document.getElementById('lightboxCap');
      const closeLightboxBtn = document.getElementById('closeLightbox');

      let lastFocus = null;

      function openLightbox(embedUrl, caption){
        lastFocus = document.activeElement;
        lightbox.setAttribute('data-open', 'true');
        cap.textContent = caption || 'Video';
        frame.src = embedUrl;
        closeLightboxBtn?.focus();
      }
      function closeLightbox(){
        lightbox.setAttribute('data-open', 'false');
        frame.src = '';
        if (lastFocus && typeof lastFocus.focus === 'function') lastFocus.focus();
      }
      closeLightboxBtn?.addEventListener('click', closeLightbox);
      lightbox?.addEventListener('click', (e) => {
        if (e.target === lightbox) closeLightbox();
      });
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && lightbox.getAttribute('data-open') === 'true') closeLightbox();
      });

      // ---------- Stopwatch ----------
      const start = new Date('2025-12-13T01:05:54');
      const sw = document.getElementById('stopwatch');

      function pad(n){ return String(n).padStart(2,'0'); }
      function tick(){
        const now = new Date();
        let ms = now - start;
        if (ms < 0) ms = 0;
        const totalSec = Math.floor(ms / 1000);
        const hh = Math.floor(totalSec / 3600);
        const mm = Math.floor((totalSec % 3600) / 60);
        const ss = totalSec % 60;
        sw.textContent = `${pad(hh)}:${pad(mm)}:${pad(ss)}`;
      }
      tick();
      setInterval(tick, 1000);

      // Start clean (no ending showing)
      hideAllEndings();
      clearMapFocus();

      // Improve SVG button clickability: ensure groups receive pointer events
      document.querySelectorAll('.map-node').forEach(g => {
        g.style.pointerEvents = 'all';
      });

      // Nice-to-have: if URL hash is present, navigate
      function handleHash(){
        const id = location.hash?.slice(1);
        if (!id) return;
        const el = document.getElementById(id);
        if (!el) return;

        if (el.classList.contains('chapter')) setChapterOpen(el, true);
        if (id.startsWith('ending-')) {
          showEndingById(id);
          return;
        }
        scrollToEl(el);
      }
      window.addEventListener('hashchange', handleHash);
      setTimeout(handleHash, 0);

    })();
  </script>
<!-- Add this block to embed the like button -->
    <script src="/static/js/like_button.js"></script>
    <script>
        LikeButton.init({
          pageId: "20251213",
          position: "bottom-right", // Options: bottom-right, bottom-left, top-right, top-left
        });
    </script>

</body>
</html>