<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geva Kipper | The Evolving Labyrinth</title>
    <style>
        /* CSS Reset & Base Styles */
        :root {
            /* These variables are placeholders and will be overwritten by JavaScript */
            --bg-color: #111;
            --primary-color: #eee;
            --accent-color: #00ffff;
            --text-light-color: #aaa;
            --text-main-color: #ddd;
            --box-bg-color: rgba(26, 26, 26, 0.7);
            --box-border-color: rgba(0, 255, 255, 0.5);
            --box-border-radius: 8px;
            --box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
            --font-main: 'Inter', sans-serif;
            --font-heading: 'Sora', sans-serif;
            --font-mono: 'IBM Plex Mono', monospace;
            --backdrop-filter: blur(10px);
            --background-css: var(--bg-color);
            --icon-filter: none;
        }

        @import url('https://fonts.googleapis.com/css2?family=Sora:wght@300;600;800&family=Inter:wght@300;400&family=IBM+Plex+Mono:wght@400;500&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--background-css);
            background-attachment: fixed;
            color: var(--text-main-color);
            font-family: var(--font-main);
            overflow-x: hidden;
            transition: background 1s ease;
        }

        /* Timeline SVG */
        #timeline-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        #timeline-path {
            stroke-width: 2.5;
            stroke: var(--accent-color);
            fill: none;
            transition: stroke 1s ease;
        }

        /* Main Container */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            position: relative;
            padding: 0 40px;
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
        }

        .hero h1 {
            font-family: var(--font-heading);
            font-size: clamp(3rem, 10vw, 5.5rem);
            font-weight: 800;
            margin: 0;
            color: var(--primary-color);
            letter-spacing: -2px;
        }

        .hero .job-description {
            font-size: clamp(1rem, 4vw, 1.25rem);
            font-weight: 300;
            color: var(--text-light-color);
            max-width: 600px;
            margin: 1rem 0;
        }

        .hero .ai-subtitle {
            margin-top: 2rem;
            max-width: 450px;
            font-size: 0.9rem;
            color: var(--text-light-color);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-style: italic;
        }

        .ai-icon {
            width: 28px;
            height: 28px;
            filter: var(--icon-filter);
        }

        /* Project Sections */
        .project-section {
            padding: 10vh 0;
            position: relative;
        }

        .project-box {
            position: absolute;
            width: clamp(300px, 40%, 450px);
            padding: 1.5rem;
            background: var(--box-bg-color);
            border: 1.5px solid var(--box-border-color);
            border-radius: var(--box-border-radius);
            box-shadow: var(--box-shadow);
            backdrop-filter: var(--backdrop-filter);
            -webkit-backdrop-filter: var(--backdrop-filter);
            transition: transform 0.6s cubic-bezier(0.165, 0.84, 0.44, 1), 
                        opacity 0.6s cubic-bezier(0.165, 0.84, 0.44, 1),
                        background 0.3s ease;
            opacity: 0;
            transform-origin: center;
        }

        .project-box:hover {
            transform: translateY(-8px) scale(1.02);
            background: rgba(40,40,40, 0.8);
        }

        /* Animation class */
        .project-box.is-visible {
            opacity: 1;
            transform: translateY(0) translateX(0);
        }

        /* Box positioning and entry animation */
        .project-box.align-left {
            left: 0;
            transform: translateX(-30px);
        }

        .project-box.align-right {
            right: 0;
            transform: translateX(30px);
        }

        .project-box h2 {
            font-family: var(--font-heading);
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 0.75rem;
        }

        .project-box p {
            font-size: 0.95rem;
            line-height: 1.6;
            color: var(--text-main-color);
            margin-bottom: 1.25rem;
        }
        
        .project-links {
            display: flex;
            gap: 15px;
        }

        .project-links a {
            color: var(--accent-color);
            text-decoration: none;
            position: relative;
            display: block;
            transition: transform 0.2s ease, filter 0.2s ease;
        }

        .project-links a:hover {
            transform: scale(1.15);
            filter: drop-shadow(0 0 8px var(--accent-color));
        }

        .project-links svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }

        /* Tooltip */
        .tooltip {
            position: absolute;
            bottom: 130%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #222;
            color: #fff;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease, visibility 0.2s ease;
            z-index: 10;
        }

        .project-links a:hover .tooltip {
            opacity: 1;
            visibility: visible;
        }

        /* Connect Node */
        #connect-node {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            padding: 2.5rem;
        }

        #connect-node .project-links a svg {
            width: 36px;
            height: 36px;
        }
        
        /* Footer */
        footer {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: var(--text-light-color);
            border-top: 1px solid var(--box-border-color);
            margin-top: 10vh;
        }

        .footer-timer {
            font-family: var(--font-mono);
            font-size: 0.9rem;
            color: var(--primary-color);
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .container { padding: 0 20px; }
            .project-box {
                position: relative;
                width: 100%;
                left: auto !important;
                right: auto !important;
                margin-bottom: 5rem;
                transform: translateY(30px);
            }
             .project-box.is-visible {
                transform: translateY(0);
            }
            #timeline-svg {
                left: -40%;
            }
            footer {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
        }
    </style>
</head>
<body>

    <svg id="timeline-svg">
        <path id="timeline-path"/>
    </svg>
    
    <div class="container">
        <header class="hero">
            <h1>Geva Kipper</h1>
            <p class="job-description">A software engineer at Google, exploring the intersection of data, algorithms, and creativity.</p>
            <div class="ai-subtitle">
                <span class="ai-icon-container"></span>
                <p>This portfolio is a living project, algorithmically re-designed each day by an AI. What you see today may be gone tomorrow.</p>
            </div>
        </header>

        <main id="project-section" class="project-section">
            <!-- Project boxes will be dynamically inserted here -->
        </main>

        <footer>
            <div class="footer-credit">This design was generated by Claude, a large language model from Anthropic.</div>
            <div class="footer-timer">
                <span>Time Since Genesis:</span>
                <span id="timer">00 : 00 : 00</span>
            </div>
        </footer>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- DATA ---
        const projectData = [
            {
                title: "GlglStats",
                description: "A Python project that measures the repetitiveness of Israeli pop-chart songs using LZ77 compression and visualizes repetition patterns in famous tracks.",
                links: [
                    { type: 'link', url: 'https://glglstats.geekip.dev', tooltip: 'View Website' },
                    { type: 'play', url: 'https://www.youtube.com/watch?v=jrKAtOsj1Lo', tooltip: 'Watch Conference Talk' }
                ]
            },
            {
                title: "Ahuzat Dibuk",
                description: "A Python scraping and data visualization project that collects occupancy statistics for Tel-Aviv parking lots, generating heat-maps for residents.",
                links: [
                    { type: 'news', url: 'https://13tv.co.il/item/news/domestic/internal/parking-902956407/', tooltip: 'Read 13tv Article' },
                    { type: 'news', url: 'https://www.mako.co.il/nexter-news/Article-ae43964b891bf71027.htm', tooltip: 'Read Mako Article' },
                    { type: 'facebook', url: 'https://www.facebook.com/groups/secrettelaviv/posts/10159636301195943', tooltip: 'View Original Post' }
                ]
            },
            {
                title: "2D Part Orienting",
                description: "A C++ implementation of an efficient algorithm for constructing a 'push plan' to orient a given polygon, contributed to an open-source computational geometry library.",
                links: [
                    { type: 'code', url: 'https://www.cgl.cs.tau.ac.il/projects/2d-part-orienting/', tooltip: 'View Project and Code' }
                ]
            },
            {
                title: "The Turing Jest",
                description: "An LMSYS-style arena where Large Language Models compete at creating and explaining puns, with user-based ratings determining the wittiest AI.",
                links: [
                    { type: 'link', url: 'https://jest.geekip.dev', tooltip: 'Visit The Turing Jest' }
                ]
            },
            {
                title: "Rhymes of Israel",
                description: "A Chrome extension leveraging an LLM to humorously rewrite Israeli news headlines into rhyming couplets, in the style of a high school yearbook.",
                links: [
                    { type: 'chrome', url: 'https://chromewebstore.google.com/detail/eainginjgdkpgolpjniijdihfbeeeklb', tooltip: 'View on Chrome Web Store' }
                ]
            },
            {
                title: "The Evolving Labyrinth",
                description: "A meta-project; the very portfolio you are viewing. It is built with modern web technologies and features a daily-regenerating design powered by AI.",
                links: [
                    { type: 'infinity', url: 'https://geekip.dev', tooltip: 'This Website' }
                ]
            },
            {
                isConnectNode: true,
                links: [
                    { type: 'github', url: 'https://github.com/gevak', tooltip: 'GitHub' },
                    { type: 'linkedin', url: 'https://linkedin.com/in/gevakip', tooltip: 'LinkedIn' },
                    { type: 'facebook', url: 'https://facebook.com/geva.kipper', tooltip: 'Facebook' }
                ]
            }
        ];

        const icons = {
            link: `<svg viewBox="0 0 24 24"><path d="M10.59,13.41C11,13.8 11,14.44 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83L5.64,11.3C4.86,10.52 4.86,9.25 5.64,8.47L6.35,7.76C6.74,7.37 7.38,7.37 7.77,7.76C8.16,8.15 8.16,8.79 7.77,9.18L7.06,9.89C6.67,10.28 6.67,10.92 7.06,11.31L10.59,14.83V13.41M18.36,5.64C17.58,4.86 16.31,4.86 15.53,5.64L14.82,6.35C14.43,6.74 14.43,7.38 14.82,7.77C15.21,8.16 15.85,8.16 16.24,7.77L16.95,7.06C17.34,6.67 17.98,6.67 18.37,7.06C18.76,7.45 18.76,8.09 18.37,8.48L14.83,12C14.44,12.39 13.8,12.39 13.41,12C13,11.61 13,10.97 13.41,10.58L14.12,9.88C14.51,9.49 15.15,9.49 15.54,9.88L16.24,10.59C16.63,10.98 17.27,10.98 17.66,10.59L18.37,9.88C19.15,9.1 19.15,7.83 18.37,7.05L17.66,6.34C17.27,5.95 16.63,5.95 16.24,6.34L15.53,7.05C15.14,7.44 14.5,7.44 14.11,7.05C13.72,6.66 13.72,6.02 14.11,5.63L14.82,4.92C15.6,4.14 16.87,4.14 17.65,4.92L19.06,6.33C19.84,7.11 19.84,8.38 19.06,9.16L15.53,12.69C14.75,13.47 13.48,13.47 12.7,12.69L11.29,11.28C10.9,10.89 10.26,10.89 9.87,11.28C9.48,11.67 9.48,12.31 9.87,12.7L11.28,14.11C12.06,14.89 13.33,14.89 14.11,14.11L19.77,8.45C20.55,7.67 20.55,6.4 19.77,5.62L18.36,4.21V5.64Z" /></svg>`,
            play: `<svg viewBox="0 0 24 24"><path d="M8,5.14V19.14L19,12.14L8,5.14Z" /></svg>`,
            news: `<svg viewBox="0 0 24 24"><path d="M20,22H4C2.9,22 2,21.1 2,20V4C2,2.9 2.9,2 4,2H20C21.1,2 22,2.9 22,4V20C22,21.1 21.1,22 20,22M12,17H20V15H12V17M12,13H20V11H12V13M12,9H20V7H12V9M4,20H10V4H4V20Z" /></svg>`,
            code: `<svg viewBox="0 0 24 24"><path d="M8.7,15.9L4.8,12L8.7,8.1L10.1,9.5L7.6,12L10.1,14.5L8.7,15.9M15.3,15.9L13.9,14.5L16.4,12L13.9,9.5L15.3,8.1L19.2,12L15.3,15.9Z" /></svg>`,
            facebook: `<svg viewBox="0 0 24 24"><path d="M12 2.04C6.5 2.04 2 6.53 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.85C10.44 7.32 11.93 5.96 14.22 5.96C15.31 5.96 16.45 6.15 16.45 6.15V8.62H15.19C13.95 8.62 13.56 9.39 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96A10 10 0 0 0 22 12.06C22 6.53 17.5 2.04 12 2.04Z" /></svg>`,
            chrome: `<svg viewBox="0 0 24 24"><path d="M15.2,12.8L12.8,15.2L11.2,12.8L12.8,11.2L15.2,12.8M12,2C17.5,2 22,6.5 22,12C22,17.5 17.5,22 12,22C6.5,22 2,17.5 2,12C2,6.5 6.5,2 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12,6.9C9.7,6.9 7.8,8.2 6.9,10.1L9.1,10.6C9.5,9.4 10.6,8.5 12,8.5C13.9,8.5 15.5,10.1 15.5,12C15.5,12.4 15.4,12.8 15.2,13.2L17.5,15.5C18.4,14.3 19,12.8 19,11.1C18.9,8.7 15.8,6.9 12,6.9Z" /></svg>`,
            infinity: `<svg viewBox="0 0 24 24"><path d="M12,4C7.58,4 4,7.58 4,12C4,16.42 7.58,20 12,20C15.5,20 18.46,17.65 19.47,14.5H14.82V12.5H21.5C21.5,12.84 21.5,13.16 21.5,13.5C21.5,18.19 17.31,22 12,22C6.48,22 2,17.52 2,12C2,6.48 6.48,2 12,2C14.77,2 17.2,3.13 18.9,5L17.5,6.4C16.17,4.92 14.21,4 12,4M15,8H17V13H12V11H15V8Z"/></svg>`,
            github: `<svg viewBox="0 0 24 24"><path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21V19.21C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.83,16.41C14.17,16.72 14.5,17.33 14.5,18.26V21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z" /></svg>`,
            linkedin: `<svg viewBox="0 0 24 24"><path d="M19 3A2 2 0 0 1 21 5V19A2 2 0 0 1 19 21H5A2 2 0 0 1 3 19V5A2 2 0 0 1 5 3H19M18.5 18.5V13.2A3.26 3.26 0 0 0 15.24 9.94C14.39 9.94 13.4 10.46 13 11.1V10.13H10.13V18.5H13V13.74C13 12.81 13.38 11.93 14.31 11.93C15.24 11.93 15.62 12.81 15.62 13.74V18.5H18.5M6.88 8.56A1.68 1.68 0 0 0 8.56 6.88C8.56 6 7.78 5.2 6.88 5.2C6 5.2 5.2 6 5.2 6.88A1.68 1.68 0 0 0 6.88 8.56M8.27 18.5V10.13H5.5V18.5H8.27Z" /></svg>`
        };
        
        const aiIcons = [
            `<svg class="ai-icon" viewBox="0 0 24 24"><path fill="var(--accent-color)" d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M8,17.5A1.5,1.5 0 0,1 6.5,16A1.5,1.5 0 0,1 8,14.5A1.5,1.5 0 0,1 9.5,16A1.5,1.5 0 0,1 8,17.5M16,17.5A1.5,1.5 0 0,1 14.5,16A1.5,1.5 0 0,1 16,14.5A1.5,1.5 0 0,1 17.5,16A1.5,1.5 0 0,1 16,17.5M12.5,13.25L15.36,10.39L14.3,9.33L11.5,12.12L8.64,9.26L7.58,10.32L10.5,13.25L7.58,16.18L8.64,17.24L11.5,14.37L14.3,17.24L15.36,16.18L12.5,13.25Z" transform="rotate(0 0 0)"><animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="20s" repeatCount="indefinite"/></svg>`,
            `<svg class="ai-icon" viewBox="0 0 24 24"><path fill="var(--accent-color)" d="M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8M12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18M21.5,12C21.5,12.8 21.4,13.6 21.1,14.3L19.5,13.8C19.7,13.2 19.8,12.6 19.8,12C19.8,9.7 18.5,7.8 16.5,6.9L17.1,5.2C19.5,6.4 21.2,8.9 21.5,12M2.5,12C2.5,11.2 2.6,10.4 2.9,9.7L4.5,10.2C4.3,10.8 4.2,11.4 4.2,12C4.2,14.3 5.5,16.2 7.5,17.1L6.9,18.8C4.5,17.6 2.8,15.1 2.5,12M12,2.5C11.2,2.5 10.4,2.6 9.7,2.9L10.2,4.5C10.8,4.3 11.4,4.2 12,4.2C14.3,4.2 16.2,5.5 17.1,7.5L18.8,6.9C17.6,4.5 15.1,2.8 12,2.5M12,21.5C12.8,21.5 13.6,21.4 14.3,21.1L13.8,19.5C13.2,19.7 12.6,19.8 12,19.8C9.7,19.8 7.8,18.5 6.9,16.5L5.2,17.1C6.4,19.5 8.9,21.2 12,21.5Z"><animateTransform attributeName="transform" type="rotate" from="360 12 12" to="0 12 12" dur="30s" repeatCount="indefinite"/></svg>`,
            `<svg class="ai-icon" viewBox="0 0 24 24"><path fill="var(--accent-color)" d="M12 2.69l5.31 5.31-1.42 1.42L12 5.54l-3.89 3.88-1.42-1.42L12 2.69zm0 18.62l-5.31-5.31 1.42-1.42L12 18.46l3.89-3.88 1.42 1.42L12 21.31zm-5.31-10.62L2.81 12l3.88 3.89 1.42-1.42L5.54 12l2.57-2.57-1.42-1.42zM19.19 12l-3.88-3.89-1.42 1.42L18.46 12l-2.57 2.57 1.42 1.42L19.19 12z"><animate attributeName="opacity" values="0.5;1;0.5" dur="3s" repeatCount="indefinite" /></svg>`
        ];

        // --- PRNG (Pseudo-Random Number Generator) ---
        // Using Mulberry32 for its simplicity and decent distribution.
        function mulberry32(a) {
            return function() {
                a |= 0; a = a + 0x6D2B79F5 | 0;
                let t = Math.imul(a ^ a >>> 15, 1 | a);
                t = t + Math.imul(t ^ t >>> 7, 61 | t) ^ t;
                return ((t ^ t >>> 14) >>> 0) / 4294967296;
            }
        }
       
        // --- THEME GENERATION ---
        const today = new Date();
        const seed = today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate();
        const rand = mulberry32(seed);

        const themes = [
            // Theme 1: Bio-Mechanical
            () => ({
                '--primary-color': '#00ffc3',
                '--accent-color': '#00ffc3',
                '--text-light-color': '#9efff0',
                '--text-main-color': '#d1fff8',
                '--box-bg-color': 'rgba(10, 48, 41, 0.6)',
                '--box-border-color': 'rgba(0, 255, 195, 0.4)',
                '--box-border-radius': '0px',
                '--font-heading': "'Sora', sans-serif",
                '--background-css': `linear-gradient(rgba(7, 20, 17, 0.8), rgba(7, 20, 17, 0.8)), url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill='%2300ffc3' fill-opacity='0.05'%3E%3Crect x='0' y='0' width='50' height='50'/%3E%3Crect x='50' y='50' width='50' height='50'/%3E%3C/g%3E%3C/svg%3E"), #071411`,
            }),
            // Theme 2: Celestial Cartography
            () => ({
                '--primary-color': '#e0e6ff',
                '--accent-color': '#a3b3ff',
                '--text-light-color': '#c2caff',
                '--text-main-color': '#e0e6ff',
                '--box-bg-color': 'rgba(23, 27, 61, 0.6)',
                '--box-border-color': 'rgba(163, 179, 255, 0.5)',
                '--box-border-radius': '50%',
                '--font-heading': "'Sora', sans-serif",
                '--background-css': `radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%)`, 
            }),
            // Theme 3: Architectural Blueprint
            () => ({
                '--primary-color': '#ffffff',
                '--accent-color': '#87CEFA',
                '--text-light-color': '#a7dcfd',
                '--text-main-color': '#d0eaff',
                '--box-bg-color': 'rgba(23, 44, 61, 0.6)',
                '--box-border-color': 'rgba(135, 206, 250, 0.5)',
                '--box-border-radius': '2px',
                '--font-heading': "'IBM Plex Mono', monospace",
                '--background-css': `#0a192f url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%231d3450' fill-opacity='0.4' fill-rule='evenodd'%3E%3Cpath d='M0 40L40 0H20L0 20M40 40V20L20 40'/%3E%3C/g%3E%3C/svg%3E")`,
                '--icon-filter': 'brightness(0) invert(1)'
            })
        ];

        function applyDailyTheme() {
            const themeIndex = Math.floor(rand() * themes.length);
            const themeStyles = themes[themeIndex]();

            for (const [key, value] of Object.entries(themeStyles)) {
                document.documentElement.style.setProperty(key, value);
            }
            
            // Set AI Icon
            const iconIndex = Math.floor(rand() * aiIcons.length);
            document.querySelector('.ai-icon-container').innerHTML = aiIcons[iconIndex];

            return themeIndex;
        }

        const activeThemeIndex = applyDailyTheme();

        // --- DOM GENERATION & LAYOUT ---
        const projectSection = document.getElementById('project-section');
        const timelinePath = document.getElementById('timeline-path');
        
        function generateLayout() {
            projectSection.innerHTML = '';
            const pathPoints = [];
            const numProjects = projectData.length;
            const viewportHeight = window.innerHeight;
            const totalHeight = (numProjects * 0.8) * viewportHeight;
            const segmentHeight = totalHeight / numProjects;

            // Generate Path
            let pathD = `M ${window.innerWidth / 2}, 0`;
            let currentY = 0;
            const midX = window.innerWidth / 2;
            const xVariance = window.innerWidth / 5;

            // Start point in hero
            pathD += ` L ${midX}, ${viewportHeight * 0.8}`;
            pathPoints.push({ x: midX, y: viewportHeight * 0.8 });
            currentY = viewportHeight * 0.8;

            for (let i = 0; i < numProjects; i++) {
                const nextY = currentY + segmentHeight;
                let nextX;

                if (activeThemeIndex === 2) { // Architectural theme
                    const lastX = pathPoints[pathPoints.length - 1].x;
                    nextX = (i % 2 === 0) ? midX - xVariance / 2 : midX + xVariance / 2;
                    pathD += ` L ${lastX}, ${nextY - segmentHeight/2}`;
                    pathD += ` L ${nextX}, ${nextY}`;
                } else { // Organic themes
                    nextX = midX + (rand() - 0.5) * xVariance;
                    const cp1x = pathPoints[pathPoints.length - 1].x;
                    const cp1y = currentY + segmentHeight / 2;
                    const cp2x = nextX;
                    const cp2y = nextY - segmentHeight / 2;
                    pathD += ` C ${cp1x},${cp1y} ${cp2x},${cp2y} ${nextX},${nextY}`;
                }
                
                pathPoints.push({ x: nextX, y: nextY });
                currentY = nextY;
            }
            
            timelinePath.setAttribute('d', pathD);
            projectSection.style.height = `${currentY}px`;
            
            // Create and position project boxes
            projectData.forEach((project, i) => {
                const box = document.createElement('div');
                box.className = 'project-box';
                
                const {x, y} = pathPoints[i+1];
                box.style.top = `${y}px`;

                let alignClass = (i % 2 === 0) ? 'align-left' : 'align-right';
                 if (window.innerWidth <= 768) {
                    alignClass = 'align-left'; // stack on mobile
                }
                box.classList.add(alignClass);
                
                let linksHTML = project.links.map(link => `
                    <a href="${link.url}" target="_blank" rel="noopener noreferrer">
                        ${icons[link.type]}
                        <span class="tooltip">${link.tooltip}</span>
                    </a>
                `).join('');

                if (project.isConnectNode) {
                    box.id = 'connect-node';
                    box.innerHTML = `<div class="project-links">${linksHTML}</div>`;
                } else {
                    box.innerHTML = `
                        <h2>${project.title}</h2>
                        <p>${project.description}</p>
                        <div class="project-links">${linksHTML}</div>
                    `;
                }
                projectSection.appendChild(box);
            });

            // After layout, do scroll-based animations
            setupScrollAnimations();
        }
        
        // --- INTERACTIVITY ---
        function setupScrollAnimations() {
            // 1. Timeline Draw
            const pathLength = timelinePath.getTotalLength();
            timelinePath.style.strokeDasharray = pathLength;
            timelinePath.style.strokeDashoffset = pathLength;

            function updateTimeline() {
                const scrollPercentage = (window.scrollY) / (document.documentElement.scrollHeight - window.innerHeight);
                const drawLength = pathLength * scrollPercentage * 1.1; // *1.1 to finish a bit early
                timelinePath.style.strokeDashoffset = Math.max(0, pathLength - drawLength);
            }
            
            // 2. Project Box Fade-in
            const boxes = document.querySelectorAll('.project-box');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, { threshold: 0.1 });

            boxes.forEach(box => observer.observe(box));

            // Attach scroll listener
            window.addEventListener('scroll', updateTimeline, { passive: true });
            updateTimeline(); // Initial call
        }

        // --- FOOTER TIMER ---
        function startTimer() {
            const timerElement = document.getElementById('timer');
            const genesisDate = new Date('2025-09-05T01:02:21');

            setInterval(() => {
                const now = new Date();
                const diff = now - genesisDate;

                if (diff < 0) { // Handle case before genesis
                    timerElement.textContent = "Awaiting Genesis...";
                    return;
                }

                let seconds = Math.floor(diff / 1000);
                let minutes = Math.floor(seconds / 60);
                let hours = Math.floor(minutes / 60);

                seconds = seconds % 60;
                minutes = minutes % 60;

                const pad = (num) => num.toString().padStart(2, '0');

                timerElement.textContent = `${pad(hours)} : ${pad(minutes)} : ${pad(seconds)}`;
            }, 1000);
        }

        // --- INITIALIZATION ---
        generateLayout();
        startTimer();

        // Handle window resize to recalculate layout
        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(generateLayout, 250);
        });

    });
    </script>
<!-- Add this block to embed the like button -->
    <script src="/static/js/like_button.js"></script>
    <script>
        LikeButton.init({
          pageId: "20250905",
          position: "bottom-right", // Options: bottom-right, bottom-left, top-right, top-left
        });
    </script>

</body>
</html>